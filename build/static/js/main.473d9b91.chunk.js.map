{"version":3,"sources":["GlobalStyle.js","utils/api.js","utils/auth.js","pages/HomePage/HomePage.js","components/ui/StatusMessage.js","config.js","components/BasicLayout.js","pages/LoginPage/LoginPage.js","components/Nav.js","components/ui/Button.js","pages/bank/BankSignUpPage.js","pages/bank/BankInvitePage.js","pages/bank/BankManageAccountPage.js","pages/bank/feeds/LCFeed.js","pages/bank/feeds/BankLCAppFeedPage.js","pages/bank/feeds/BankLiveLCFeedPage.js","pages/bank/feeds/BankLCFeedPage.js","pages/bank/feeds/BankLCFeedPageByClient.js","components/lc/LCView.js","pages/LCViewPage/Pdf.js","pages/LCViewPage/Panel.js","pages/LCViewPage/DocumentaryRequirements.js","components/ui/Modal.js","pages/LCViewPage/ComplianceChecks.js","pages/LCViewPage/LCViewPage.js","pages/bank/BankEmployeeSignUpPage.js","components/ui/Dropdown.js","components/ui/ResizableScreenDiv.js","components/ui/RouteBlockingModal.js","pages/bank/BankLCAppPage.js","pages/business/BusinessSignUpPage.js","pages/business/BusinessInvitePage.js","pages/business/BusinessManageAccountPage.js","pages/business/BusinessEmployeeSignUpPage.js","pages/business/beneficiary/ClaimBeneficiaryStatusPage.js","pages/business/feeds/BusinessLCFeed.js","pages/business/feeds/ClientLCFeedPage.js","pages/business/feeds/BeneficiaryLCFeedPage.js","pages/business/feeds/BankDirectoryPage.js","App.js","index.js","images/logo.png"],"names":["CSSReset","createGlobalStyle","GlobalStyle","objectToSnakeCase","object","newObject","Array","isArray","map","Object","keys","forEach","key","snakeCase","console","error","objectToCamelCase","camelCase","makeAPIRequest","url","requestType","params","returnFullResponse","a","requestURL","fetchParams","method","body","JSON","stringify","fetch","response","status","Promise","reject","json","postFile","file","form","FormData","append","headers","Headers","logIn","email","password","Error","setSessionExpiry","Date","sessionExpiry","getTime","userEmployee","employer","business","usersEmployer","bank","logOut","setUser","UserContext","createContext","expiry","localStorage","setItem","useAuthentication","nextRoute","history","useHistory","useContext","user","useEffect","now","expirySeconds","getItem","getSessionExpiry","then","catch","err","push","HomePage","to","StatusMessage","styled","div","props","config","logo","accentColor","Margin","Title","h1","Subtitle","h2","RightAlignedLink","Content","Status","BasicLayout","title","subtitle","link","linktext","isLoading","children","marginStyle","statusComponent","style","href","size","color","loading","css","LoginForm","LoginErrorMessage","showError","HelpEmail","FormInputWrapper","FormInputTitle","h3","StyledFormInput","input","FormFooter","LogInButton","button","FormInput","value","type","onChange","LoginPage","location","useState","setEmail","setPassword","setError","get","onSubmit","e","preventDefault","target","onKey","icon","faArrowRight","marginLeft","StyledNav","nav","StyledNavLink","NavLink","LoginMenu","StyledLoginLink","StyledProfileLink","ProfileWrapper","ProfileLinkWrapper","show","DropDownWrapper","DropDownHeader","DropDownLink","DropDownNavLink","ProfileDropDown","name","onClick","log","LoginSection","showingDropdown","setShowingDropdown","wrapperEl","useRef","current","focus","ref","onBlur","faUserCircle","fontSize","NavLogo","img","attrs","src","alt","Nav","StyledButton","unselected","disabled","Button","showArrow","arrowStyle","SignUpForm","Form","Field","StyledErrorMessage","ErrorMessage","requiredMsg","signUpFormValidationSchema","shape","newBankName","string","required","matches","passwordConfirm","oneOf","component","BankSignUpPage","fontStyle","initialValues","values","setSubmitting","validationSchema","isSubmitting","StyledForm","FormWrapper","StyledField","ErrorMessageWrapper","ButtonHolder","BankInvitePage","message","setStatus","id","BankManageAccountPage","StyledLink","Link","ListEntryField","li","ListEntryWrapper","ul","header","Search","SearchWrapper","Filter","lcs","setShownLcs","filter","setFilter","callback","parameters","delay","currentTimeout","clearTimeout","setTimeout","useDebouncedEffect","lc","client","toLowerCase","includes","display","alignItems","faSearch","padding","fontWeight","LCListEntry","applicationDate","draftPresentationDate","creditAmt","LCFeed","hideSearch","setLcs","shownLcs","bankid","length","marginTop","BankLCAppFeedPage","match","clientid","setClient","paramsclientid","TitleWrapper","LCTitle","LCView","faArrowLeft","paddingRight","pdfjs","GlobalWorkerOptions","workerSrc","pdfjsWorker","PdfComponent","canvasRef","setIsLoading","loadingTask","getDocument","promise","pdf","getPage","page","viewport","getViewport","scale","canvas","context","getContext","height","width","renderContext","canvasContext","renderTask","render","fetchPdf","window","innerHeight","border","BasicView","PanelTitle","highlight","PanelBody","PanelTitleAlt","Panel","expand","setExpand","editing","setEditing","canEdit","expandEnabled","clickable","faPencilAlt","faChevronDown","faChevronRight","cursor","ModalBackground","ModalWrapper","ModalFlex","ModalLeftColumn","ModalRightColumn","ModalButtonsWrapper","MODAL_TYPES","Modal","docReq","hideModal","refreshLc","setType","justifyContent","linkToSubmittedDoc","ViewModal","lcid","digitalDocReq","setDigitalDocReq","data","undefined","sellerName","fields","sellerAddress","indicatedDateOfShipment","countryOfExport","reasonForExport","consigneeName","buyerName","consigneeAddress","buyerAddress","goodsDescription","unitOfMeasure","unitsPurchased","unitPrice","currency","hsCode","countryOfOrigin","DocReqTitle","docName","field","SmallHeader","marginBottom","margin","textDecoration","Pdf","InputWrapper","QuestionText","Asterisk","span","ButtonWrapper","selected","BasicInput","question","useField","meta","touched","questionText","NumberInput","AllRadiosWrapper","AllCheckboxesWrapper","TYPE_TO_COMPONENT","text","decimal","number","boolean","helpers","setValue","handleClick","val","radio","options","parse","opt","date","checkbox","i","indexOf","slice","concat","faCheckSquare","marginRight","TYPE_TO_DEFAULT","toISOString","TYPE_TO_VALIDATION_SCHEMA","nullable","array","of","CreateModal","setFields","suggestedFields","setSuggestedFields","d","s","schemaObj","q","initialValue","Set","has","enableReinitialize","app","entries","kv","Component","UploadModal","setIsSubmitting","flexDirection","maxWidth","FileUpload","uploadFile","files","DocumentaryEntryFlex","DocumentaryEntryWrapper","DocReqDate","DocReqStatus","ExpandedDocumentaryEntry","label","DocumentaryEntryEvaluation","DocumentaryRequirement","documentaryRequirement","userType","live","showModal","dueDate","requiredValues","rejected","expanded","setExpanded","comments","setComments","minWidth","approve","complaints","DocumentaryRequirements","isModalShowing","setIsModalShowing","modalDocReq","setModalDocReq","useModal","docReqs","documentaryrequirementSet","satisfied","Background","Container","ActionButton","CancelButton","onCancel","onSelect","containerStyle","onShow","selectDisabled","selectButton","cancelButton","scrollTop","document","documentElement","parseInt","top","position","overflowY","isNaN","resetScroll","event","stopPropagation","textarea","RequestClarificationModal","initialReason","modal","setModal","setLc","beneficiary","comment","setComment","textAreaRef","action","holdStatus","updatedLc","paddingTop","RejectionModal","rejectionReason","setRejectionReason","titleCase","exceptions","allCaps","split","substr","ind","wordIndex","word","toUpperCase","charAt","substring","join","SanctionInfo","sanction","paddingBottom","paddingLeft","onContextMenu","open","aliases","alias","addresses","address","addressGroup","country","addressToString","ComplianceCheck","initialRequestComment","initialRejectionReason","errorMessage","duration","CompanyOFACCheck","sanctions","CountrySanctionCheck","beneficiaryCountry","clientCountry","countrySanctionMessage","rel","ImportLicenseCheck","licenseSanctionMessage","BoycottLanguageCheck","boycotts","boycottSourceIndex","boycottSource","source","boycottSourceToReadable","indices","boycott","startIndex","otherInstructions","phrase","sort","b","cmps","indexes","index","cmp","boycottToReadable","BelievablePriceOfGoods","goodsInfo","parseFloat","range","Math","max","mean","standardDeviation","credit","htsCode","purchasedItem","ComplianceChecks","TwoColumnHolder","LeftColumn","RightColumn","OrderStatusWrapper","PartyDisplayMessage","APPROVALS_TO_STATE","issuerRejected","canApprove","clientIssuer","bene","issuer","issuerBene","OrderStatusMessage","stateName","OrderStatus","totalCredit","approvals","handleClickApprove","approvedCreditAmt","approvedCredit","model","cashSecure","allApproved","every","paidOut","drawn","requested","OrderNotes","latestVersionNotes","ClientInformationWrapper","HistoryOrder","ClientInformation","employee","clientOrders","setClientOrders","order","BigStatsWrapper","BigNumberTitle","BigNumber","AnalysisWrapper","AnalysisBody","AnalysisDetail","pop","Financials","creditOverflow","lcCredit","issuerApproved","annualCashflow","balanceAvailable","ODColumn","ODValue","StyledInput","StyledPopupInput","nested","YesNoInput","SubmitWrapper","SubmitSection","OrderDetail","units","errorClicked","Input","opacity","OrderDetails","showExtra","setShowExtra","details","lateChargeDate","currencyDenomination","expirationDate","creditAmtVerbal","extraDetails","creditDeliveryMeans","draftsInvoiceValue","creditAvailability","partialShipmentAllowed","transshipmentAllowed","merchChargeLocation","chargeTransportationLocation","namedPlaceOfDestination","arrangingOwnInsurance","merchDescription","transferableToClient","transferableToBeneficiary","lcValues","newLc","pair","k","v","scrollToAndHighlight","questionKey","scrollTimeout","selector","parentElement","querySelector","originalBackgroundColor","getComputedStyle","backgroundColor","addEventListener","scrollHandler","removeEventListener","animate","scrollIntoView","behavior","block","CreditOverflowPopup","0","1","selectedButtonIndices","setSelectedButtonIndex","prevSelectedButtonIndices","usePrevious","minimumIncrease","toString","increaseApprovedCreditValue","setIncreaseApprovedCreditValue","requestMoreCashValue","setRequestMoreCashValue","submissionAttempts","setSubmissionAttempts","increaseApprovedCreditRef","requestMoreCashRef","useFormikContext","setFieldValue","overflow","handleError","_","isEqual","visibility","Comments","setResponse","moment","format","authorType","commentIndex","respondable","textAlign","LCViewPage","setTotalCredit","BankEmployeeSignUpPage","Option","highlighted","Dropdown","items","selectedIndex","menu","setMenu","flex","onOutsideClick","borderRight","wordBreak","alignSelf","maxHeight","zIndex","item","faCheck","SearchableSelect","handleChange","highlightedItemIndex","setHighlightedItemIndex","autoComplete","onKeyDown","keyCode","itemIndex","onMouseDown","SearchableSelectHTS","hts","htsno","description","OutsideAlerter","wrapperRef","handleClickOutside","contains","ResizableScreenDiv","minTop","containerRef","setTop","getBoundingClientRect","RouteBlockingModal","when","modalVisible","setModalVisible","lastLocation","setLastLocation","confirmedNavigation","setConfirmedNavigation","pathname","nextLocation","ClickableText","SectionSubtitle","StyledDiv","NestedButtonWrapper","ButtonVerticalWrapper","fitWidth","StyledSection","disabledTooltip","changeQuestionBackgroundTemp","scrollY","offsetTop","clientHeight","offsetHeight","parentKey","DocReqFieldWrapper","StyledDocReqField","StyledDocReqDiv","CommonNestedTypeComponent","keyName","StyledIcon","FontAwesomeIcon","option","answer","some","piece","markDisabled","questions","setLCApp","validateForm","changed","questionsCopy","dependency","parentQuestion","find","potential","findAndSetSectionsError","errors","setSectionsError","erroredAndTouchedSections","section","scrollToFirstErrorOnSection","selectedSection","erroredQuestionsOnSelectedSection","scrollTo","ErrorFocus","setTouched","prevErrors","prevTouched","prevValues","prevSelectedSection","prevIsSubmitting","keyToEffect","scroll","sectionsErrors","effects","add","effect","lcApp","setAppliedTemplate","appliedTemplate","setValues","autofillTemplateTimeout","beneficiaryAutocompleteTimeout","suggested","setSuggested","timeoutId","beneficiary_name","purchased_item","paramString","result","faTimes","template","loadTemplateAnswers","selectedTemplate","templateName","inputComponent","search_HTS","results","child","ObjectNestedTypeComponent","array_of_objs","getOptions","childQuestion","includeLast","valueOptionsSet","valObj","curInd","settings","obj","faTrash","indexToRemove","valueIndex","curVal","ArrayNestedTypeComponent","addition","dropdown","createChildrenShape","questionType","LoadTemplate","setSelectedTemplate","lcTemplates","setLCTemplates","fetchTemplates","gridAutoRows","gridTemplateColumns","SaveTemplate","newTemplateValue","setNewTemplateValue","selectedSaveButton","setSelectedSaveButton","saveTemplateError","setSaveTemplateError","submitCount","setSubmitCount","templateNameSet","setTemplateNameSet","integrityError","setIntegrityError","trim","overwrite","template_name","res","createdTemplate","unsavedChanges","templateField","templateValue","emptyAndChanged","currentValue","Refresh","onbeforeunload","BankLCAppPage","persistedLcApp","selectedSectionIndex","setSelectedSectionIndex","sections","setSections","setInitialValues","sectionSet","initial","createDefault","schema","createValidationSchema","removeItem","handleSubmit","erroredSectionSet","whiteSpace","flexGrow","newBusinessName","newBusinessAddress","BusinessSignUpPage","BusinessInvitePage","BusinessManageAccountPage","BusinessEmployeeSignUpPage","businessid","ClaimMessage","ClaimBeneficiaryStatusPage","init","setSuccess","msg","clearStatus","useStatus","BusinessLCFeed","currentlyOnClient","ClientLCFeedPage","businessname","BeneficiaryLCFeedPage","banks","setShownBanks","BankListEntry","BankDirectory","setBanks","shownBanks","BankDirectoryPage","App","Provider","path","BankLCFeedPageByClient","BankLiveLCFeedPage","BankLCFeedPage","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/main.473d9b91.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\n\nexport const CSSReset = createGlobalStyle`\n/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n`;\n\nconst GlobalStyle = createGlobalStyle`\n  html {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  }\n  body {\n    background-color: #f6faff;\n  }\n`;\n\nexport default GlobalStyle;","import { setSessionExpiry } from \"./auth\";\nimport { snakeCase, camelCase } from \"lodash\";\n// import history from \"../history\";\n\nconst API_BASEURL = \"/api\";\n\nexport const objectToSnakeCase = object => {\n  let newObject = {};\n  if (typeof object !== \"object\" || object === null) {\n    return object;\n  } else if (Array.isArray(object)) {\n    return object.map(objectToSnakeCase);\n  } else if (typeof object === \"object\" && object !== null) {\n    Object.keys(object).forEach(key => {\n      newObject[snakeCase(key)] = objectToSnakeCase(object[key]);\n    });\n  } else {\n    console.error(\"objectToSnakeCase failed - unrecognized type.\");\n  }\n  return newObject;\n};\n\nexport const objectToCamelCase = object => {\n  let newObject = {};\n  if (typeof object !== \"object\" || object === null) {\n    return object;\n  } else if (Array.isArray(object)) {\n    return object.map(objectToCamelCase);\n  } else if (typeof object === \"object\" && object !== null) {\n    Object.keys(object).forEach(key => {\n      newObject[camelCase(key)] = objectToCamelCase(object[key]);\n    });\n  } else {\n    console.error(\"objectToCamelCase failed - unrecognized type.\");\n  }\n  return newObject;\n};\n\nexport const makeAPIRequest = async (\n  url,\n  requestType,\n  params,\n  returnFullResponse\n) => {\n  const requestURL = API_BASEURL + url;\n  const fetchParams = {\n    method: requestType,\n  };\n  if (requestType && requestType !== \"GET\") {\n    fetchParams.body = JSON.stringify(objectToSnakeCase(params));\n  }\n  const response = await fetch(requestURL, fetchParams);\n  if (response.status === 401 || response.status === 403) {\n    // history.push(\"/login\");\n    // // TODO show this error to the user\n    // return Promise.reject(\n    //   \"Error: Attempted to make unauthenticated API request. Redirecting to login.\"\n    // );\n  } else if (response.status < 200 || response.status >= 400) {\n    // TODO show this error to the user\n    if (returnFullResponse) {\n      return response;\n    } else {\n      return Promise.reject(response);\n    }\n  }\n\n  if (returnFullResponse) return response;\n  return objectToCamelCase(await response.json());\n};\n\nexport const postFile = async (url, file, returnFullResponse) => {\n  const requestURL = API_BASEURL + url;\n  const form = new FormData();\n  form.append(\"file\", file);\n  const headers = new Headers();\n  headers.append(\"Content-Type\", \"application/pdf\");\n  const response = await fetch(requestURL, {\n    method: \"PUT\",\n    body: form,\n    headers\n  });\n  if (response.status === 401 || response.status === 403) {\n    // history.push(\"/login\");\n    // // TODO show this error to the user\n    // return Promise.reject(\n    //   \"Error: Attempted to make unauthenticated API request. Redirecting to login.\"\n    // );\n  } else if (response.status < 200 || response.status >= 400) {\n    // TODO show this error to the user\n    if (returnFullResponse) {\n      return response;\n    } else {\n      return Promise.reject(response);\n    }\n  }\n\n  if (returnFullResponse) return response;\n  return objectToCamelCase(await response.json());\n};\n\nexport const logIn = async (email, password) => {\n  const requestURL = \"/api/user/login/\";\n  const response = await fetch(requestURL, {\n    method: \"POST\",\n    body: JSON.stringify({ email, password })\n  });\n  if (response.status !== 200) {\n    throw new Error(\n      \"Error logging in: recieved status code \" + response.status\n    );\n  }\n  const json = objectToCamelCase(await response.json());\n  setSessionExpiry(new Date(json.sessionExpiry).getTime());\n  if (json.userEmployee.employer)\n    return { ...json.userEmployee, business: json.usersEmployer };\n  else return { ...json.userEmployee, bank: json.usersEmployer };\n};\n\nexport const logOut = async setUser => {\n  const requestURL = \"/api/user/logout/\";\n  const response = await fetch(requestURL, {\n    method: \"POST\"\n  });\n  if (response.status !== 200) {\n    console.error(\"Error logging out: recieved status code \" + response.status);\n  }\n  setSessionExpiry(null);\n  setUser(null);\n  // TODO figure out why this doesn't work\n  // history.push(\"/login\");\n};\n","import { useEffect, createContext, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeAPIRequest } from \"./api\";\n\nexport const UserContext = createContext([null, () => null]);\nconst SESSION_EXPIRY = \"session_expiry\";\n\nexport const getSessionExpiry = () => {\n  const now = new Date();\n  const expirySeconds = localStorage.getItem(\"session_expiry\");\n  if (expirySeconds && now.getTime() > expirySeconds) {\n    return null;\n  }\n  return localStorage.getItem(SESSION_EXPIRY);\n};\n\nexport const setSessionExpiry = expiry => {\n  // TODO change this expiry date to be consistent with the backend\n  localStorage.setItem(SESSION_EXPIRY, expiry);\n};\n\nexport const useAuthentication = nextRoute => {\n  const history = useHistory();\n  let [user, setUser] = useContext(UserContext);\n\n  useEffect(() => {\n    if (user) return;\n    const sessionExists = getSessionExpiry();\n    if (!sessionExists) {\n      history.push(\"/login\", { nextRoute });\n    } else {\n      makeAPIRequest(\"/user/this_users_info/\")\n        .then(json => {\n          if (json.userEmployee.employer)\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n          else setUser({ ...json.userEmployee, bank: json.usersEmployer });\n        })\n        .catch(err => {\n          console.error(err);\n          history.push(\"/login\", { nextRoute });\n        });\n    }\n  }, [user, setUser, history, nextRoute]);\n};\n","import React, { useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useAuthentication, UserContext } from \"../../utils/auth\";\n\nconst HomePage = () => {\n  useAuthentication('/');\n  const [user] = useContext(UserContext);\n\n  return (\n    user ? <Redirect to={`/${user.business ? \"business\" : \"bank\"}/lcs`}/> : <div></div>\n  );\n};\n\nexport default HomePage;\n","import styled from \"styled-components\";\n\nconst StatusMessage = styled.div`\n  ${props => props.status && `\n    padding: 10px;\n  `}\n  ${props => !props.status && `\n    visibility: hidden;\n  `}\n  border-radius: 5px;\n  max-width: 400px;\n  overflow: scroll;\n  margin: 40px auto auto;\n  background-color: ${props => props.status === `error` ? `#dc3545` : props.status === `info` ? `#7dd8ff` : `#4bb759`};\n  color: #fff;\n  line-height: 1.25;\n`;\n\nexport default StatusMessage;\n","import logo from \"./images/logo.png\"\n\nconst config = {\n  logo,\n  accentColor: 'rgb(27, 108, 255)',\n};\n\nexport default config;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport StatusMessage from \"./ui/StatusMessage\";\nimport { css } from \"@emotion/core\";\n\nimport config from '../config';\n\nconst Margin = styled.div`\n  margin: 80px auto 40px;\n  max-width: 1000px;\n`;\n\nconst Title = styled.h1`\n  border-bottom: 1px solid #cdcdcd;\n  padding: 10px 0;\n  font-size: 24px;\n`;\n\nconst Subtitle = styled.h2`\n  margin-top: 40px;\n  text-align: center;\n  color: #555;\n`;\n\nconst RightAlignedLink = styled.a`\n  float : right;\n  padding: 10px 0;\n  color: #00d;\n  line-height: 1.25;\n`;\n\nconst Content = styled.div`\n  margin: 40px 0 0;\n`;\n\nconst Status = styled.div`\n  position: sticky;\n  bottom: 0;\n`;\n\nconst BasicLayout = ({ title, subtitle, link, linktext, isLoading, children,\n  marginStyle, statusComponent }) => {\n  return (\n    <Margin style={marginStyle}>\n      <Title>{title}</Title>\n      {subtitle && <Subtitle>{subtitle}</Subtitle>}\n      {link && <RightAlignedLink href={link}>{linktext}</RightAlignedLink>}\n      <Content>\n        {isLoading ? (\n          <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          />\n        ) : (\n          children\n        )}\n      </Content>\n      <Status>\n        {statusComponent}\n      </Status>\n    </Margin>\n  );\n};\n\nexport default BasicLayout;\n","import React, { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { get } from \"lodash\";\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { logIn } from \"../../utils/api\";\nimport { UserContext } from \"../../utils/auth\";\nimport config from '../../config';\n\nconst LoginForm = styled.form`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst LoginErrorMessage = styled.div`\n  ${props => props.showError && `\n    padding: 10px 10px;\n  `}\n  border-radius: 5px;\n  background-color: #dc3545;\n  color: #fff;\n`\n\nconst HelpEmail = styled.a`\n  font-size: 14px;\n  font-style: italic;\n  margin: 0 10px 10px;\n`\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled.input`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n`;\n\n// TODO revisit styles? not super happy with how this looks\n// also it says \"Log In\" 3 times on this page... we get it\nconst LogInButton = styled.button`\n  cursor: pointer;\n  transition: color 0.3s;\n  margin: 10px 5px;\n  border: none;\n  font-size: 16px;\n  background-color: #fff;\n\n  &:hover {\n    color: ${config.accentColor};\n  }\n`;\n\nconst FormInput = ({ title, value, type, onChange }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>\n        {title}\n        {type === \"password\" && (<HelpEmail href=\"mailto:support@bountium.com\"> Need help?</HelpEmail>)}\n      </FormInputTitle>\n      <StyledFormInput type={type} value={value} onChange={onChange} />\n    </FormInputWrapper>\n  );\n};\n\nconst LoginPage = ({ history, location }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const setUser = useContext(UserContext)[1];\n  const nextRoute = get(location, \"state.nextRoute\");\n  const clickLogIn = (e) => {\n    e.preventDefault();\n    logIn(email, password)\n      .then((json) => setUser(json))\n      .then(() => history.push(nextRoute || \"/\"))\n      .catch(() => {\n        setError(\"❕ We can't seem to log you in right now.\");\n      });\n  };\n  return (\n    <BasicLayout title=\"Log In\">\n      <LoginForm onSubmit={clickLogIn}>\n        <FormInput\n          title=\"Email\"\n          type=\"text\"\n          value={email}\n          onChange={e => setEmail(e.target.value)}\n        />\n        <FormInput\n          title=\"Password\"\n          type=\"password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          onKey\n        />\n        <HelpEmail>\n          New Here? <Link to=\"/bank/register\">Create Account</Link>\n        </HelpEmail>\n        <FormFooter>\n        <LoginErrorMessage showError={error}>\n          {error}\n        </LoginErrorMessage>\n          <LogInButton type=\"submit\">\n            Log In\n            <FontAwesomeIcon\n              icon={faArrowRight}\n              size=\"lg\"\n              color={config.accentColor}\n              style={{ marginLeft: \"10px\" }}\n            />\n          </LogInButton>\n        </FormFooter>\n      </LoginForm>\n    </BasicLayout>\n  );\n};\n\nexport default LoginPage;\n","import React, { useState, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUserCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { get } from \"lodash\";\n\n// TODO import different sized logos for performance\nimport config from \"../config\";\nimport { logOut } from \"../utils/api\";\n\nconst StyledNav = styled.nav`\n  display: flex;\n  align-items: center;\n  padding: 0 140px;\n  background-color: #fff;\n  min-height: 80px;\n  font-size: 14px;\n`;\n\nconst StyledNavLink = styled(NavLink)`\n  color: rgb(138, 138, 138);\n  margin-right: 40px;\n  text-decoration: none;\n  &.active {\n    color: #000;\n  }\n`;\n\nconst LoginMenu = styled.div`\n  margin-left: auto;\n  display: flex;\n`;\n\nconst StyledLoginLink = styled(NavLink)`\n  text-decoration: none;\n  color: #000;\n  transition: color 0.3s;\n\n  &:hover {\n    color: ${config.accentColor};\n  }\n`;\n\nconst StyledProfileLink = styled.a`\n  text-decoration: none;\n  color: #000;\n  transition: color 0.3s;\n  cursor: pointer;\n\n  &:hover {\n    color: ${config.accentColor};\n  }\n`;\n\nconst ProfileWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ProfileLinkWrapper = styled.button`\n  padding: 5px 10px;\n  border: 1px solid #fff;\n  border-radius: 5px;\n  background-color: #fff;\n  font-size: 14px;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }\n  transition: border 0.3s;\n  ${props => props.show && `border: 1px solid ${config.accentColor};`}\n`;\n\nconst DropDownWrapper = styled.div`\n  background-color: #fff;\n  min-width: 200px;\n  border-radius: 5px;\n  border: 1px solid #cdcdcd;\n  font-size: 14px;\n  padding: 10px;\n  opacity: 0;\n  transition: opacity 0.3s;\n  position: absolute;\n  top: 60px;\n  right: 50px;\n  ${props => props.show && `opacity: 1;`}\n`;\n\nconst DropDownHeader = styled.div`\n  color: ${config.accentColor};\n  font-size: 16px;\n  margin-bottom: 10px;\n  :not(:first-child) {\n    margin-top: 10px;\n  }\n`;\n\nconst DropDownLink = styled.div`\n  margin: 5px;\n  color: #000;\n  text-decoration: none;\n  border: none;\n\n  &:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nconst DropDownNavLink = styled(NavLink)`\n  margin: 5px;\n  color: #000;\n  text-decoration: none;\n  border: none;\n\n  &:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nconst ProfileDropDown = ({ user, setUser, show }) => {\n  const history = useHistory();\n  return (\n    <DropDownWrapper show={show}>\n      <DropDownHeader>\n        {user.bank\n          ? get(user, [\"bank\", \"name\"])\n          : get(user, [\"business\", \"name\"])}\n      </DropDownHeader>\n      {user.bank && <DropDownLink>View LC Application</DropDownLink>}\n      <DropDownLink>\n        View {user.bank ? \"Bank\" : \"Business\"} Profile (Coming soon)\n      </DropDownLink>\n      <DropDownHeader>{user.name}</DropDownHeader>\n      <DropDownNavLink to={`${user.bank ? \"/bank\" : \"/business\"}/account`}>\n        View Profile\n      </DropDownNavLink>\n      <DropDownLink\n        onClick={() => {\n          logOut(setUser)\n            .then(() => history.push(\"/login\"))\n            .catch(err => console.log(err));\n        }}\n      >\n        Log Out\n      </DropDownLink>\n    </DropDownWrapper>\n  );\n};\n\nconst LoginSection = ({ user, setUser }) => {\n  const [showingDropdown, setShowingDropdown] = useState(false);\n  const wrapperEl = useRef(null);\n  return (\n    <LoginMenu>\n      {user ? (\n        <ProfileWrapper>\n          <ProfileLinkWrapper\n            onClick={e => {\n              e.preventDefault();\n              setShowingDropdown(true);\n              wrapperEl.current.focus();\n            }}\n            ref={wrapperEl}\n            show={showingDropdown}\n            onBlur={() => setShowingDropdown(false)}\n          >\n            <StyledProfileLink>\n              {user.name}\n              <FontAwesomeIcon\n                icon={faUserCircle}\n                style={{ marginLeft: \"10px\", fontSize: \"16px\" }}\n              />\n            </StyledProfileLink>\n          </ProfileLinkWrapper>\n          <ProfileDropDown\n            user={user}\n            setUser={setUser}\n            show={showingDropdown}\n          />\n        </ProfileWrapper>\n      ) : (\n        <StyledLoginLink to=\"/login\">Log In</StyledLoginLink>\n      )}\n    </LoginMenu>\n  );\n};\n\nconst NavLogo = styled.img.attrs({ src: config.logo, alt: \"Bountium Logo\" })`\n  max-height: 50px;\n`;\n\nconst Nav = ({ user, setUser }) => {\n  return (\n    <StyledNav>\n      <StyledNavLink to=\"/\">\n        <NavLogo />\n      </StyledNavLink>\n      {user && (\n        <>\n          {user.business &&\n            <StyledNavLink to={`/banks/`}>\n              Apply for an LC\n            </StyledNavLink>\n          }\n          {user.business &&<StyledNavLink to={`/business/lcs/`}>\n            Manage your LCs and Applications\n          </StyledNavLink>}\n          {user.bank && <StyledNavLink to=\"/bank/lcs/apps\">\n            Review LC Applications\n          </StyledNavLink>}\n          {user.bank && <StyledNavLink to=\"/bank/lcs/live\">Manage Live LCs</StyledNavLink>}\n        </>\n      )}\n      <LoginSection user={user} setUser={setUser} />\n    </StyledNav>\n  );\n};\n\nexport default Nav;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowRight } from \"@fortawesome/free-solid-svg-icons\";\n\nimport config from '../../config';\n\nconst disabledBackgroundColor = `#888588`;\nconst disabledColor = `#f1ecec`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.unselected ? `#fff` : props.disabled ? disabledBackgroundColor : config.accentColor};\n  color: ${(props) => props.unselected ? config.accentColor : props.disabled ? disabledColor : `#fff`};\n  border-radius: 5px;\n  padding: 10px;\n  ${props => !props.disabled && `border: 1px solid ${config.accentColor};`}\n  font-size: 16px;\n  ${props => !props.disabled && `cursor: pointer;`}\n`;\n\nconst Button = ({ children, showArrow, arrowStyle, ...props }) => {\n  return (\n    <StyledButton {...props}>\n      {children}\n      {showArrow && (\n        <FontAwesomeIcon\n          icon={faArrowRight}\n          size=\"lg\"\n          color=\"#fff\"\n          style={{ marginLeft: \"10px\", ...arrowStyle }}\n        />\n      )}\n    </StyledButton>\n  );\n}\n\nexport default Button;\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\nimport { Link } from \"react-router-dom\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  newBankName: string().required(requiredMsg),\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg).matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BankSignUpPage = ({ history }) => {\n  const setUser = useContext(UserContext)[1];\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle={\n      <>\n      Get your team up & running with lightning-fast LC processing.\n      <br/><br/>\n      <span style={{fontStyle: 'italic'}}>Not a bank? </span>\n      <Link to=\"/business/register\">Register as a business</Link>\n      </>\n      }\n    >\n    <Formik\n      initialValues={{\n        newBankName: '', name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(\"/bank/\", \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, bank: json.usersEmployer });\n            history.push(\"/bank/invite\");\n          })\n          .then(() => setSubmitting(false));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n      <FormInput\n          title=\"Bank Name\"\n          name=\"newBankName\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n<Button showArrow disabled={isSubmitting}>\n  Sign Up\n</Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BankSignUpPage;\n","import React, { useContext } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { object, string } from 'yup';\n\nimport Button from '../../components/ui/Button';\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { useAuthentication, UserContext } from '../../utils/auth';\nimport { makeAPIRequest } from '../../utils/api';\nimport styled from 'styled-components';\nimport { useState } from 'react';\n\nconst StyledForm = styled(Form)`\n  display: flex;\n  max-width: 800px;\n  min-width: 400px;\n  margin: auto;\n  justify-content: center;\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nconst FormWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst validationSchema = object().shape({\n  email: string().email('Please enter a valid email address.').required('Please enter an email address.'),\n});\n\nconst StatusMessage = styled.div`\n  ${props => props.status && `\n    padding: 10px;\n  `}\n  border-radius: 5px;\n  max-width: 400px;\n  overflow: scroll;\n  margin: 40px auto auto;\n  background-color: ${props => props.status === `error` ? `#dc3545` : `#4bb759`};\n  color: #fff;\n`\n\nconst StyledField = styled(Field)`\n  border-radius: 5px;\n  border: 1px solid #cdcdcd;\n  font-size: 18px;\n  padding-left: 10px;\n`\n\nconst ErrorMessageWrapper = styled.div`\n  margin: auto;\n  max-width: 400px;\n  color: #dc3545;\n  margin-top: 10px;\n`\n\nconst ButtonHolder = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`\n\nconst BankInvitePage = ({ history }) => {\n  useAuthentication('/bank/invite');\n  const [user] = useContext(UserContext);\n  const [status, setStatus] = useState({ status: null, message: \"\"});\n  return (\n    <BasicLayout \n      title={`Welcome${(user ? ', ' + user.name : '')} 🚀`}\n      subtitle=\"Enter your teammates' emails to invite them to the platform.\"\n    >\n      <Formik\n        initialValues={{ email: '' }}\n        onSubmit={(values, { setSubmitting }) => {\n          setSubmitting(true);\n          makeAPIRequest(`/bank/${user.bank.id}/invite_teammate/`, \"POST\", { \"inviteeEmail\": values.email }, true)\n            .then((response) => {\n              if (response.status === 200) setStatus({ \n                status: \"success\",\n                message: `Invite sent to ${values.email}!`\n              });\n              else setStatus({\n                status: \"error\",\n                message: `Error inviting ${values.email}.`\n              })\n            });\n          setSubmitting(false);\n        }}\n        validationSchema={validationSchema}\n      >\n      {({ isSubmitting }) => (\n        <FormWrapper>\n        <StyledForm>\n          <StyledField type=\"email\" name=\"email\"/>\n          <Button type=\"submit\">{isSubmitting ? 'Sending...' : 'Send'}</Button>\n        </StyledForm>\n        <ErrorMessageWrapper>\n          <ErrorMessage name=\"email\"/>\n        </ErrorMessageWrapper>\n        </FormWrapper>\n      )}\n      </Formik>\n        {status.status && (<StatusMessage status={status.status}>{status.message}</StatusMessage>)}\n\n    <ButtonHolder>\n      <Button showArrow onClick={() => history.push(\"/bank/createApp\")}>\n        Next\n      </Button>\n    </ButtonHolder>\n    </BasicLayout>\n  );\n}\n\nexport default BankInvitePage;","import React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\nimport { get } from \"lodash\";\n\nimport Button from \"../../components/ui/Button\";\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { useAuthentication, UserContext } from \"../../utils/auth\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst signUpFormValidationSchema = object().shape({\n  newBankName: string(),\n  name: string(),\n  title: string(),\n  password: string().matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string()\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BankManageAccountPage = () => {\n  useAuthentication(\"/bank/account\");\n  const [user, setUser] = useContext(UserContext);\n\n  return (\n    <BasicLayout title=\"My Account 🛠\" subtitle=\"View and edit your user settings.\" isLoading={!user}>\n    <Formik\n      initialValues={{\n        name: get(user, ['name']), title: get(user, ['title']), password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/bank/${get(user, ['bank', 'id'])}/${get(user, ['id'])}/`, \"PUT\", { name: values.name, title: values.title })\n          .then((json) => {\n            setUser({ ...json.userEmployee, bank: json.usersEmployer });\n          })\n          .then(() => setSubmitting(false))\n          .catch((err) => console.error(err));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"New Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm New Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n          <Button disabled={isSubmitting}>\n            Save Update\n          </Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n}\n\nexport default BankManageAccountPage;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { get } from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\n\nimport BasicLayout from \"../../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../../utils/api';\nimport config from '../../../config';\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #000;\n  line-height: 1.25;\n`\n\nconst ListEntryField = styled.li`\n  flex-grow: 1;\n  flex-basis: 20%;\n  padding-left: 10px;\n  padding-right: 10px;\n`\n\nconst ListEntryWrapper = styled.ul`\n  display: flex;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border: 1px solid #cdcdcd;\n  font-weight: 500;\n  align-items: center;\n\n  ${(props) => !props.header && `\n  font-weight: 400;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n  transition: border 0.3s;\n  background-color: #fff;\n`\n\nconst useDebouncedEffect = (callback, parameters, delay) => {\n  const currentTimeout = useRef(null);\n\n  useEffect(() => {\n    if (currentTimeout.current !== null) {\n      clearTimeout(currentTimeout.current);\n    }\n    currentTimeout.current = setTimeout(callback, delay);\n    /* eslint-disable-next-line */\n  }, parameters);\n};\n\nconst Search = styled.input`\n  font-size: 16px;\n  padding: 5px 10px 5px 0;\n  border: none;\n`\n\nconst SearchWrapper = styled.div`\n  background-color: #fff;\n  border: 1px solid #cdcdcd;\n`\n\nconst Filter = ({ lcs, setShownLcs }) => {\n  const [filter, setFilter] = useState(null);\n  useDebouncedEffect(() => {\n    if (filter === null) return;\n    setShownLcs(lcs.filter(lc => lc.client.name.toLowerCase().includes(filter.toLowerCase())));\n  }, [filter, lcs], 200)\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n    <SearchWrapper>\n    <FontAwesomeIcon icon={faSearch}  style={{ padding: \"0 10px\"}} />\n      <Search type=\"text\" onChange={(e) => setFilter(e.target.value)} />\n    </SearchWrapper>\n      <span style={{ fontStyle: 'italic', marginLeft: '10px', fontWeight: 300, color: '#454545' }}>Start typing to filter by client</span>\n    </div>\n  )\n}\n\nconst LCListEntry = ({ lc }) => {\n  // NOTE: due_date and credit_amt will only be available for DigitalLCs\n  return (\n      <StyledLink to={`/lc/${lc.id}`}>\n      <ListEntryWrapper>\n        <ListEntryField>{lc.client.name}</ListEntryField>\n        <ListEntryField>{get(lc, 'beneficiary.name') || \"Unknown\"}</ListEntryField>\n        <ListEntryField>{lc.applicationDate}</ListEntryField>\n        <ListEntryField>{lc.draftPresentationDate || \"N/A\"}</ListEntryField>\n        <ListEntryField>{lc.creditAmt || \"N/A\"}</ListEntryField>\n      </ListEntryWrapper>\n      </StyledLink>\n  )\n}\n\nconst LCFeed = ({ title, user, url, hideSearch }) => {\n  const [lcs, setLcs] = useState(null);\n  const [shownLcs, setShownLcs] = useState(null);\n  const bankid = get(user, ['bank', 'id']);\n\n  useEffect(() => {\n    if (!bankid) return;\n    makeAPIRequest(url)\n      .then(json => {\n        setLcs(json);\n        setShownLcs(json);\n      });\n  }, [bankid, url]);\n\n  return (\n    <BasicLayout\n      title={title}\n      isLoading={!shownLcs}\n    >\n    {/* \"Heading\" of the feed - delete if you think it unnecessary*/}\n    <div>\n      {!hideSearch && <Filter lcs={lcs} setShownLcs={setShownLcs} />}\n      <ListEntryWrapper header>\n        <ListEntryField>Client</ListEntryField>\n        <ListEntryField>Beneficiary</ListEntryField>\n        <ListEntryField>Applied</ListEntryField>\n        <ListEntryField>Drafts Due</ListEntryField>\n        <ListEntryField>Transaction Size</ListEntryField>\n      </ListEntryWrapper>\n    </div>\n    {(shownLcs && (shownLcs.length > 0 ? (\n      <div>\n    {shownLcs.map(lc => <LCListEntry lc={lc} key={lc.id}/>)}\n    </div>\n    ) : (<center style={{ marginTop: '30px', fontStyle: 'italic', color: '#888' }}>You don't have any LCs yet.</center>)))}\n    </BasicLayout>\n  )\n\n}\n\nexport default LCFeed;\n","import React, { useContext } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { get } from \"lodash\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nconst BankLCAppFeedPage = () => {\n  useAuthentication('/bank/lcs/apps');\n  const [user] = useContext(UserContext);\n  const bankid = get(user, ['bank', 'id']);\n  return <LCFeed \n    title=\"All LC Applications 📝\" \n    url={`/lc/by_bank/${bankid}/awaiting_issuer_approval/`}\n    user={user}\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React, { useContext } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { get } from \"lodash\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nconst BankLCAppFeedPage = () => {\n  useAuthentication('/bank/lcs/live');\n  const [user] = useContext(UserContext);\n  const bankid = get(user, ['bank', 'id']);\n  return <LCFeed \n    title=\"All Live LCs 📄\" \n    url={`/lc/by_bank/${bankid}/live/`}\n    user={user}\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React, { useContext } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { get } from \"lodash\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nconst BankLCAppFeedPage = ({ match }) => {\n  useAuthentication('/bank/lcs');\n  const [user] = useContext(UserContext);\n  const bankid = get(user, ['bank', 'id']);\n  return <LCFeed \n    title=\"All LC Applications and Live LCs 📝📄\" \n    url={`/lc/by_bank/${bankid}/`}\n    user={user}\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React, { useState, useContext, useEffect } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\nimport { makeAPIRequest } from \"../../../utils/api\";\n\nconst BankLCAppFeedPage = ({ match }) => {\n  useAuthentication(`/bank/lcs/client/${match.params.clientid}`);\n  const [user] = useContext(UserContext);\n  const [client, setClient] = useState(null);\n  console.log(client)\n  useEffect(() => {\n    makeAPIRequest(`/business/${match.params.clientid}/`)\n      .then(json => setClient(json))\n  }, [match.params.clientid])\n  const title = client ? `All LCs for ${client.name}` : `All LCs for Client #${match.params.clientid}`;\n  return <LCFeed \n    title={title} \n    url={`/lc/by_client/${match.paramsclientid}/`}\n    user={user}\n    hideSearch\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport { css } from \"@emotion/core\";\nimport { Link } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\n\nimport config from '../../config'\n\nconst Margin = styled.div`\n  margin: 40px auto;\n  max-width: 1000px;\n`;\n\nconst TitleWrapper = styled.div`\n  display: flex;\n  border-bottom: 1px solid #cdcdcd;\n  padding: 10px 0;\n  font-size: 24px;\n`\n\nconst LCTitle = styled(Link)`\n  margin-right: 15px;\n  font-weight: 500;\n  text-decoration: none;\n  color: #000;\n`\n\nconst Subtitle = styled.h2`\n  font-weight: 200;\n`;\n\nconst Content = styled.div`\n  margin: 40px 0 0;\n`;\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #454545;\n  margin: 20px 0;\n  display: block;\n`\n\nconst LCView = ({ lc, children }) => {\n  return (\n    <Margin>\n      <StyledLink to=\"/\">\n        <FontAwesomeIcon icon={faArrowLeft} color={config.accentColor} style={{ paddingRight: \"10px\"}} /> \n        Back to LCs\n      </StyledLink>\n        {!lc ? (\n          <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          />\n        ) : (\n          <>\n      <TitleWrapper>\n      {lc.client &&\n          <LCTitle to={`/bank/lcs/client/${lc.client.id}`}>{lc.client.name}</LCTitle>\n      }\n        <Subtitle>{`LC #${lc.id}`}</Subtitle>\n      </TitleWrapper>\n      <Content>\n          {children}\n      </Content>\n      </>\n        )}\n    </Margin>\n  );\n};\n\nexport default LCView;\n","import React, { useRef, useEffect, useState } from 'react';\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport { css } from '@emotion/core';\nimport pdfjs from 'pdfjs-dist';\n\nimport pdfjsWorker from 'pdfjs-dist/build/pdf.worker.entry';\nimport config from '../../config';\n\npdfjs.GlobalWorkerOptions.workerSrc = pdfjsWorker;\n\nconst PdfComponent = ({ src }) => {\n  const canvasRef = useRef(null)\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchPdf = async () => {\n      setIsLoading(true);\n      const loadingTask = pdfjs.getDocument(src);\n\n      const pdf = await loadingTask.promise;\n\n      const firstPageNumber = 1;\n\n      const page = await pdf.getPage(firstPageNumber);\n\n      const scale = 1;\n      const viewport = page.getViewport({scale: scale});\n\n      // Prepare canvas using PDF page dimensions\n      const canvas = canvasRef.current;\n\n      const context = canvas.getContext('2d');\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n\n      // Render PDF page into canvas context\n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport\n      };\n\n      const renderTask = page.render(renderContext);\n\n      await renderTask.promise;\n    };\n\n    fetchPdf()\n      .then(() => setIsLoading(false));\n  }, [src]);\n\n  return (\n    <>\n    {isLoading && \n          <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          />\n    }\n    <canvas\n      ref={canvasRef}\n      width={700}\n      height={window.innerHeight}\n      style={{border: '1px solid #cdcdcd', display: isLoading ? 'none' : 'block'}}\n    />\n    </>\n  );\n}\n\nexport default PdfComponent;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronDown, faChevronRight, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nimport config from '../../config';\nimport AnimateHeight from \"react-animate-height\";\n\nconst BasicView = styled.div`\n  border: 1px solid #dfdfdf;\n  background-color: #fff;\n  border-radius: 0 0 20px 20px;\n  margin-bottom: 30px;\n`\n\nconst PanelTitle = styled.h2`\n  background-color: ${(props) => props.highlight ? config.accentColor : `rgb(199, 222, 255)`};\n  border-bottom: 1px solid #dfdfdf;\n  padding: 15px 20px;\n  display: flex;\n  justify-content: space-between;\n  ${(props) => props.highlight && `\n    font-weight: 500;\n    color: #fff;\n  `}\n`\n\nconst PanelBody = styled.div`\n  padding: 15px 20px;\n  line-height: 1.25;\n`\n\nconst PanelTitleAlt = styled.div`\n  color: ${config.accentColor};\n  margin-right: 5px;\n`\n\nconst Panel = ({ title, children, highlight, expand, setExpand, editing, setEditing, canEdit, ...props }) => {\n  const expandEnabled = [true, false].includes(expand);\n  return (\n    <BasicView {...props}>\n      <PanelTitle highlight={highlight} clickable={expandEnabled}>\n        {title}\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n        {canEdit && (editing\n          ? (\n            <>\n            <PanelTitleAlt>Editing</PanelTitleAlt>\n            <span\n              style={{fontStyle: 'italic', fontSize: '14px', color: '#555'}}\n              onClick={() => setEditing(false)}\n              >Cancel</span>\n            </>\n          )\n          : <FontAwesomeIcon\n            icon={faPencilAlt}\n            onClick={() => setEditing(true)}\n            style={{\n              color: config.accentColor,\n            }}\n            />\n        )}\n        {expandEnabled &&\n          <FontAwesomeIcon\n            icon={expand ? faChevronDown : faChevronRight}\n            onClick={() => setExpand(e => !e)}\n            style={{\n              color: config.accentColor,\n              padding: '0 10px',\n              cursor: 'pointer',\n            }}\n            />\n        }\n        </div>\n      </PanelTitle>\n      <PanelBody>{children}</PanelBody>\n    </BasicView>\n  )\n}\n\nexport default Panel;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Field, Form, useField } from 'formik';\nimport { object, string, number, boolean, array, date } from 'yup';\nimport Pdf from './Pdf';\nimport MoonLoader from 'react-spinners/MoonLoader'\nimport { css } from \"@emotion/core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronDown, faChevronRight, faCheckSquare } from \"@fortawesome/free-solid-svg-icons\";\nimport { get, camelCase } from \"lodash\";\n\nimport { makeAPIRequest, postFile, objectToCamelCase } from '../../utils/api';\nimport Panel from './Panel';\nimport Button from '../../components/ui/Button';\nimport config from \"../../config\";\n\nconst ModalBackground = styled.div`\n  ${props => !props.show && `display: none;`}\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.4);\n  overflow: scroll;\n`;\n\nconst ModalWrapper = styled.div`\n  max-width: 70%;\n  background-color: #fff;\n  border-radius: 10px;\n  margin: 10% auto;\n  padding: 20px 30px;\n`;\n\nconst ModalFlex = styled.div`\n  display: flex;\n  justify-content: space-around;\n`;\n\nconst ModalLeftColumn = styled.div`\n  flex-grow: 1;\n  min-width: 30%;\n  flex-basis: 40%;\n`;\n\nconst ModalRightColumn = styled.div`\n  flex-grow: 1;\n  flex-basis: 50%;\n`;\n\nconst ModalButtonsWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n  margin: 20px auto 30px;\n`;\n\nconst MODAL_TYPES = { CREATE: 'create', UPLOAD: 'upload'};\n\nconst Modal = ({ show, docReq, hideModal, refreshLc, lc }) => {\n  const [type, setType] = useState(MODAL_TYPES.CREATE);\n  if (docReq && docReq.type === 'generic') return (\n    <ModalBackground show={show}>\n    <ModalWrapper>\n      <UploadModal docReq={docReq} refreshLc={refreshLc} hideModal={hideModal}/>\n      <div style={{marginTop: '20px', display: 'flex', justifyContent: 'flex-end'}}>\n        <Button onClick={hideModal}>Close</Button>\n      </div>\n    </ModalWrapper>\n    </ModalBackground>\n  );\n  return (\n    <ModalBackground show={show}>\n      {docReq && docReq.linkToSubmittedDoc ? (\n      <ModalWrapper>\n        <ViewModal docReq={docReq}/>\n        <div style={{marginTop: '20px', display: 'flex', justifyContent: 'flex-end'}}>\n          <Button onClick={hideModal}>Close</Button>\n        </div>\n      </ModalWrapper>\n      ) : docReq && (\n      <ModalWrapper>\n        <ModalButtonsWrapper>\n          <Button onClick={() => setType(MODAL_TYPES.CREATE)} unselected={type !== MODAL_TYPES.CREATE}>Create Digital DocReq</Button>\n          <Button onClick={() => setType(MODAL_TYPES.UPLOAD)} unselected={type !== MODAL_TYPES.UPLOAD}>Upload PDF DocReq</Button>\n        </ModalButtonsWrapper>\n        {type === MODAL_TYPES.CREATE\n          ? <CreateModal docReq={docReq} refreshLc={refreshLc} hideModal={hideModal} lc={lc}/>\n          : <UploadModal docReq={docReq} refreshLc={refreshLc} hideModal={hideModal}/>\n        }\n        <div style={{marginTop: '20px', display: 'flex', justifyContent: 'flex-end'}}>\n          <Button onClick={hideModal}>Cancel</Button>\n        </div>\n      </ModalWrapper>\n      )}\n    </ModalBackground>\n  )\n};\n\nconst ViewModal = ({ docReq }) => {\n  const lcid = docReq && docReq.lcid;\n  // NULL if the docreq is not digital\n  const [digitalDocReq, setDigitalDocReq] = useState(null);\n  useEffect(() => {\n    if (!docReq) return;\n    makeAPIRequest(`/lc/${lcid}/doc_req/${docReq.id}/`)\n      .then(data => {\n        // HACK we can \"guess\" if there is a digital doc req if the seller name is defined\n        if (data.sellerName === undefined) {\n          setDigitalDocReq(null);\n        } else {\n          setDigitalDocReq(data);\n        }\n      });\n  }, [docReq, lcid]);\n  if (!docReq) return null;\n  const fields = !digitalDocReq ? [] : [\n    {title: \"Seller Name\", value: digitalDocReq.sellerName},\n    {title: \"Seller Address\", value: digitalDocReq.sellerAddress},\n    {title: \"Shipping Date\", value: digitalDocReq.indicatedDateOfShipment},\n    {title: \"Country of Export\", value: digitalDocReq.countryOfExport},\n    // {title: \"Incoterms Of Sale\", value: digitalDocReq.incotermsOfSale},\n    {title: \"Reason for Export\", value: digitalDocReq.reasonForExport},\n    {title: \"Consignee Name\", value: digitalDocReq.consigneeName || digitalDocReq.buyerName},\n    {title: \"Consignee Address\", value: digitalDocReq.consigneeAddress || digitalDocReq.buyerAddress},\n    {title: \"Buyer Name\", value: digitalDocReq.buyerName},\n    {title: \"Buyer Address\", value: digitalDocReq.buyerAddress},\n    {title: \"Description of Goods\", value: digitalDocReq.goodsDescription},\n    {title: \"Units of Measure\", value: digitalDocReq.unitOfMeasure},\n    {title: \"Units Purchased\", value: digitalDocReq.unitsPurchased},\n    {title: \"Price per Unit\", value: digitalDocReq.unitPrice},\n    {title: \"Currency of Settlement\", value: digitalDocReq.currency},\n    {title: \"Harmonized Schedule Code\", value: digitalDocReq.hsCode},\n    {title: \"Country of Origin\", value: digitalDocReq.countryOfOrigin},\n  ];\n  const link = docReq.linkToSubmittedDoc;\n  return (\n    <ModalFlex>\n    {digitalDocReq && (\n        <ModalLeftColumn>\n          <DocReqTitle style={{marginTop: '0'}}>{docReq.docName}</DocReqTitle>\n          {fields.map(field => field && (\n            <div key={field.title}>\n              <SmallHeader>{field.title}</SmallHeader>\n              <DocReqTitle>{field.value}</DocReqTitle>\n            </div>\n          ))}\n        </ModalLeftColumn>\n    )}\n        <ModalRightColumn >\n          <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}}>\n          <DocReqTitle style={{margin: '0'}}>PDF Preview</DocReqTitle>\n          <Button style={{padding: '5px 10px'}}>\n            <a href={link} style={{color: \"#fff\", fontSize: '14px', textDecoration: 'none'}}>Download PDF</a>\n          </Button>\n          </div>\n          {link && <Pdf src={`/api/lc/${lcid}/doc_req/${docReq.id}/file/`} />}\n        </ModalRightColumn>\n        </ModalFlex>\n  )\n};\n\nconst InputWrapper = styled.div`\n  max-width: 700px;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border-radius: 10px;\n  border: 1px solid #cdcdcd;\n\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }\n  transition: border 0.3s;\n  background-color: #fff;\n`;\n\nconst QuestionText = styled.h3`\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.25;\n`;\n\nconst Subtitle = styled.div`\n  margin-top: 15px;\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst Asterisk = styled.span`\n  color: #dc3545;\n  font-size: 16px;\n`;\nconst StyledFormInput = styled(Field)`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  font-size: 16px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  margin-top: 15px;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  border: 1px solid ${config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  margin: 10px 0;\n  max-width: 45%;\n  display: flex;\n  align-items: center;\n`;\n\n\nconst BasicInput = ({ question, children, subtitle }) => {\n  const [, meta] = useField(question.key);\n  const { error, touched } = meta;\n  return (\n    <InputWrapper>\n      <QuestionText>{question.questionText}{question.required ? (<Asterisk> *</Asterisk>) : null}</QuestionText>\n      {subtitle && <Subtitle>{subtitle}</Subtitle>}\n      {error && touched && <Subtitle style={{color: '#dc3545'}}>{typeof error !== 'object' ? error : null}</Subtitle>}\n      {children}\n    </InputWrapper>\n  )\n};\n\nconst TextInput = ({ question }) => {\n  return (\n    <BasicInput question={question}>\n      <StyledFormInput type=\"text\" name={question.key}/>\n    </BasicInput>\n  );\n};\n\nconst NumberInput = ({ question }) => {\n  return (\n    <BasicInput question={question}>\n      <StyledFormInput type=\"number\" name={question.key}/>\n    </BasicInput>\n  )\n};\n\nconst YesNoInput = ({ question }) => {\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n\n  return (\n    <BasicInput question={question}>\n      <ButtonWrapper style={{ justifyContent: 'center' }}>\n        <StyledButton onClick={handleClick(true)} selected={value === true}>Yes</StyledButton>\n        <StyledButton onClick={handleClick(false)} selected={value === false}>No</StyledButton>\n      </ButtonWrapper>\n    </BasicInput>\n  )\n};\n\nconst AllRadiosWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst RadioInput = ({ question }) => {\n  const options = JSON.parse(question.options);\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n  return (\n    <BasicInput question={question}>\n    <AllRadiosWrapper>\n      <ButtonWrapper>\n    {options && options.map((opt) => (\n        <StyledButton onClick={handleClick(opt)} selected={value === opt} key={opt}>{opt}</StyledButton>\n    ))}\n      </ButtonWrapper>\n    </AllRadiosWrapper>\n    </BasicInput>\n  )\n};\n\nconst DateInput = ({ question }) => {\n  return (\n    <BasicInput question={question}>\n      <StyledFormInput type=\"date\" name={question.key}/>\n    </BasicInput>\n  )\n};\n\nconst AllCheckboxesWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst CheckboxInput = ({ question }) => {\n  const options = JSON.parse(question.options);\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    const i = value.indexOf(val);\n    if (i !== -1) {\n      setValue(value.slice(0, i).concat(value.slice(i + 1)));\n    } else {\n      setValue(value.concat([val]));\n    }\n  };\n\n  return (\n    <BasicInput question={question} subtitle=\"Check all that apply.\">\n    <AllCheckboxesWrapper>\n      <ButtonWrapper>\n    {options && options.map((opt) => (\n        <StyledButton onClick={handleClick(opt)} selected={value.indexOf(opt) !== -1} key={opt}>\n        {value.indexOf(opt) !== -1 && <FontAwesomeIcon icon={faCheckSquare} style={{ marginRight: '10px' }}/>}\n        {opt}\n        </StyledButton>\n    ))}\n      </ButtonWrapper>\n    </AllCheckboxesWrapper>\n    </BasicInput>\n  )\n};\n\nconst TYPE_TO_COMPONENT = {\n  text: TextInput,\n  decimal: NumberInput,\n  number: NumberInput,\n  boolean: YesNoInput,\n  radio: RadioInput,\n  date: DateInput,\n  checkbox: CheckboxInput,\n};\n\nconst TYPE_TO_DEFAULT = {\n  text: \"\",\n  decimal: 0,\n  number: 0,\n  boolean: null,\n  radio: null,\n  date: (new Date()).toISOString().slice(0, 10),\n  checkbox: [],\n};\n\nconst REQUIRED_MSG = \"This field is required.\";\n\nconst TYPE_TO_VALIDATION_SCHEMA = {\n  text: string(),\n  decimal: number(),\n  number: number(),\n  boolean: boolean().nullable(),\n  radio: string().nullable(),\n  date: date(),\n  checkbox: array().of(string()),\n};\n\nconst CreateModal = ({ docReq, hideModal, refreshLc, lc}) => {\n  const [fields, setFields] = useState([]);\n  const [suggestedFields, setSuggestedFields] = useState([]);\n  useEffect(() => {\n    if (!docReq) return undefined;\n    makeAPIRequest(`/lc/supported_creatable_docs/${docReq.type}/`)\n      .then(d => setFields(d));\n    makeAPIRequest(`/lc/${lc.id}/doc_req/${docReq.id}/autopopulate/`)\n      .then(s => setSuggestedFields(s));\n  }, [docReq]);\n  if (!docReq) return null;\n  const schemaObj = {};\n  let initialValues = {};\n  let validationSchema = null;\n  fields.forEach(q => {\n    Object.keys(suggestedFields).forEach(key => {\n      if (camelCase(q.key) == key) {\n        let initialValue = get(lc, suggestedFields[key]);\n        if (initialValue && new Set([\"object\", \"array_of_objs\", \"checkbox\"]).has(q.type)) {\n          initialValue = JSON.parse(initialValue);\n        }\n        initialValues[q.key] = initialValue;\n      }\n    });\n    if (!initialValues[q.key]) initialValues[q.key] = TYPE_TO_DEFAULT[q.type];\n  });\n  fields.forEach(q => {\n    schemaObj[q.key] = TYPE_TO_VALIDATION_SCHEMA[q.type];\n    if (q.required) {\n      schemaObj[q.key] = schemaObj[q.key].required(REQUIRED_MSG);\n    }\n  });\n  validationSchema = object().shape(schemaObj);\n  return fields.length > 0 && (\n    <Formik\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      enableReinitialize\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        const app = {};\n        Object.entries(values).forEach((kv) => {\n          const [key, value] = kv;\n          if (value === null) {\n          } else {\n            app[key] = value;\n          }\n        });\n        const { lcid, id } = docReq;\n        makeAPIRequest(`/lc/${lcid}/doc_req/${id}/`, 'POST', app, true)\n          .then(() => hideModal())\n          .then(() => refreshLc())\n          .then(() => setSubmitting(false));\n          // .then(async res => {\n          //   let text = await res.text();\n          //   if (res.status === 200) {\n          //     localStorage.removeItem(`lc/${match.params.bankid}`);\n          //     setStatus({status: \"success\", message: \"Your LC app has been sent in! The bank will get back to you ASAP.\"});\n          //   } else {\n          //     if (text.length > 250) text = \"Unknown server error. Please contact steve@bountium.org.\"\n          //     localStorage.setItem(`lc/${match.params.bankid}`, JSON.stringify(values))\n          //     setStatus({status: \"error\", message: `Error submitting form: ${text}`});\n          //   }\n          //   })\n      }}\n    >\n    {({ isSubmitting }) => (\n      isSubmitting ? <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          /> : (\n      <Form>\n      <DocReqTitle>Create {docReq.docName}</DocReqTitle>\n      {fields && fields.map(question => {\n        const Component = TYPE_TO_COMPONENT[question.type];\n        return <Component key={question.key} question={question} />;\n      })}\n      <div style={{display: \"flex\", justifyContent: \"center\", marginTop: \"20px\"}}>\n      <Button disabled={isSubmitting} type=\"submit\">Create</Button>\n      </div>\n      </Form>\n\n          )\n    )}\n      </Formik>\n  )\n};\n\nconst UploadModal = ({ docReq, refreshLc, hideModal }) => {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const uploadFile = (file) => {\n    if (!file) {\n      console.error('No file found.');\n      return;\n    }\n    setIsSubmitting(true);\n    const { lcid, id } = docReq;\n    postFile(`/lc/${lcid}/doc_req/${id}/`, file)\n      .then(() => hideModal())\n      .then(() => refreshLc())\n      .then(() => setIsSubmitting(false));\n  };\n\n  return (\n    <>\n      <DocReqTitle>Upload {docReq.docName}</DocReqTitle>\n      <div style={{ display: \"flex\", flexDirection: \"column\", maxWidth: '700px' , margin: 'auto'}}>\n        {isSubmitting ? <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          /> : (\n        <FileUpload>\n          Upload File\n          <input\n            type=\"file\"\n            onChange={(e) => uploadFile(e.target.files[0])}\n            style={{ display: \"none\" }}\n          />\n        </FileUpload>\n        )}\n      </div>\n    </>\n  );\n};\n\nconst DocumentaryEntryFlex = styled.div`\n  display: flex;\n  align-items: center;\n  > :nth-child(1) {\n    min-width: 60%;\n  }\n  > :nth-child(2) {\n    min-width: 20%;\n  }\n  > :nth-child(3) {\n    min-width: 20%;\n  }\n  ${props => props.clickable && `cursor: pointer;`}\n`;\n\nconst DocumentaryEntryWrapper = styled.div`\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst DocReqTitle = styled.div`\n  font-weight: 500;\n  font-size: 24px;\n  max-width: 700px;\n  margin: 5px auto 20px;\n  display: flex;\n  align-items: center;\n`;\n\nconst DocReqDate = styled.div`\n  font-size: 14px;\n`;\n\nconst DocReqStatus = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n`;\n\nconst ExpandedDocumentaryEntry = styled.div`\n  padding-bottom: 10px;\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.5;\n`;\n\nconst FileUpload = styled.label`\n  padding: 5px 10px;\n  border: 1px solid #dcdcdc;\n  margin-right: auto;\n  cursor: pointer;\n`;\n\nconst DocumentaryEntryEvaluation = styled.div`\n  display: flex;\n  margin-top: 10px;\n\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nconst SmallHeader = styled.div`\n  font-size: 12px;\n  min-width: 150px;\n  margin-right: 50px;\n`;\n\nconst DocumentaryRequirement = ({ documentaryRequirement: docReq, lcid, userType, status, live, refreshLc, showModal, ...props }) => {\n  const { docName: title, dueDate, linkToSubmittedDoc, id, requiredValues, rejected } = docReq;\n  const [expanded, setExpanded] = useState(false);\n  const [comments, setComments] = useState('');\n\n  const approve = () => {\n    makeAPIRequest(`/lc/${lcid}/doc_req/${id}/evaluate/`, 'POST', {\n      approve: true, complaints: comments,\n    }).then(() => refreshLc());\n  };\n\n  const reject = () => {\n    makeAPIRequest(`/lc/${lcid}/doc_req/${id}/evaluate/`, 'POST', {\n      approve: false, complaints: comments,\n    }).then(() => refreshLc());\n  };\n\n  return (\n    <DocumentaryEntryWrapper>\n      <DocumentaryEntryFlex\n        clickable\n        onClick={() => setExpanded((e) => !e)}\n        {...props}\n      >\n        <DocReqTitle style={{ margin: \"15px 0\" }}>\n          {title}\n          <FontAwesomeIcon\n            icon={expanded ? faChevronDown : faChevronRight}\n            style={{ color: config.accentColor, marginLeft: \"10px\" }}\n          />\n        </DocReqTitle>\n        <DocReqDate>{dueDate}</DocReqDate>\n        <DocReqStatus>{status}</DocReqStatus>\n      </DocumentaryEntryFlex>\n      {expanded && (\n        <ExpandedDocumentaryEntry>\n          <DocumentaryEntryFlex>\n            <div>\n              <div style={{ marginRight: \"30px\" }}>\n                Required Values: {requiredValues}\n              </div>\n            </div>\n            <div>\n              {live && linkToSubmittedDoc && <Button style={{ marginRight: \"10px\", minWidth: '80px' }}\n                onClick={() => showModal(docReq, lcid)}>View</Button>}\n            </div>\n            <div>\n              {linkToSubmittedDoc && (\n                <div>\n                  File: <a href={linkToSubmittedDoc}>order.pdf</a>\n                </div>\n              )}\n              {live &&\n                status !== \"Approved\" &&\n                (!linkToSubmittedDoc || rejected) && (\n                  <Button style={{ marginRight: \"10px\", minWidth: '80px' }}\n                onClick={() => showModal(docReq, lcid)}>Create</Button>\n                )}\n            </div>\n          </DocumentaryEntryFlex>\n          {live &&\n            userType === \"issuer\" &&\n            status !== \"Approved\" &&\n            !rejected &&\n            linkToSubmittedDoc && (\n              <DocumentaryEntryEvaluation>\n                <Button onClick={approve}>Approve</Button>\n                <Button onClick={reject}>Reject</Button>\n                <div>\n                  <SmallHeader>Comments</SmallHeader>\n                  <input\n                    type=\"text\"\n                    value={comments}\n                    onChange={(e) => setComments(e.target.value)}\n                  />\n                </div>\n              </DocumentaryEntryEvaluation>\n            )}\n        </ExpandedDocumentaryEntry>\n      )}\n    </DocumentaryEntryWrapper>\n  );\n};\n\nconst useModal = () => {\n  const [isModalShowing, setIsModalShowing] = useState(false);\n  const [modalDocReq, setModalDocReq] = useState(null);\n\n  return {\n    showModal: (docReq, lcid) => {\n      setIsModalShowing(true);\n      setModalDocReq({...docReq, lcid});\n    },\n    hideModal: () => setIsModalShowing(false),\n    isModalShowing,\n    modalDocReq\n  }\n};\n\nconst DocumentaryRequirements = ({ lc, userType, live, refreshLc }) => {\n  const { showModal, hideModal, isModalShowing, modalDocReq } = useModal();\n  const docReqs = lc.documentaryrequirementSet;\n  return (\n    <Panel title=\"Documentary Requirements\">\n      <DocumentaryEntryFlex>\n        <SmallHeader style={{margin: \"0\"}}>Document Title</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Recieve By</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Status</SmallHeader>\n      </DocumentaryEntryFlex>\n      {docReqs ? docReqs.map(d =>\n        <DocumentaryRequirement\n          documentaryRequirement={d}\n          status={d.satisfied ? \"Approved\" : d.rejected ? \"Rejected\" : d.linkToSubmittedDoc ? \"Pending\" : \"Incomplete\"}\n          lcid={lc.id}\n          live={live}\n          userType={userType}\n          refreshLc={refreshLc}\n          key={d.docName}\n          showModal={showModal}\n          />\n        ) : (\n          <div style={{ marginTop: \"10px\", fontStyle: \"italic\", fontWeight: \"300\"}}>\n            There are no documentary requirements for this LC.\n          </div>\n        )\n      }\n      <Modal show={isModalShowing} docReq={modalDocReq} hideModal={hideModal} refreshLc={refreshLc} lc={lc}/>\n    </Panel>\n  );\n};\n\nexport default DocumentaryRequirements;\n","import React, {useEffect} from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"./Button\";\nimport config from \"../../config\";\n\nconst Background = styled.div`\n  position: fixed;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  left: 0%;\n  top: 0%;\n  z-index: 2;\n  background-color: rgba(211, 211, 211, 0.5);\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Container = styled.div`\n  background-color: white;\n  opacity: 100%;\n  padding: 20px;\n  max-width: 80%;\n  max-height: 80%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Title = styled.div`\n  font-size: 26px;\n  padding-bottom: 15px;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst ActionButton = styled(Button)`\n  margin: 5px;\n  min-width: 72px;\n`;\n\nconst CancelButton = styled(ActionButton)`\n  color: ${config.accentColor};\n  background-color: transparent;\n  min-width: 72px;\n`;\n\nconst Error = styled.span`\n  display: inline-flex;\n  align-items: center;\n  color: red;\n  font-style: italic;\n  padding-right: 20px;\n`;\n\nexport const Modal = ({show, title, children, onCancel, onSelect, containerStyle,\n  onShow, error, selectDisabled, selectButton = \"Select\", cancelButton = \"Cancel\"}) => {\n\n  useEffect(() => {\n    const scrollTop = show ? `-${document.documentElement.scrollTop}px` : -parseInt(document.body.style.top);\n    document.body.style.position = show ? \"fixed\" : \"\";\n    document.body.style.width = show ? \"100%\" : \"\";\n    document.body.style.overflowY = show ? \"scroll\" : \"\";\n    if (show) document.body.style.top = scrollTop;\n    else {\n      document.body.style.top = \"\";\n      if (!isNaN(scrollTop)) document.documentElement.scrollTop = scrollTop;\n    }\n    show && onShow && onShow();\n    return () => {\n      document.body.style.position = \"\";\n      document.body.style.width = \"\";\n      document.body.style.overflowY = \"\";\n      const resetScroll = -parseInt(document.body.style.top);\n      if (!isNaN(resetScroll)) document.documentElement.scrollTop = resetScroll;\n      document.body.style.top = \"\";\n    }\n  }, [show]);\n\n  return (\n      show &&\n      <Background onClick={() => onCancel()}>\n        <Container style={containerStyle} onClick={event => event.stopPropagation()}>\n          <Title>{title}</Title>\n          {children}\n          <ButtonWrapper>\n            <Error>{error}</Error>\n            <CancelButton type={\"button\"} onClick={onCancel}>{cancelButton}</CancelButton>\n            <ActionButton type={\"button\"} disabled={selectDisabled} onClick={onSelect}>{selectButton}</ActionButton>\n          </ButtonWrapper>\n        </Container>\n      </Background>\n  )\n};\n","import React, {useEffect, useRef, useState} from 'react';\nimport styled from 'styled-components';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faChevronDown, faChevronRight} from \"@fortawesome/free-solid-svg-icons\";\nimport {get} from \"lodash\";\n\nimport {makeAPIRequest} from '../../utils/api';\nimport Panel from './Panel';\nimport config from \"../../config\";\nimport AnimateHeight from \"react-animate-height\";\nimport {Modal} from \"../../components/ui/Modal\";\n\nconst InputWrapper = styled.div`\n  max-width: 700px;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border-radius: 10px;\n  border: 1px solid #cdcdcd;\n\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }\n  transition: border 0.3s;\n  background-color: #fff;\n`;\n\nconst QuestionText = styled.h3`\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.25;\n`;\n\nconst Subtitle = styled.div`\n  margin-top: 5px;\n  margin-bottom: 10px;\n  color: ${props => props.error ? \"red\" : \"#555353\"};\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst Asterisk = styled.span`\n  color: #dc3545;\n  font-size: 16px;\n`;\n\nconst StyledFormInput = styled.textarea`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-height: 100px;\n  font-size: 16px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  border: 1px solid ${config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  margin: 10px 0;\n  display: flex;\n  align-items: center;\n`;\n\nconst DocumentaryEntryFlex = styled.div`\n  display: flex;\n  align-items: baseline;\n  > :nth-child(1) {\n    min-width: 55%;\n  }\n  > :nth-child(2) {\n    min-width: 30%;\n  }\n  > :nth-child(3) {\n    min-width: 15%;\n  }\n  ${props => props.clickable && `cursor: pointer;`}\n`;\n\nconst DocumentaryEntryWrapper = styled.div`\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst DocReqTitle = styled.div`\n  font-weight: 500;\n  font-size: 24px;\n  max-width: 700px;\n  margin: 5px auto 20px;\n  margin: 5px auto 20px;\n  display: flex;\n  align-items: center;\n  ${props => props.clickable && `cursor: pointer;`}\n`;\n\nconst DocReqStatus = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n`;\n\nconst ExpandedDocumentaryEntry = styled.div`\n  padding-bottom: 10px;\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.5;\n  width: 75%;\n`;\n\nconst DocumentaryEntryEvaluation = styled.div`\n  display: flex;\n  margin-top: 10px;\n\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nconst SmallHeader = styled.div`\n  font-size: 12px;\n  min-width: 150px;\n  margin-right: 50px;\n`;\n\nconst RequestClarificationModal = ({lc, initialReason, modal, setModal, field, setLc, client, beneficiary}) => {\n  const [comment, setComment] = useState(initialReason);\n  const textAreaRef = useRef(null);\n\n  useEffect(() => {\n    if (modal === \"requestClarification\") {\n      textAreaRef.current.focus();\n    }\n  }, [modal]);\n\n  const onRequest = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n      lc: {[field]: \"requested\"},\n      comment: {action: \"requested clarification on the beneficiary\", message: comment},\n      holdStatus: true\n    }).then(data => setLc(data.updatedLc));\n    setModal(\"\");\n  };\n\n  return (\n    <Modal selectButton={\"Confirm\"} show={modal === \"requestClarification\"} onCancel={() => setModal(\"\")}\n           title={\"Request Clarification\"} onSelect={onRequest}>\n      <div>Request {client?.name} to provide more information about {beneficiary?.name}?</div>\n      <div style={{paddingTop: 40}}>Comment:</div>\n      <StyledFormInput ref={textAreaRef} value={comment} onChange={({target}) => setComment(target.value)}/>\n    </Modal>\n  )\n};\n\nconst RejectionModal = ({lc, initialReason, modal, setModal, field, setLc}) => {\n  const [rejectionReason, setRejectionReason] = useState(initialReason);\n  const textAreaRef = useRef(null);\n\n  useEffect(() => {\n    if (modal === \"reject\") {\n      textAreaRef.current.focus();\n    }\n  }, [modal]);\n\n  const onReject = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n      lc: {[field]: \"rejected\"},\n      comment: {action: \"rejected the LC\", message: rejectionReason},\n      holdStatus: true\n    }).then(data => setLc(data.updatedLc));\n    setModal(\"\");\n  };\n\n  return (\n    <Modal selectButton={\"Reject\"} show={modal === \"reject\"} onCancel={() => setModal(\"\")} title={\"Confirm Rejection\"}\n           onSelect={onReject}>\n      <div>Are you sure you want to reject this LC? Doing so will cause all changes to be permanently halted.</div>\n      <div style={{paddingTop: 40}}>Notes:</div>\n      <StyledFormInput ref={textAreaRef} value={rejectionReason}\n                       onChange={({target}) => setRejectionReason(target.value)}/>\n    </Modal>\n  )\n};\n\nconst titleCase = string => {\n  const exceptions = new Set(\n    [\"and\", \"as\", \"but\", \"for\", \"if\", \"nor\", \"or\", \"so\", \"yet\", \"a\", \"an\",\n      \"the\", \"as\", \"at\", \"by\", \"for\", \"in\", \"of\", \"off\", \"on\", \"per\", \"to\",\n      \"up\", \"via\"]);\n\n  const allCaps = new Set([\"s.a.\", \"sa\"]);\n\n  const capitalizeFirstLetter = (word, wordIndex) => {\n    word = word.toLowerCase();\n    if (allCaps.has(word)) {\n      return word.toUpperCase();\n    } else if (!wordIndex || !exceptions.has(word)) {\n      return word.charAt(0).toUpperCase() + word.substring(1);\n    } else {\n      return word;\n    }\n  };\n\n  return string.split(\" \").map((substr, ind) => capitalizeFirstLetter(substr, ind)).join(\" \");\n};\n\nconst SanctionInfo = ({sanction}) => {\n\n  const handleRightClick = event => {\n    event.preventDefault();\n    window.open(`https://www.google.com/search?q=${sanction.name}`);\n  };\n\n  const addressToString = address => {\n    const fields = [];\n    address.address && fields.push(address.address);\n    address.addressGroup && fields.push(address.addressGroup);\n    address.country && fields.push(address.country);\n    return fields.join(\", \");\n  };\n\n  return (\n    <div style={{paddingBottom: 20, paddingLeft: 20}}>\n      <div style={{fontSize: 19, width: \"70%\"}} title={\"Right click to search\"}\n           onContextMenu={handleRightClick}>{titleCase(sanction.name)}</div>\n      {sanction.aliases.length > 0 && <div style={{paddingLeft: 40, paddingTop: 5}}>\n        Aliases:\n        <div style={{paddingLeft: 40}}>\n          {sanction.aliases.map(alias => <div style={{paddingTop: 3}} key={alias.id}>{titleCase(alias.name)}</div>)}\n        </div>\n      </div>}\n      {sanction.addresses.length > 0 && <div style={{paddingLeft: 40, paddingTop: 5}}>\n        Addresses:\n        <div style={{paddingLeft: 40}}>\n          {sanction.addresses.map(\n            address => <div style={{paddingTop: 3}} key={address.id}>{addressToString(address)}</div>)}\n        </div>\n      </div>}\n    </div>\n  )\n};\n\nconst ComplianceCheck = ({\n  lc, setLc, title, initialRequestComment, initialRejectionReason, error, errorMessage, children, status, type\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [modal, setModal] = useState(\"\");\n\n  let field;\n  if (type === \"company\") {\n    field = \"ofacBankApproval\"\n  } else if (type === \"country\") {\n    field = \"sanctionBankApproval\";\n  } else if (type === \"license\") {\n    field = \"importLicenseApproval\";\n  } else if (type === \"boycott\") {\n    field = \"boycottLanguageStatus\";\n  } else if (type === \"believablePrice\") {\n    field = \"believablePriceOfGoodsStatus\";\n  }\n\n  const onWaiveClick = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n      lc: {[field]: \"accepted\"},\n      holdStatus: true\n    }).then(data => setLc(data.updatedLc));\n  };\n\n  return (\n    <DocumentaryEntryWrapper>\n      <RejectionModal modal={modal} setModal={setModal} initialReason={initialRejectionReason}\n                      field={field} setLc={setLc} lc={lc}/>\n      <RequestClarificationModal lc={lc} modal={modal} setModal={setModal} initialReason={initialRequestComment}\n                                 setLc={setLc} client={lc?.client} field={field}\n                                 beneficiary={lc?.beneficiary}/>\n      <DocumentaryEntryFlex>\n        <div>\n          <DocReqTitle style={{margin: \"15px 0 0 0\"}} clickable\n                       onClick={() => setExpanded((e) => !e)}>\n            {title}\n            <FontAwesomeIcon\n              icon={expanded ? faChevronDown : faChevronRight}\n              style={{color: config.accentColor, marginLeft: \"10px\"}}\n            />\n          </DocReqTitle>\n          <Subtitle error={error} style={{paddingLeft: 10}}>\n            {error && errorMessage}\n          </Subtitle>\n        </div>\n        <ButtonWrapper style={{position: \"relative\"}}>\n          <StyledButton selected={status === \"Accepted\"} onClick={onWaiveClick}>Waive</StyledButton>\n          <StyledButton selected={status === \"Rejected\"} onClick={() => setModal(\"reject\")}>Reject</StyledButton>\n          {expanded && <StyledButton style={{position: \"absolute\", top: 40}} selected={status === \"Requested\"}\n                                     onClick={() => setModal(\"requestClarification\")}>\n            Request More Info</StyledButton>}\n        </ButtonWrapper>\n        <DocReqStatus>{status}</DocReqStatus>\n      </DocumentaryEntryFlex>\n      <AnimateHeight duration={300} height={expanded ? \"auto\" : 0}>\n        <ExpandedDocumentaryEntry>\n          {children}\n        </ExpandedDocumentaryEntry>\n      </AnimateHeight>\n    </DocumentaryEntryWrapper>\n  );\n};\n\nconst CompanyOFACCheck = ({lc, setLc}) => {\n  const beneficiary = get(lc, 'beneficiary.name');\n  const sanctions = get(lc, 'ofacSanctions');\n  const status = get(lc, \"ofacBankApproval\");\n  return (\n    <ComplianceCheck\n      lc={lc}\n      type={\"company\"}\n      setLc={setLc}\n      title={\"OFAC Company Sanctions\"}\n      status={titleCase(status)}\n      initialRejectionReason={`The beneficiary ${beneficiary} is on the OFAC SDN sanction list.`}\n      initialRequestComment={`Our records indicate that the beneficiary ${beneficiary} is on the OFAC SDN sanction list. If this is a mistake, please provide reasoning to confirm so.`}\n      error={sanctions.length > 0}\n      errorMessage={`${sanctions.length > 0 ? sanctions.length : \"No\"} ${sanctions.length > 0 ? \"potential\"\n        : \"\"} error${sanctions.length !== 1 ? \"s\" : \"\"}${sanctions.length === 0 ? \" found\" : \"\"}`}\n    >\n      {sanctions.length > 0 ? sanctions.map(sanction => <SanctionInfo key={sanction.id} sanction={sanction}/>) :\n        <div style={{paddingLeft: 20, width: \"70%\"}}>Did not find any immediate sanction violations for\n          company {beneficiary}.</div>}\n    </ComplianceCheck>\n  )\n};\n\nconst CountrySanctionCheck = ({lc, setLc}) => {\n  const beneficiary = get(lc, 'beneficiary.name');\n  const beneficiaryCountry = get(lc, 'beneficiary.country');\n  const clientCountry = get(lc, \"client.country\");\n  const countrySanctionMessage = get(lc, \"sanctionAutoMessage\");\n  const status = get(lc, \"sanctionBankApproval\");\n  let message;\n  if (countrySanctionMessage === null) {\n    message = `Not able to check sanction violations for the country ${beneficiaryCountry}.\n    Please contact steve@bountium.org if you would like for this functioniality to be extended.`;\n  } else if (countrySanctionMessage === \"\") {\n    message = `Did not find any immediate sanction errors for country ${beneficiaryCountry}.`;\n  } else {\n    message = <div>Paying out an LC to {beneficiaryCountry} may violate sanctions. Please click&nbsp;\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href={countrySanctionMessage}>here</a> for more information.</div>;\n  }\n\n  return (\n    <ComplianceCheck\n      lc={lc}\n      type={\"country\"}\n      setLc={setLc}\n      title={\"Country Sanctions\"}\n      status={titleCase(status)}\n      initialRejectionReason={`The beneficiary ${beneficiary}'s country (${beneficiaryCountry}) has sanction violations with your country (${clientCountry}).`}\n      initialRequestComment={`Our records indicate that the beneficiary ${beneficiary}'s country (${beneficiaryCountry}) has sanctions against your country (${clientCountry}). If this is a mistake, please provide reasoning to confirm so.`}\n      error={countrySanctionMessage === null || countrySanctionMessage}\n      errorMessage={countrySanctionMessage === \"\" ? \"No errors found\" : \"1 potential error\"}\n    >\n      <div style={{paddingLeft: 20, fontSize: 19, width: \"70%\"}}>{beneficiaryCountry}</div>\n      <div style={{paddingLeft: 60, width: \"70%\"}}>{message}</div>\n    </ComplianceCheck>\n  )\n};\n\nconst ImportLicenseCheck = ({lc, setLc}) => {\n  const licenseSanctionMessage = get(lc, \"importLicenseMessage\");\n  const status = get(lc, \"importLicenseApproval\");\n\n  return (\n    <ComplianceCheck\n      lc={lc}\n      type={\"license\"}\n      setLc={setLc}\n      title={\"Import License/Permits\"}\n      status={titleCase(status)}\n      initialRejectionReason={`There may an additional permit/license required for the goods marked.`}\n      initialRequestComment={`Our records indicate that there are additional permits required to ship this good. If this is a mistake, please provide reasoning to confirm so.`}\n      error={licenseSanctionMessage === null || licenseSanctionMessage}\n      errorMessage={licenseSanctionMessage === \" \" ? null : \"1 potential error\"}\n    >\n      {licenseSanctionMessage?.length > 1 ? <div\n          style={{paddingTop: 20, paddingLeft: 20}}>{licenseSanctionMessage}</div> :\n        <div style={{paddingLeft: 20, width: \"70%\"}}>Did not find any immediate license/permits required for this\n          transaction.</div>}\n    </ComplianceCheck>\n  )\n};\n\nconst BoycottLanguageCheck = ({lc, setLc}) => {\n  const boycotts = get(lc, 'boycottLanguage');\n  const status = get(lc, 'boycottLanguageStatus');\n\n  const boycottSourceToReadable = (source) => {\n    if (source === \"otherInstructions\") {\n      return \"'Other instructions' in the LC application\";\n    }\n  };\n\n  const boycottToReadable = (source, boycotts) => {\n    if (source === \"otherInstructions\") {\n      const indices = [];\n      boycotts.map(boycott => {\n        const startIndex = lc.otherInstructions.indexOf(boycott.phrase);\n        indices.push([startIndex, startIndex + boycott.phrase.length])\n      });\n      indices.sort((a, b) => a[0] - b[0]);\n      const cmps = [<span>{lc.otherInstructions.substring(0, indices[0][0])}</span>];\n      indices.forEach((indexes, index) => {\n        if (index > 0) {\n          cmps.push(<span>{lc.otherInstructions.substring(indices[index - 1][1], indexes[0])}</span>);\n        }\n        cmps.push(<span style={{fontWeight: 600}}>{lc.otherInstructions.substring(indexes[0], indexes[1])}</span>);\n      });\n      cmps.push(<span>{lc.otherInstructions.substring(indices[indices.length - 1][1])}</span>)\n      return (\n        <div style={{fontSize: 14, paddingLeft: 20, fontStyle: \"italic\"}}>\n          \"{cmps.map(cmp => cmp)}\"\n        </div>\n      )\n    }\n  };\n\n  return (\n    <ComplianceCheck\n      lc={lc}\n      type={\"boycott\"}\n      setLc={setLc}\n      title={\"Boycott Language\"}\n      status={titleCase(status)}\n      initialRejectionReason={`There is boycott language in this LC.`}\n      initialRequestComment={`Our records indicate that there is boycott language in this LC. If this is a mistake, please provide reasoning to confirm so.`}\n      error={boycotts === null || Object.keys(boycotts).length > 0}\n      errorMessage={`${Object.keys(boycotts).length > 0 ? Object.keys(boycotts).length : \"No\"} ${Object.keys(\n        boycotts).length > 0 ? \"potential\" : \"\"} error${Object.keys(boycotts).length !== 1 ? \"s\" : \"\"}${Object.keys(\n        boycotts).length === 0 ? \" found\" : \"\"}`}\n    >\n      {Object.keys(boycotts).length > 0 ?\n        <div>\n          <div style={{paddingLeft: 20, width: \"70%\", paddingBottom: 10}}>\n            This LC potentially violates United States Anti-Boycott laws. Please click&nbsp;\n            <a target=\"_blank\" rel=\"noopener noreferrer\"\n               href={\"https://www.bis.doc.gov/index.php/enforcement/oac\"}>here</a>\n            &nbsp;for more information.\n          </div>\n          {Object.entries(boycotts).map(([boycottSource, boycotts], boycottSourceIndex) => (\n            <div style={{paddingLeft: 40}} key={boycottSourceIndex}>\n              <div style={{fontSize: 19, width: \"70%\"}}>\n                From {boycottSourceToReadable(boycottSource)}:\n              </div>\n              {boycottToReadable(boycottSource, boycotts)}\n            </div>))}\n        </div> : <div style={{paddingBottom: 20}}>No immediate boycott language found in the LC.</div>}\n    </ComplianceCheck>\n  )\n};\n\nconst BelievablePriceOfGoods = ({lc, setLc}) => {\n  const goodsInfo = get(lc, 'goodsInfo');\n  const status = get(lc, 'believablePriceOfGoodsStatus');\n  const unitsPurchased = parseFloat(get(lc, 'unitsPurchased'));\n  const range = goodsInfo && [Math.max(0,\n    unitsPurchased * (parseFloat(goodsInfo.mean) - 2 * parseFloat(goodsInfo.standardDeviation))),\n    unitsPurchased * (parseFloat(goodsInfo.mean) + 2 * parseFloat(goodsInfo.standardDeviation))];\n  const credit = parseFloat(get(lc, 'creditAmt'));\n  const error = range && (credit < range[0] || credit > range[1]);\n  let initialRejectionReason = \"\";\n  let initialRequestComment = \"\";\n  let cmp = \"Did not find any immediate irregularities with the price of the goods.\";\n  if (error && credit < range[0]) {\n    initialRejectionReason = \"The price of the goods is too low.\";\n    initialRequestComment = \"Our records indicate that the price of the goods is too low. If this is a mistake, please provide reasoning to confirm so.\";\n    cmp = <div>The price of the goods for HTS code {goodsInfo.htsCode} (${credit}) may be too low. <a target=\"_blank\" rel=\"noopener noreferrer\" href={\"https://comtrade.un.org/Data/\"}>These records</a> indicate the range should fall somewhere between [${range[0]} - ${range[1]}].</div>\n  } else if (error && credit > range[1]) {\n    initialRejectionReason = \"The price of the goods is too high.\";\n    initialRequestComment = \"Our records indicate that the price of the goods is too high. If this is a mistake, please provide reasoning to confirm so.\";\n    cmp = <div>The price of the goods for HTS code {goodsInfo.htsCode} (${credit}) may be too high. <a target=\"_blank\" rel=\"noopener noreferrer\" href={\"https://comtrade.un.org/Data/\"}>These records</a> indicate the range should fall somewhere between [${range[0]} - ${range[1]}].</div>\n  }\n\n  const purchasedItem = get(lc, 'purchasedItem');\n  const unitOfMeasure = get(lc, 'unitOfMeasure');\n\n  return (\n    <ComplianceCheck\n      lc={lc}\n      type={\"believablePrice\"}\n      setLc={setLc}\n      title={\"Believable Price of Goods\"}\n      status={titleCase(status)}\n      initialRejectionReason={initialRejectionReason}\n      initialRequestComment={initialRequestComment}\n      error={error}\n      errorMessage={error && \"1 potential error\"}\n    >\n      <div style={{fontSize: 19, paddingLeft: 20, width: \"70%\"}}>\n        {purchasedItem}: ({unitsPurchased} {unitOfMeasure}):\n      </div>\n      <div style={{paddingLeft: 40}}>\n        {cmp}\n      </div>\n    </ComplianceCheck>\n  )\n};\n\nconst ComplianceChecks = ({lc, setLc}) => {\n  return (\n    <Panel title=\"Compliance Checks\">\n      <DocumentaryEntryFlex>\n        <SmallHeader style={{margin: \"0\"}}>Type</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Action</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Status</SmallHeader>\n      </DocumentaryEntryFlex>\n      <CompanyOFACCheck lc={lc} setLc={setLc}/>\n      <CountrySanctionCheck lc={lc} setLc={setLc}/>\n      <ImportLicenseCheck lc={lc} setLc={setLc}/>\n      <BoycottLanguageCheck lc={lc} setLc={setLc}/>\n      <BelievablePriceOfGoods lc={lc} setLc={setLc}/>\n    </Panel>\n  );\n};\n\nexport default ComplianceChecks;\n","import React, {useContext, useEffect, useRef, useState} from \"react\";\nimport styled from \"styled-components\";\nimport {Field, Form, Formik, useField, useFormikContext} from \"formik\";\nimport _, {get} from \"lodash\";\nimport moment from \"moment\";\n\nimport {makeAPIRequest} from '../../utils/api';\nimport {useAuthentication, UserContext} from \"../../utils/auth\";\nimport LCView from \"../../components/lc/LCView\";\nimport Button from \"../../components/ui/Button\";\nimport DocumentaryRequirements from './DocumentaryRequirements';\nimport Panel from './Panel';\nimport config from '../../config';\nimport {Modal} from \"../../components/ui/Modal\";\nimport ComplianceChecks from \"./ComplianceChecks\";\n\n// TODO break this file up into multiple files\n\nconst disabledBackgroundColor = `#c3c1c3`;\nconst disabledColor = `black`;\n\nconst TwoColumnHolder = styled.div`\n  display: flex;\n`;\n\nconst LeftColumn = styled.div`\n  flex-grow: 1;\n  margin-right: 20px;\n  min-width: 250px;\n  max-width: 250px;\n`;\n\nconst RightColumn = styled.div`\n  flex-grow: 6;\n`;\n\nconst OrderStatusWrapper = styled.div`\n  font-weight: 300;\n`;\n\nconst PartyDisplayMessage = styled.div`\n  font-weight: 300;\n  margin: 15px 0;\n  text-align: center;\n`;\n\nconst APPROVALS_TO_STATE = {\n  issuerRejected: {\n    message: \"LC Application has been rejected by the issuer.\",\n    canEdit: [],\n    canApprove: []\n  },\n  client: {\n    message: \"LC Application has been submitted and is waiting on issuer review.\",\n    canEdit: ['issuer'],\n    canApprove: ['issuer'],\n  },\n  clientIssuer: {\n    message: \"LC has been sent to beneficiary and is awaiting approval or proposed changes.\",\n    canEdit: ['beneficiary'],\n    canApprove: ['beneficiary'],\n  },\n  // clientBene is not possible\n  bene: {\n    message: \"LC has been resubmitted to issuer with beneficiary redlining and is awaiting their approval.\",\n    canEdit: ['issuer'],\n    canApprove: ['issuer'],\n  },\n  issuer: {\n    message: \"LC has been resent to client with issuer edits and is awaiting client approval.\",\n    canEdit: ['client'],\n    canApprove: ['client'],\n  },\n  issuerBene: {\n    message: \"LC has been resent to client with issuer and beneficiary edits and is awaiting client approval.\",\n    canEdit: ['client'],\n    canApprove: ['client'],\n  },\n};\n\nconst OrderStatusMessage = ({stateName}) => {\n  const message = APPROVALS_TO_STATE[stateName].message;\n  return <div>{message}</div>\n};\n\nconst OrderStatus = ({lc, setLc, userType, stateName, setModal, totalCredit}) => {\n  const approvals = [\n    {name: 'Issuer:', value: get(lc, 'issuerApproved')},\n    {name: 'Client:', value: get(lc, 'clientApproved')},\n    {name: 'Beneficiary:', value: get(lc, 'beneficiaryApproved')}\n  ];\n  const handleClickApprove = async () => {\n    const approvedCreditAmt = lc.client.approvedCredit.filter(\n      model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt;\n    if (userType === \"issuer\" && (!approvedCreditAmt || parseFloat(totalCredit) +\n      parseFloat(lc.creditAmt) - parseFloat(lc.cashSecure) > parseFloat(approvedCreditAmt))) {\n      setModal(\"creditOverflow\");\n    } else {\n      makeAPIRequest(`/lc/${get(lc, 'id')}/evaluate/`, 'POST', {approve: true})\n      .then(json => setLc({...lc, [`${userType}Approved`]: true}));\n    } // TODO fix\n  };\n  const handleClickPayout = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/payout/`, 'POST', {approve: true})\n    .then(json => setLc({...lc, paidOut: true})); // TODO fix\n  };\n  const handleClickRequest = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/request/`, 'POST', {approve: true})\n    .then(json => setLc({...lc, requested: true})); // TODO fix\n  };\n  const handleClickDraw = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/draw/`, 'POST', {approve: true})\n    .then(json => setLc({...lc, drawn: true})); // TODO fix\n  };\n  const allApproved = approvals.every(a => a.value);\n  const {paidOut, drawn, requested} = lc;\n  return (\n    <Panel title=\"Order Status\" highlight>\n      <OrderStatusWrapper>\n        {!allApproved && APPROVALS_TO_STATE[stateName].canApprove.includes(userType) &&\n        <center><Button onClick={handleClickApprove}>Approve</Button></center>}\n        {allApproved && !paidOut && userType === \"issuer\" &&\n        <center><Button onClick={handleClickPayout}\n                        style={{marginBottom: '15px'}}>Pay Out</Button></center>}\n        {allApproved && !requested && userType === \"beneficiary\" &&\n        <center><Button onClick={handleClickRequest} style={{marginBottom: '15px'}}>Request</Button></center>}\n        {allApproved && !drawn && userType === \"beneficiary\" &&\n        <center><Button onClick={handleClickDraw} style={{marginBottom: '15px'}}>Draw</Button></center>}\n        {allApproved && <PartyDisplayMessage style={{marginTop: '0'}}>This LC is live.</PartyDisplayMessage>}\n        {allApproved && paidOut ? <PartyDisplayMessage style={{marginTop: '0'}}>This LC has been paid\n            out.</PartyDisplayMessage>\n          : drawn ? <PartyDisplayMessage style={{marginTop: '0'}}>Payment for this LC has been\n              drawn.</PartyDisplayMessage>\n            : requested ? <PartyDisplayMessage style={{marginTop: '0'}}>Payment for this LC has been\n              requested.</PartyDisplayMessage> : null}\n        <PartyDisplayMessage style={{fontWeight: '500'}}>You are the {userType}.</PartyDisplayMessage>\n        {!allApproved && (\n          <OrderStatusMessage stateName={stateName}/>\n        )}\n      </OrderStatusWrapper>\n    </Panel>\n  );\n};\n\nconst OrderNotes = ({lc}) => {\n  return (\n    <Panel title=\"Revision Notes\">\n      <OrderStatusWrapper>\n        {lc.latestVersionNotes}\n      </OrderStatusWrapper>\n    </Panel>\n  )\n};\n\nconst ClientInformationWrapper = styled.div`\n  font-weight: 300;\n  font-size: 14px;\n  line-height: 1.5;\n`;\n\nconst HistoryOrder = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst ClientInformation = ({lc}) => {\n  const employee = get(lc, 'taskedClientEmployees[0]');\n  const client = get(lc, 'client');\n  const [clientOrders, setClientOrders] = useState(null);\n  useEffect(() => {\n    makeAPIRequest(`/lc/by_client/${client.id}/`)\n    .then(json => setClientOrders(json));\n  }, [client.id]);\n\n  return (\n    <Panel title=\"Client Information\">\n      <ClientInformationWrapper>\n        POC: {employee.name}\n        <br/>\n        Email: <a href={`mailto:${employee.email}`}>{employee.email}</a>\n        <h1 style={{fontWeight: \"500\", margin: \"15px 0\"}}>Order History</h1>\n        {clientOrders && clientOrders.map(order => (\n          <HistoryOrder key={order.id}>\n            <a href={`/lc/${order.id}`}>{order.purchasedItem || `LC #${order.id}`}</a>\n            {lc.paidOut ? <span>{order.dueDate}</span> : <span>{order.applicationDate}</span>}\n          </HistoryOrder>\n        ))}\n      </ClientInformationWrapper>\n    </Panel>\n  );\n};\n\nconst BigStatsWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  > {\n    flex-grow: 1;\n  }\n\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst BigNumberTitle = styled.div`\n  font-size: 14px;\n  margin: 10px 0 15px;\n`;\n\nconst BigNumber = styled.div`\n  font-weight: 600;\n  font-size: 30px;\n  margin-bottom: 25px;\n`;\n\nconst AnalysisWrapper = styled.div`\n  display: flex;\n  align-items: baseline;\n  margin: 10px;\n`;\n\nconst SmallHeader = styled.div`\n  font-size: 12px;\n  min-width: 150px;\n  margin-right: 50px;\n`;\n\nconst AnalysisBody = styled.div`\n  font-weight: ${props => props.error === undefined ? 300 : 400};\n  ${props => props.error && \"color: red;\"}\n  ${props => props.error === false && \"color: #00a031;\"}\n`;\n\nconst AnalysisDetail = styled.span`\n  font-style: italic;\n  font-weight: 300;\n  font-size: 14px;\n  color: red;\n  text-decoration: underline;\n  opacity: .6;\n  cursor: pointer;\n  &:hover {\n    opacity: 1;\n    ${props => props.pop && \"font-size: 15px;\"}\n  }\n`;\n\nconst Subtitle = styled.div`\n  margin-top: 15px;\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst Financials = ({lc, setModal, totalCredit}) => {\n  let creditOverflow = false;\n  const approvedCreditAmt = lc.client.approvedCredit.filter(\n    model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt;\n  const lcCredit = lc.issuerApproved ? 0 : parseFloat(lc.creditAmt) - parseFloat(lc.cashSecure);\n  if (!approvedCreditAmt || parseFloat(totalCredit) +\n    lcCredit > parseFloat(approvedCreditAmt)) {\n    creditOverflow = true;\n  }\n  const client = get(lc, 'client');\n  return (\n    <Panel title=\"Financials\">\n      <BigStatsWrapper>\n        <div style={{paddingRight: 30, width: \"max-content\"}}>\n          <BigNumberTitle>Annual Cashflow</BigNumberTitle>\n          <BigNumber>\n            {client.annualCashflow || \"N/A\"}\n            <span style={{fontWeight: \"200\", fontSize: \"16px\"}}> yearly</span>\n          </BigNumber>\n        </div>\n        <div style={{paddingRight: 30}}>\n          <BigNumberTitle>Savings Available</BigNumberTitle>\n          <BigNumber>{client.balanceAvailable || \"N/A\"}</BigNumber>\n        </div>\n        <div>\n          <BigNumberTitle>Approved Credit</BigNumberTitle>\n          <BigNumber>{client.approvedCredit.filter(model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt\n          || \"N/A\"}</BigNumber>\n        </div>\n      </BigStatsWrapper>\n      <div>\n        <AnalysisWrapper>\n          <SmallHeader>Credit Analysis</SmallHeader>\n          <AnalysisBody error={creditOverflow}>\n            {creditOverflow ? \"There is a credit overflow.\"\n              : \"Approving this LC will not exceed the current approved credit limit.\"}\n            {creditOverflow && <span>&nbsp;</span>}\n            {creditOverflow && <AnalysisDetail onClick={() => setModal(\"creditOverflow\")}>\n              Click here for details\n            </AnalysisDetail>}\n          </AnalysisBody>\n        </AnalysisWrapper>\n        <AnalysisWrapper>\n          <SmallHeader>Tolerance Analysis</SmallHeader>\n          <AnalysisBody>\n            Bountium will provide tools to help understand tolerance values within a letter of credit.\n            <span style={{fontStyle: \"italic\", fontWeight: \"300\", fontSize: \"14px\"}}>\n              &nbsp;Coming soon\n            </span>\n          </AnalysisBody>\n        </AnalysisWrapper>\n      </div>\n    </Panel>\n  );\n};\n\nconst ODColumn = styled.div`\n  flex-basis: 50%;\n`;\n\nconst ODValue = styled.div`\n  font-weight: 500;\n  font-size: 24px;\n  margin-bottom: 20px;\n  margin-top: 5px;\n`;\n\nconst StyledInput = styled(Field)`\n\tborder: none;\n\tbackground-color: #eee;\n\tpadding: 10px;\n\tborder-radius: 10px;\n\tfont-size: 18px;\n`;\n\nconst StyledPopupInput = styled.input`\n  padding: 10px 0 5px;\n  flex: 1;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  border: 1px solid ${config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  margin: ${props => props.nested ? `0px` : `10px 0;`}\n  max-width: 45%;\n  display: flex;\n  align-items: center;\n`;\n\nconst YesNoInput = ({name}) => {\n  const [, meta, helpers] = useField(name);\n  const {value} = meta;\n  const {setValue} = helpers;\n\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n\n  return (\n    <ButtonWrapper>\n      <StyledButton onClick={handleClick(true)} selected={value === true}>Yes</StyledButton>\n      <StyledButton onClick={handleClick(false)} selected={value === false}>No</StyledButton>\n    </ButtonWrapper>\n  )\n};\n\nconst TYPE_TO_COMPONENT = {\n  text: (props) => (<StyledInput type=\"text\" {...props}/>),\n  number: (props) => (<StyledInput type=\"number\" {...props}/>),\n  date: (props) => (<StyledInput type=\"date\" {...props}/>),\n  boolean: (props) => (<YesNoInput type=\"text\" {...props}/>),\n};\n\nconst SubmitWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #cdcdcd;\n  padding-bottom: 10px;\n  margin-bottom: 10px;\n  align-items: center;\n`;\n\nconst SubmitSection = () => {\n  return (\n    <SubmitWrapper>\n      <ODColumn>\n        <Button type=\"submit\">Submit Revisions</Button>\n      </ODColumn>\n      <ODColumn>\n        <SmallHeader style={{marginBottom: '5px'}}>Revision Comments</SmallHeader>\n        <Field name=\"latestVersionNotes\" type=\"text\"/>\n      </ODColumn>\n    </SubmitWrapper>\n  )\n};\n\nconst OrderDetail = ({title, value, units, type, name, editing, error, errorClicked}) => {\n  const Input = TYPE_TO_COMPONENT[type];\n  return (\n    <>\n      <SmallHeader>{title}</SmallHeader>\n      <ODValue>\n        {editing && type ? <Input name={name} id={name}/> : (value || \"N/A\")}\n        {units && <span style={{fontWeight: \"200\", fontSize: \"16px\"}}> {units}</span>}\n        {error && <span>&nbsp;</span>}\n        {error && <AnalysisDetail pop onClick={errorClicked} style={{opacity: 1}}>{error}</AnalysisDetail>}\n      </ODValue>\n    </>\n  )\n};\n\nconst OrderDetails = ({lc, refreshLc, stateName, userType, live, modal, setModal, totalCredit}) => {\n  const [showExtra, setShowExtra] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const canEdit = !live && APPROVALS_TO_STATE[stateName].canEdit.includes(userType);\n  const details = [\n    {title: \"Counterparty\", value: get(lc, 'beneficiary.name')}, // must edit bene separately\n    {title: \"Counterparty's Country\", value: get(lc, 'beneficiary.country')}, // must edit bene separately\n    {title: \"Latest Permissible Charge Date\", value: lc.lateChargeDate, name: 'lateChargeDate', type: 'date'},\n    {title: \"Draft Presentation Date\", value: lc.draftPresentationDate, name: 'draftPresentationDate', type: 'date'},\n    {title: \"Unit of Measure\", value: lc.unitOfMeasure, type: 'text', name: 'unitOfMeasure'},\n    {title: \"Units Purchased\", value: lc.unitsPurchased, name: 'unitsPurchased', type: 'number'},\n    {\n      title: \"Price of Purchase\",\n      value: lc.creditAmt,\n      units: lc.currencyDenomination,\n      name: 'creditAmt',\n      type: 'number'\n    },\n    {title: \"Credit Expiration Date\", value: lc.expirationDate, name: 'expirationDate', type: 'date'},\n    {title: \"Cash Secure Amount\", value: lc.cashSecure, type: 'number', name: 'cashSecure'},\n    {title: \"Credit Amount (Verbal)\", value: lc.creditAmtVerbal, type: 'text', name: 'creditAmtVerbal'}\n  ];\n  const extraDetails = [\n    {title: \"Credit Delivery Means\", value: lc.creditDeliveryMeans, name: 'creditDeliveryMeans', type: 'text'},\n    // {title: \"Party Paying Other Banks' Fees\", value: lc.payingOtherBanksFees, href: }, TODO make this work\n    {\n      title: \"Draft's Invoice Value\",\n      value: lc.draftsInvoiceValue,\n      name: 'draftsInvoiceValue',\n      units: '%',\n      type: 'number'\n    },\n    {title: \"Credit Availability\", value: lc.creditAvailability, name: 'creditAvailability', type: 'text'},\n    {\n      title: \"Partial Shipment Allowed\",\n      value: lc.partialShipmentAllowed === true ? \"Yes\" : \"No\",\n      name: 'partialShipmentAllowed',\n      type: 'boolean'\n    },\n    {\n      title: \"Transshipment Allowed\",\n      value: lc.transshipmentAllowed === true ? \"Yes\" : \"No\",\n      name: 'transshipmentAllowed',\n      type: 'boolean'\n    },\n    {title: \"Merch Charge Location\", value: lc.merchChargeLocation, type: 'text', name: 'merchChargeLocation'},\n    {\n      title: \"Charge Transportation Location\",\n      value: lc.chargeTransportationLocation,\n      type: 'text',\n      name: 'chargeTransportationLocation'\n    },\n    {\n      title: \"Named Place of Destination\",\n      value: lc.namedPlaceOfDestination,\n      type: 'text',\n      name: 'namedPlaceOfDestination'\n    },\n    // {title: \"Doc Reception Notifees\", value: lc.docReceptionNotifees},\n    {\n      title: \"Client Arranging Insurance\",\n      value: lc.arrangingOwnInsurance === true ? \"Yes\" : \"No\",\n      name: 'arrangingOwnInsurance',\n      type: 'boolean'\n    },\n    {title: \"Other Instructions\", value: lc.otherInstructions, type: 'text', name: 'otherInstructions'},\n    {title: \"Merch Description\", value: lc.merchDescription, type: 'text', name: 'merchDescription'},\n    {\n      title: \"Transferable\", value: (lc.transferableToClient\n        ? `Yes, to ${lc.client.name}`\n        : (lc.transferableToBeneficiary\n          ? `Yes${lc.beneficiary && `, to ${lc.beneficiary.name}`}`\n          : \"No\")) // not editable for now\n    }\n  ];\n\n  // setup initial values\n  const initialValues = {latestVersionNotes: ''};\n  const allDetails = ([...details, ...extraDetails]);\n  allDetails.forEach(d => {\n    if (!d.name) {\n      return;\n    }\n    switch (d.type) {\n      case 'boolean':\n        if (d.value.toLowerCase() === 'yes') {\n          initialValues[d.name] = true;\n        } else if (d.value.toLowerCase() === 'no') {\n          initialValues[d.name] = false;\n        }\n        break;\n      default:\n        d.type && (initialValues[d.name] = d.value);\n    }\n  });\n\n  return (\n    <Panel title=\"Order Details\" expand={showExtra} setExpand={setShowExtra} editing={editing} setEditing={setEditing}\n           canEdit={canEdit}>\n      <Formik\n        initialValues={initialValues}\n        onSubmit={(values, {setSubmitting}) => {\n          setSubmitting(true);\n          const {latestVersionNotes, ...lcValues} = values;\n          const newLc = {};\n          Object.entries(lcValues).forEach(pair => {\n            const [k, v] = pair;\n            if (v !== initialValues[k]) {\n              newLc[k] = v;\n            }\n          });\n          makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n            lc: newLc, latestVersionNotes,\n          }).then(() => {\n            setSubmitting(false);\n            refreshLc();\n            setEditing(false);\n          })\n        }}\n      >\n        {() => (<div>\n            <CreditOverflowPopup\n              setModal={setModal} modal={modal} setEditing={setEditing}\n              lc={lc} refreshLc={refreshLc} totalCredit={totalCredit}/>\n            <Form>\n              {editing && <SubmitSection/>}\n              <div style={{display: 'flex'}}>\n                <ODColumn>\n                  {details.slice(0, details.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                  {showExtra && extraDetails.slice(0, extraDetails.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                </ODColumn>\n                <ODColumn>\n                  {details.slice(details.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                  {showExtra && extraDetails.slice(extraDetails.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                </ODColumn>\n              </div>\n            </Form>\n          </div>\n        )}\n      </Formik>\n    </Panel>\n  );\n};\n\nconst scrollToAndHighlight = (questionKey) => {\n  const selector = `[id=\"${questionKey}\"]`;\n  let parentElement = document.querySelector(selector);\n  const originalBackgroundColor = window.getComputedStyle(parentElement).backgroundColor;\n  const changeQuestionBackgroundTemp = () => {\n    parentElement.animate({backgroundColor: [\"lightblue\", originalBackgroundColor]}, 1000);\n  };\n  let scrollTimeout;\n  const scrollHandler = () => {\n    clearTimeout(scrollTimeout);\n    scrollTimeout = setTimeout(() => {\n      window.removeEventListener(\"scroll\", scrollHandler);\n      changeQuestionBackgroundTemp();\n      parentElement.focus();\n    }, 20);\n  };\n  window.addEventListener(\"scroll\", scrollHandler);\n  parentElement.scrollIntoView({behavior: \"smooth\", block: \"center\"});\n};\n\nconst usePrevious = value => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\nconst CreditOverflowPopup = ({lc, modal, setModal, refreshLc, setEditing, totalCredit}) => {\n  const [selectedButtonIndices, setSelectedButtonIndex] = useState({0: true, 1: false});\n  const prevSelectedButtonIndices = usePrevious(selectedButtonIndices);\n  const approvedCredit = lc.client.approvedCredit.filter(model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt\n    || 0;\n  const minimumIncrease = (parseFloat(totalCredit) + parseFloat(lc.creditAmt) - parseFloat(lc.cashSecure) - parseFloat(\n    approvedCredit)).toString();\n  const [increaseApprovedCreditValue, setIncreaseApprovedCreditValue] = useState(minimumIncrease);\n  const [requestMoreCashValue, setRequestMoreCashValue] = useState(minimumIncrease);\n  const [error, setError] = useState(\"\");\n  const [submissionAttempts, setSubmissionAttempts] = useState(0);\n  const increaseApprovedCreditRef = useRef(null);\n  const requestMoreCashRef = useRef(null);\n  const {setFieldValue, values} = useFormikContext();\n  const overflow = -(parseFloat(approvedCredit) - parseFloat(totalCredit) -\n    parseFloat(lc.creditAmt) + parseFloat(lc.cashSecure));\n\n  useEffect(() => {\n    handleError();\n  }, [increaseApprovedCreditValue, requestMoreCashValue]);\n\n  useEffect(() => {\n    if (!_.isEqual(selectedButtonIndices, prevSelectedButtonIndices)) {\n      handleError();\n      if (selectedButtonIndices[0] && selectedButtonIndices[1]) {\n        if (prevSelectedButtonIndices[0]) {\n          requestMoreCashRef.current && requestMoreCashRef.current.focus();\n        } else if (prevSelectedButtonIndices[1]) {\n          increaseApprovedCreditRef.current && increaseApprovedCreditRef.current.focus();\n        }\n      } else if (selectedButtonIndices[0]) {\n        increaseApprovedCreditRef.current && increaseApprovedCreditRef.current.focus();\n      } else if (selectedButtonIndices[1]) {\n        requestMoreCashRef.current && requestMoreCashRef.current.focus();\n      }\n    }\n  });\n\n  const handleError = () => {\n    if (selectedButtonIndices[0] && selectedButtonIndices[1] && parseFloat(increaseApprovedCreditValue) + parseFloat(\n      requestMoreCashValue) < parseFloat(minimumIncrease)) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    } else if (selectedButtonIndices[0] && !selectedButtonIndices[1] && parseFloat(increaseApprovedCreditValue)\n      < parseFloat(minimumIncrease)) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    } else if (selectedButtonIndices[1] && !selectedButtonIndices[0] && parseFloat(requestMoreCashValue) < parseFloat(\n      minimumIncrease)) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    } else if (!selectedButtonIndices[0] && !selectedButtonIndices[1]) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    }\n    setError(\"\");\n    return false;\n  };\n\n  const onSelect = async () => {\n    setSubmissionAttempts(submissionAttempts + 1);\n    const error = handleError();\n    if (!error && selectedButtonIndices[0]) {\n      await makeAPIRequest(`/bank/${lc.issuer.id}/business/${lc.client.id}/approved_credit/`, \"PUT\",\n        {approvedCreditAmt: parseFloat(increaseApprovedCreditValue) + parseFloat(approvedCredit)});\n      refreshLc();\n      setModal(false);\n    }\n    if (!error && selectedButtonIndices[1]) {\n      await setEditing(true);\n      await setModal(false);\n      setFieldValue(\"cashSecure\", parseFloat(requestMoreCashValue) + parseFloat(lc.cashSecure));\n      setFieldValue(\"latestVersionNotes\",\n        `Please increase cash secured amount.${values.latestVersionNotes && \" \" + values.latestVersionNotes}`);\n      scrollToAndHighlight(\"cashSecure\");\n    }\n  };\n\n  return (\n    <Modal containerStyle={{width: \"55%\"}} show={modal === \"creditOverflow\"} title={\"Credit Overflow\"}\n           error={submissionAttempts > 0 && error} onCancel={() => setModal(false)}\n           selectDisabled={submissionAttempts > 0 && error} onSelect={onSelect}>\n      <div>\n        Approving this LC will exceed the current approved credit ({approvedCredit}) for {get(lc,\n        \"client.name\")} by {overflow}.\n        <Subtitle>Check all that apply.</Subtitle>\n        <div style={{flexDirection: \"row\", display: \"flex\", paddingTop: 20, paddingBottom: 20}}>\n          <StyledButton\n            nested style={{width: 230, justifyContent: \"center\"}}\n            onClick={() => setSelectedButtonIndex({...selectedButtonIndices, 0: !selectedButtonIndices[0]})}\n            selected={selectedButtonIndices[0]}>\n            Increase Approved Credit By</StyledButton>\n          <StyledPopupInput\n            ref={increaseApprovedCreditRef} value={increaseApprovedCreditValue} type={\"number\"}\n            onChange={({target}) => setIncreaseApprovedCreditValue(target.value)}\n            style={{marginLeft: 10, visibility: selectedButtonIndices[0] ? \"visible\" : \"hidden\"}}/>\n        </div>\n        <div style={{flexDirection: \"row\", display: \"flex\", paddingBottom: 20}}>\n          <StyledButton\n            nested style={{width: 230, justifyContent: \"center\"}}\n            onClick={() => setSelectedButtonIndex({...selectedButtonIndices, 1: !selectedButtonIndices[1]})}\n            selected={selectedButtonIndices[1]}>\n            Request More Secured Cash</StyledButton>\n          <StyledPopupInput\n            ref={requestMoreCashRef} value={requestMoreCashValue} type={\"number\"}\n            onChange={({target}) => setRequestMoreCashValue(target.value)}\n            style={{marginLeft: 10, visibility: selectedButtonIndices[1] ? \"visible\" : \"hidden\"}}/>\n        </div>\n      </div>\n    </Modal>\n  )\n};\n\nconst StyledFormInput = styled.textarea`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-height: 100px;\n  font-size: 16px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst Comments = ({lc, setLc, comments, userType}) => {\n  const [modal, setModal] = useState(false);\n  const [response, setResponse] = useState(\"\");\n\n  const onRespond = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n      lc: {},\n      comment: {action: \"responded to the issuer\", message: response}\n    }).then(data => setLc(data.updatedLc));\n    setModal(false);\n  };\n\n  // TODO this should be a backend thing\n  comments = comments.filter(comment => comment[userType + \"Viewable\"]);\n  return (\n    <Panel title={\"Comments\"}>\n      <Modal selectButton={\"Respond\"} show={modal} onCancel={() => setModal(false)}\n             title={\"Respond to Comment\"} onSelect={onRespond}>\n        <div>\n          On {moment(modal.date).format(\"dddd, MMMM Do YYYY [at] h:mm a\")}, {userType === modal.authorType ? \"you\"\n          : `the ${modal.authorType}`} {modal.action}:\n          <div style={{paddingTop: 5, fontStyle: \"italic\", color: \"#808080\"}}>\n            \"{modal.message}\"\n          </div>\n        </div>\n        <div style={{paddingTop: 40}}>Response:</div>\n        <StyledFormInput value={response} onChange={({target}) => setResponse(target.value)}/>\n      </Modal>\n      {comments?.length ?\n        comments.map((comment, commentIndex) =>\n          <div style={commentIndex > 0 ? {paddingTop: 40} : null} key={comment.id}>\n            On {moment(comment.date).format(\"dddd, MMMM Do YYYY [at] h:mm a\")}, {userType === comment.authorType ? \"you\"\n            : `the ${comment.authorType}`} {comment.action}:\n            <div style={{paddingTop: 5, fontStyle: \"italic\", color: \"#808080\"}}>\n              \"{comment.message}\"\n            </div>\n            {comment.respondable === userType &&\n            <div style={{textAlign: \"end\"}}>\n              <Button onClick={() => setModal(comment)}>Respond</Button>\n            </div>}\n          </div>\n        )\n        : \"No comments to show.\"}\n    </Panel>\n  )\n};\n\nconst LCViewPage = ({match}) => {\n  useAuthentication(`/bank/lcs/${match.params.lcid}`);\n  const [user] = useContext(UserContext);\n  const [modal, setModal] = useState(\"\");\n  const [lc, setLc] = useState(null);\n  const [totalCredit, setTotalCredit] = useState();\n  let userType = 'unknown';\n  if (get(user, 'bank')) {\n    userType = 'issuer';\n  } else if (get(user, 'business')) {\n    if (get(user, 'business.id') === get(lc, 'client.id')) {\n      userType = 'client';\n    } else if (get(user, 'business.id') === get(lc, 'beneficiary.id')) {\n      userType = 'beneficiary';\n    }\n  }\n  const live = get(lc, 'beneficiaryApproved') && get(lc, 'clientApproved') && get(lc, 'issuerApproved');\n  // get state of order\n  const a = {\n    issuer: get(lc, 'issuerApproved'),\n    client: get(lc, 'clientApproved'),\n    beneficiary: get(lc, 'beneficiaryApproved'),\n    issuerRejected: get(lc, 'ofacBankApproval') === 'rejected' || get(lc, 'sanctionBankApproval') === 'rejected'\n  };\n  let stateName = 'all';\n  if (a.issuerRejected) {\n    stateName = 'issuerRejected';\n  } else if (a.issuer === true) {\n    if (a.client === true) {\n      stateName = 'clientIssuer';\n    } else if (a.beneficiary === true) {\n      stateName = 'issuerBene';\n    } else {\n      stateName = 'issuer';\n    }\n  } else if (a.client === true) {\n    if (!a.beneficiary && !a.issuer) {\n      stateName = 'client';\n    }\n  } else if (a.beneficiary === true) {\n    if (!a.client && !a.issuer) {\n      stateName = 'bene';\n    }\n  }\n\n  // TODO change API to just return the new LC after we update it\n  const refreshLc = () => {\n    makeAPIRequest(`/lc/${match.params.lcid}/`)\n    .then(json => userType === \"issuer\" ? makeAPIRequest(`/lc/total_credit/${json.client.id}/`).then(totalCredit => {\n      setTotalCredit(totalCredit);\n      setLc(json)\n    }) : setLc(json));\n  };\n\n  useEffect(() => {\n    if (user) {\n      refreshLc();\n    }\n  }, [match.params.lcid, user?.id]);\n\n  return (\n    <LCView lc={lc}>\n      <TwoColumnHolder>\n        <LeftColumn>\n          <OrderStatus lc={lc} totalCredit={totalCredit} userType={userType} setLc={setLc} live={live}\n                       stateName={stateName} setModal={setModal}/>\n          {get(lc, 'latestVersionNotes') && <OrderNotes lc={lc}/>}\n          <ClientInformation lc={lc}/>\n          <Comments lc={lc} setLc={setLc} comments={lc?.comments} userType={userType}/>\n        </LeftColumn>\n        <RightColumn>\n          {userType === 'issuer' && <Financials lc={lc} totalCredit={totalCredit} setModal={setModal}/>}\n          <OrderDetails lc={lc} setLc={setLc} refreshLc={refreshLc} stateName={stateName}\n                        userType={userType} live={live} modal={modal} setModal={setModal} totalCredit={totalCredit}/>\n          {userType === 'issuer' && <ComplianceChecks lc={lc} userType={userType} live={live} setLc={setLc}/>}\n          <DocumentaryRequirements lc={lc} userType={userType} live={live} refreshLc={refreshLc}/>\n        </RightColumn>\n      </TwoColumnHolder>\n    </LCView>\n  )\n\n};\n\nexport default LCViewPage;\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg).matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BankEmployeeSignUpPage = ({ history, match }) => {\n  const setUser = useContext(UserContext)[1];\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle=\"Create your account for lightning-fast LC processing.\"\n    >\n    <Formik\n      initialValues={{\n        name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/bank/${match.params.bankid}/register/`, \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, bank: json.usersEmployer });\n            history.push(\"/bank/invite\");\n          })\n          .then(() => setSubmitting(false));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n<Button showArrow disabled={isSubmitting}>\n  Sign Up\n</Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BankEmployeeSignUpPage;","import React, {useEffect, useRef, useState} from \"react\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faChevronDown, faCheck} from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\nimport {Field} from \"formik\";\n\nconst disabledBackgroundColor = `#c3c1c3`;\nconst disabledColor = `black`;\n\nconst Option = styled.div`\n  padding: 10px;\n  overflow-wrap: break-word;\n  color: white;\n  user-select: none;\n  display: flex;\n  ${props => props.highlighted && `background-color: #1772fb;`}\n  &:hover {\n    background-color: #1772fb;\n  }\n`;\n\nconst StyledFormInput = styled(Field)`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nexport const Dropdown = ({ items, onChange, selectedIndex }) => {\n  const [menu, setMenu] = useState(false);\n\n  return (\n      <OutsideAlerter style={{position: \"relative\", flex: 1, flexDirection: \"column\"}} onOutsideClick={() => setMenu(false)}>\n        <div>\n          <div style={{display: \"flex\"}} onClick={() => setMenu(!menu)}>\n            <div style={{borderRight: \"1px solid #cdcdcd\", padding: \"10px\", flex: 1, wordBreak: \"break-word\"}}>{items[selectedIndex]}</div>\n            <div style={{width: \"20px\", alignSelf: \"center\", paddingLeft: \"5px\"}}>\n              <FontAwesomeIcon\n                  icon={faChevronDown}\n                  size=\"lg\"\n                  color=\"#000\"\n              />\n            </div>\n          </div>\n          {menu && <div style={{position: \"absolute\", width: \"100%\", backgroundColor: \"black\", maxHeight: \"300px\", overflowY: \"scroll\", zIndex: 1}}>\n            {items.map(item => <Option key={item} onClick={() => {\n              setMenu(false);\n              onChange && onChange(item);\n            }}><FontAwesomeIcon icon={faCheck} color={\"#fff\"} style={{width: \"20px\", visibility: items[selectedIndex] === item ? \"visible\" : \"hidden\"}}/>\n            <div style={{flex: 1}}>{item}</div></Option>)}\n          </div>}\n        </div>\n      </OutsideAlerter>\n  )\n};\n\nexport const SearchableSelect = ({ items, onSelect, questionKey, handleChange }) => {\n  const [menu, setMenu] = useState(false);\n  const [highlightedItemIndex, setHighlightedItemIndex] = useState(-1);\n\n  useEffect(() => {\n    setHighlightedItemIndex(-1);\n  }, [items]);\n\n  const onKeyDown = event => {\n    if (event.keyCode === 40 && highlightedItemIndex + 1 < items.length) {\n      event.preventDefault();\n      setHighlightedItemIndex(highlightedItemIndex + 1);\n    } else if (event.keyCode === 38 && highlightedItemIndex - 1 >= 0) {\n      event.preventDefault();\n      setHighlightedItemIndex(highlightedItemIndex - 1);\n    } else if (event.keyCode === 13 && highlightedItemIndex > -1) {\n      event.preventDefault();\n      setMenu(false);\n      onSelect(items[highlightedItemIndex]);\n    }\n  };\n\n  const onChange = event => {\n    setMenu(true);\n    handleChange(event);\n  };\n\n  const onClick = item => {\n    setMenu(false);\n    onSelect && onSelect(item);\n  };\n\n  return (\n      <OutsideAlerter style={{position: \"relative\", flex: 1, flexDirection: \"column\"}} onOutsideClick={() => setMenu(false)}>\n        <div style={{display: \"flex\"}} onClick={() => setMenu(!menu)}>\n          <StyledFormInput autoComplete={\"off\"} onChange={onChange} type={\"text\"} name={questionKey} onKeyDown={onKeyDown}/>\n        </div>\n        {menu && <div style={{\n          position: \"absolute\",\n          width: \"100%\",\n          backgroundColor: \"black\",\n          maxHeight: \"300px\",\n          overflowY: \"scroll\",\n          zIndex: 1}}>\n          {items !== null ? items.map((item, itemIndex) =>\n              <Option highlighted={highlightedItemIndex === itemIndex}\n                      key={item.id} onMouseDown={() => onClick(item)}>\n                <div style={{flex: 1}}>{item.name}</div></Option>) : <div></div>}\n        </div>}\n      </OutsideAlerter>\n  )\n};\n\nexport const SearchableSelectHTS = ({ items, onSelect, questionKey, handleChange }) => {\n  const [menu, setMenu] = useState(false);\n  const [highlightedItemIndex, setHighlightedItemIndex] = useState(-1);\n\n  useEffect(() => {\n    setHighlightedItemIndex(-1);\n  }, [items]);\n\n  const onKeyDown = event => {\n    if (event.keyCode === 40 && highlightedItemIndex + 1 < items.length) {\n      event.preventDefault();\n      setHighlightedItemIndex(highlightedItemIndex + 1);\n    } else if (event.keyCode === 38 && highlightedItemIndex - 1 >= 0) {\n      event.preventDefault();\n      setHighlightedItemIndex(highlightedItemIndex - 1);\n    } else if (event.keyCode === 13 && highlightedItemIndex > -1) {\n      event.preventDefault();\n      setMenu(false);\n      onSelect(items[highlightedItemIndex]);\n    }\n  };\n\n  const onChange = event => {\n    setMenu(true);\n    handleChange(event);\n  };\n\n  const onClick = (hts, description) => {\n    setMenu(false);\n    onSelect && onSelect(hts, description);\n  };\n\n  return (\n      <OutsideAlerter style={{position: \"relative\", flex: 1, flexDirection: \"column\"}} onOutsideClick={() => setMenu(false)}>\n        <div style={{display: \"flex\"}} onClick={() => setMenu(!menu)}>\n          <StyledFormInput autoComplete={\"off\"} onChange={onChange} type={\"text\"} name={questionKey} onKeyDown={onKeyDown}/>\n        </div>\n        {menu && <div style={{\n          position: \"absolute\",\n          width: \"100%\",\n          backgroundColor: \"white\",\n          maxHeight: \"300px\",\n          overflowY: \"scroll\",\n          zIndex: 1}}>\n          {items !== null ? items.map((item, itemIndex) =>\n              <Option highlighted={highlightedItemIndex === itemIndex}\n                      key={item.id} onMouseDown={() => onClick(item.htsno, item.description)}>\n                <div style={{flex: 1, color: \"black\"}}>{item.description}</div></Option>) : <div></div>}\n        </div>}\n      </OutsideAlerter>\n  )\n};\n\n/**\n * Hook that alerts clicks outside of the passed ref\n */\nconst useOutsideAlerter = (ref, onOutsideClick) => {\n  useEffect(() => {\n    /**\n     * Alert if clicked on outside of element\n     */\n    function handleClickOutside(event) {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onOutsideClick();\n      }\n    }\n    // Bind the event listener\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [ref]);\n};\n\n/**\n * Component that alerts if you click outside of it\n */\nexport const OutsideAlerter = (props) => {\n  const wrapperRef = useRef(null);\n  useOutsideAlerter(wrapperRef, props.onOutsideClick);\n\n  return <div ref={wrapperRef} style={props.style}>{props.children}</div>;\n};\n","import React, {useEffect, useRef, useState} from \"react\";\n\nexport const ResizableScreenDiv = ({style, children, minTop}) => {\n  const containerRef = useRef(null);\n  const [top, setTop] = useState(0);\n\n  useEffect(() => {\n    setTop(containerRef.current.getBoundingClientRect().top);\n    const scrollHandler = () => setTop(containerRef.current.getBoundingClientRect().top);\n    window.addEventListener(\"scroll\", scrollHandler);\n    return () => window.removeEventListener(\"scroll\", scrollHandler);\n  }, []);\n\n  return (\n      <div ref={containerRef} style={{...style, height: `calc(100vh - ${Math.max(top, minTop === undefined ? 40 : minTop)}px)`}}>\n        {children}\n      </div>\n  )\n};\n","import React, { useEffect, useState } from 'react';\nimport { Prompt, useHistory } from 'react-router-dom';\nimport {Modal} from './Modal';\n\nexport const RouteBlockingModal = ({when}) => {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [lastLocation, setLastLocation] = useState(null);\n  const [confirmedNavigation, setConfirmedNavigation] = useState(false);\n  const history = useHistory();\n\n  const closeModal = () => {\n    setModalVisible(false);\n  };\n  const handleBlockedNavigation = (nextLocation) => {\n    if (!confirmedNavigation) {\n      setModalVisible(true);\n      setLastLocation(nextLocation);\n      return false;\n    }\n    return true;\n  };\n\n  const handleConfirmNavigationClick = () => {\n    setModalVisible(false);\n    setConfirmedNavigation(true);\n  };\n\n  useEffect(() => {\n    if (confirmedNavigation && lastLocation) {\n      // Navigate to the previous blocked location with your navigate function\n      history.push(lastLocation.pathname);\n    }\n  }, [confirmedNavigation, lastLocation]);\n\n  return (\n      <div>\n        <Prompt when={when} message={handleBlockedNavigation}/>\n        <Modal\n            show={modalVisible}\n            title=\"Exit without saving?\"\n            selectButton=\"Confirm\"\n            cancelButton={\"Dismiss\"}\n            onCancel={closeModal}\n            onSelect={handleConfirmNavigationClick}>\n          <div style={{paddingBottom: 15}}>You have unsaved changes. Are you sure you want to leave without saving?</div>\n        </Modal>\n      </div>\n  );\n};\n","import React, {useContext, useEffect, useRef, useState} from 'react';\nimport styled from 'styled-components';\nimport _ from 'lodash'\nimport {Field, Form, Formik, useField, useFormikContext} from 'formik';\nimport {array, boolean, date, number, object, string} from 'yup';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faCheckSquare, faTimes, faTrash} from \"@fortawesome/free-solid-svg-icons\";\n\nimport BasicLayout from '../../components/BasicLayout';\nimport {makeAPIRequest, objectToCamelCase, objectToSnakeCase} from '../../utils/api';\nimport Button from \"../../components/ui/Button\";\nimport StatusMessage from \"../../components/ui/StatusMessage\";\nimport {useAuthentication, UserContext} from '../../utils/auth';\n\nimport config from '../../config';\nimport {Dropdown, SearchableSelect, SearchableSelectHTS} from \"../../components/ui/Dropdown\";\nimport {Modal} from \"../../components/ui/Modal\";\nimport {ResizableScreenDiv} from \"../../components/ui/ResizableScreenDiv\";\nimport {RouteBlockingModal} from \"../../components/ui/RouteBlockingModal\";\n\nconst disabledBackgroundColor = `#c3c1c3`;\nconst disabledColor = `black`;\n\nconst InputWrapper = styled.div`\n  max-width: 700px;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border-radius: 10px;\n  border: 1px solid #cdcdcd;\n  transition: border 0.3s;\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  \n  ${props => !props.disabled && `&:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n`;\n\nconst QuestionText = styled.h3`\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.25;\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst ClickableText = styled.span`\n  color: blue;\n  cursor: pointer;\n  &:hover {\n    color: #1772fb;\n  }\n`;\n\nconst Subtitle = styled.div`\n  margin-top: 15px;\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst SectionSubtitle = styled.div`\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst Asterisk = styled.span`\n  color: #dc3545;\n  font-size: 16px;\n`;\n\nconst StyledFormInput = styled(Field)`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst StyledInput = styled.input`\n  padding: 10px 0 5px;\n  flex: 1;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst StyledDiv = styled.div`\n  padding: 10px 0 5px;\n  flex: 1;\n  height: 18px;\n  border: none;\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  margin-top: 15px;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst NestedButtonWrapper = styled.div`\n  padding-left: 10px;\n  flex: 1;\n  display: flex;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst ButtonVerticalWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 15px;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  width: 95%;\n  > :first-child {\n    border-top: thin solid ${config.accentColor};\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : props.disabled ? disabledBackgroundColor\n  : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : props.disabled ? disabledColor : config.accentColor};\n  border: 1px solid ${props => props.disabled ? disabledColor : config.accentColor};\n  font-size: 16px;\n  ${props => !props.disabled && `cursor: pointer;`}\n  margin: ${props => props.nested ? `0px` : `10px 0;`}\n  ${props => !props.fitWidth && `max-width: 45%;`}\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledSection = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 1px;\n  padding: 10px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  text-align: left;\n  width: 100%;\n  border-width: thin;\n  border-style: solid;\n  border-color: ${config.accentColor};\n  border-top: none;\n`;\n\nconst scrollToAndHighlight = (questionKey) => {\n  const selector = `[id=\"${questionKey}\"]`;\n  let parentElement = document.querySelector(selector);\n  const originalBackgroundColor = window.getComputedStyle(parentElement).backgroundColor;\n  const changeQuestionBackgroundTemp = () => {\n    parentElement.animate({backgroundColor: [\"lightblue\", originalBackgroundColor]}, 1000);\n  };\n\n  // if the element is on the screen\n  if (window.scrollY <= parentElement.offsetTop && window.scrollY + document.documentElement.clientHeight >=\n    parentElement.offsetTop + parentElement.offsetHeight) {\n    changeQuestionBackgroundTemp();\n  } else {\n    let scrollTimeout;\n    const scrollHandler = () => {\n      clearTimeout(scrollTimeout);\n      scrollTimeout = setTimeout(() => {\n        window.removeEventListener(\"scroll\", scrollHandler);\n        changeQuestionBackgroundTemp()\n      }, 20);\n    };\n    window.addEventListener(\"scroll\", scrollHandler);\n    parentElement.scrollIntoView({behavior: \"smooth\", block: \"nearest\"});\n  }\n};\n\nconst BasicInput = ({question, children, subtitle}) => {\n  const [, meta] = useField(question.key);\n  const {error, touched} = meta;\n  return (\n    <InputWrapper id={question.key} disabled={question.disabledTooltip}>\n      <QuestionText disabled={question.disabledTooltip}>{question.questionText}{question.required ? (\n        <Asterisk> *</Asterisk>) : null}</QuestionText>\n      {!question.disabledTooltip && subtitle && <Subtitle>{subtitle}</Subtitle>}\n      {question.disabledTooltip && <Subtitle onClick={() => scrollToAndHighlight(\n        question.disabledTooltip.parentKey)}>{question.disabledTooltip.text}</Subtitle>}\n      {error && touched && <Subtitle style={{color: '#dc3545'}}>{typeof error !== 'object' ? error : null}</Subtitle>}\n      {children}\n    </InputWrapper>\n  )\n};\n\nconst TextInput = ({question, status, setStatus, lcApp, setAppliedTemplate, appliedTemplate}) => {\n  const {values, setValues, initialValues, handleChange, setFieldValue} = useFormikContext();\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n  const autofillTemplateTimeout = useRef();\n  const beneficiaryAutocompleteTimeout = useRef(null);\n\n  const [suggested, setSuggested] = useState([]);\n\n  useEffect(() => {\n    if (status.status !== \"success\" && !appliedTemplate && (question.key === \"beneficiary_name\" || question.key\n      === \"purchased_item\")) {\n      clearTimeout(autofillTemplateTimeout.current);\n      const timeoutId = setTimeout(() => {\n        const params = {};\n        if (values.beneficiary_name) {\n          params.beneficiary_name = values.beneficiary_name;\n        }\n        if (values.purchased_item) {\n          params.purchased_item = values.purchased_item;\n        }\n        const paramString = Object.entries(params).map(([key, value]) => `${key}=${value}`).join(\"&\");\n        if (paramString) {\n          makeAPIRequest(`/lc/digital_app_templates/?${paramString}`).then(result => {\n            if (result.length) {\n              const Component = (\n                <div>\n                  <div style={{display: \"flex\"}}>\n                    <span style={{flex: 1}}/>\n                    <StyledIcon onClick={() => setStatus({status: null, message: \"\"})}\n                                icon={faTimes} style={{color: \"black\"}}/>\n                  </div>\n                  <div style={{color: \"black\"}}>Load Template with Similar Answers:</div>\n                  <div style={{paddingTop: 10}}>\n                    {result.map(template => (\n                      <div key={template.id} style={{paddingTop: 5}}>\n                        <ClickableText onClick={async () => {\n                          setStatus({status: null, message: \"\"});\n                          await loadTemplateAnswers({\n                            lcApp,\n                            selectedTemplate: template,\n                            values,\n                            initialValues,\n                            setValues,\n                            setAppliedTemplate,\n                            setStatus\n                          });\n                        }}>\n                          {template.templateName}\n                        </ClickableText></div>\n                    ))}\n                  </div>\n                </div>\n              );\n              setStatus({status: \"info\", message: Component});\n            } else {\n              setStatus({status: null, message: \"\"});\n            }\n          });\n        }\n      }, 500);\n      autofillTemplateTimeout.current = timeoutId;\n    }\n  }, [value]);\n\n  useEffect(() => {\n    if (question.key === \"beneficiary_name\") {\n      clearTimeout(beneficiaryAutocompleteTimeout.current);\n      const timeoutId = setTimeout(() =>\n        makeAPIRequest(`/business/autocomplete/?string=${value}`)\n        .then(suggested => setSuggested(suggested)), 400);\n      beneficiaryAutocompleteTimeout.current = timeoutId;\n    }\n  }, [value]);\n\n  const onSelect = async item => {\n    await setFieldValue(\"beneficiary_address\", item.address);\n    await setValue(item.name);\n  };\n\n  const inputComponent = question.key === \"beneficiary_name\" ?\n    <SearchableSelect\n      onSelect={onSelect}\n      items={suggested}\n      questionKey={question.key}\n      handleChange={handleChange}\n    /> :\n    <StyledFormInput type=\"text\" name={question.key}/>;\n\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && inputComponent}\n    </BasicInput>\n  );\n};\n\nconst DropdownInput = ({question}) => {\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n\n  return (\n    <BasicInput question={question}>\n      <Dropdown items={question.options} onChange={item => setValue(item)}\n                selectedIndex={question.options.indexOf(value)}/>\n    </BasicInput>\n  )\n};\n\nconst NumberInput = ({question}) => {\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <StyledFormInput type=\"number\" name={question.key}/>}\n    </BasicInput>\n  )\n};\n\nconst YesNoInput = ({question}) => {\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <ButtonWrapper style={{justifyContent: 'center'}}>\n        <StyledButton onClick={handleClick(true)} selected={value === true}>Yes</StyledButton>\n        <StyledButton onClick={handleClick(false)} selected={value === false}>No</StyledButton>\n      </ButtonWrapper>}\n    </BasicInput>\n  )\n};\n\nconst HTSInput = ({question}) => {\n  const {handleChange, setFieldValue} = useFormikContext();\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n  const [suggested, setSuggested] = useState([]);\n  const beneficiaryAutocompleteTimeout = useRef(null);\n\n  const search_HTS = async () => {\n    clearTimeout(beneficiaryAutocompleteTimeout.current);\n    const timeoutId = setTimeout(() =>\n      fetch(`https://peaceful-journey-01245.herokuapp.com/https://hts.usitc.gov/api/search?query=${value}`, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n      }).then((response) => {\n        return response.json()\n      }).then((json) => {\n        console.log(json);\n        setSuggested(json.results);\n      }).catch(() => {\n        setSuggested([]);\n      }), 400);\n    beneficiaryAutocompleteTimeout.current = timeoutId;\n  };\n\n  const onSelect = async (hts, description) => {\n    await setFieldValue(\"hts_code\", hts);\n    await setValue(description);\n  };\n\n  const inputComponent =\n    <SearchableSelectHTS\n      onSelect={onSelect}\n      items={suggested}\n      questionKey={question.key}\n      handleChange={handleChange}\n    />;\n\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && inputComponent}\n      <ButtonWrapper>\n        <Button onClick={search_HTS} type={\"button\"}>Search HTS Code</Button>\n      </ButtonWrapper>\n      <QuestionText style={{paddingTop: 10}}>OR fill out manually below</QuestionText>\n    </BasicInput>\n  );\n};\n\nconst AllRadiosWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst RadioInput = ({question}) => {\n  const options = question.options;\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <AllRadiosWrapper>\n        <ButtonWrapper>\n          {options && options.map((opt) => (\n            <StyledButton onClick={handleClick(opt)} selected={value === opt} key={opt}>{opt}</StyledButton>\n          ))}\n        </ButtonWrapper>\n      </AllRadiosWrapper>}\n    </BasicInput>\n  )\n};\n\nconst DateInput = ({question}) => {\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <StyledFormInput type=\"date\" name={question.key}/>}\n    </BasicInput>\n  )\n};\n\nconst AllCheckboxesWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst CheckboxInput = ({question}) => {\n  const options = question.options;\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    const i = value.indexOf(val);\n    if (i !== -1) {\n      setValue(value.slice(0, i).concat(value.slice(i + 1)));\n    } else {\n      setValue(value.concat([val]));\n    }\n  };\n\n  return (\n    <BasicInput disabled={question.disabledTooltip} question={question} subtitle=\"Check all that apply.\">\n      {!question.disabledTooltip && <AllCheckboxesWrapper>\n        <ButtonWrapper>\n          {options && options.map((opt) => (\n            <StyledButton disabled={question.disabledTooltip} onClick={handleClick(opt)}\n                          selected={value.indexOf(opt) !== -1} key={opt}>\n              {value.indexOf(opt) !== -1 && <FontAwesomeIcon icon={faCheckSquare} style={{marginRight: '10px'}}/>}\n              {opt}\n            </StyledButton>\n          ))}\n        </ButtonWrapper>\n      </AllCheckboxesWrapper>}\n    </BasicInput>\n  )\n};\n\nconst DocReqFieldWrapper = styled.div`\n  margin: 10px 0;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #cdcdcd;\n  > :first-child {\n    width: 130px;\n    font-weight: 300;\n    border-right: 1px solid #cdcdcd;\n    padding: 10px 10px 5px;\n    text-align: right;\n  }\n`;\n\nconst StyledDocReqField = styled(Field)`\n  padding: 10px 10px 5px;\n  font-size: 16px;\n  border: none;\n  flex: 1;\n  width: calc(100% - 130px);\n  line-height: 1em;\n  color: #000;\n  background-color: #fff;\n`;\n\nconst StyledDocReqDiv = styled.div`\n  padding: 10px 10px 5px;\n  font-size: 16px;\n  border: none;\n  flex: 1;\n  width: calc(100% - 130px);\n  line-height: 1em;\n  color: #000;\n  background-color: #fff;\n  word-break: break-word;\n`;\n\nconst DocReqTitle = styled.h3`\n  text-transform: uppercase;\n  font-weight: 300;\n  letter-spacing: .1em;\n  ${props => props.disabled && `color: ${disabledColor};`}\n`;\n\nconst CommonNestedTypeComponent = ({question, keyName}) => {\n  const componentMap = {\n    text: <StyledDocReqField type={\"text\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n    number: <StyledDocReqField type={\"number\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n    decimal: <StyledDocReqField type={\"number\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n    date: <StyledDocReqField type={\"date\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n  };\n  return componentMap[question.type];\n};\n\nconst ObjectNestedTypeComponent = ({question, value, setValue}) => {\n  const componentMap = {\n    boolean: <NestedButtonWrapper>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue({...value, [question.key]: true})}\n                    selected={value[question.key] === true}>Yes</StyledButton>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue({...value, [question.key]: false})}\n                    selected={value[question.key] === false}>No</StyledButton>\n    </NestedButtonWrapper>,\n  };\n  return componentMap[question.type];\n};\n\nconst ObjectInput = ({question}) => {\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n\n  return (\n    <BasicInput question={question}>\n      {!question.disabledTooltip && question.children.map(child => {\n        const keyName = `${question.key}.${child.key}`;\n        return (\n          <DocReqFieldWrapper key={keyName}>\n            <span>{child.questionText}{child.required ? <Asterisk> *</Asterisk> : null}</span>\n            {CommonNestedTypeComponent({question: child, keyName}) ||\n            ObjectNestedTypeComponent({question: child, value, setValue})}\n          </DocReqFieldWrapper>\n        )\n      })}\n    </BasicInput>\n  )\n};\n\nconst ArrayNestedTypeComponent = ({question, parentQuestion, value, setValue, valueIndex, options}) => {\n  const keyName = `${parentQuestion.key}[${valueIndex}].${question.key}`;\n  const curVal = value[valueIndex][question.key];\n  const componentMap = {\n    boolean: <NestedButtonWrapper>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue(value.map((valObj, curInd) =>\n                      curInd === valueIndex ? {...valObj, [question.key]: true} : valObj))}\n                    selected={curVal}>Yes</StyledButton>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue(value.map((valObj, curInd) =>\n                      curInd === valueIndex ? {...valObj, [question.key]: false} : valObj))}\n                    selected={curVal}>No</StyledButton>\n    </NestedButtonWrapper>,\n    radio: !question.options && (valueIndex < value.length - 1 || options.length === 1) ?\n      <StyledDocReqDiv>{curVal}</StyledDocReqDiv> :\n      <Dropdown selectedIndex={options.indexOf(curVal)} items={options}\n                onChange={selected => setValue(value.map((valObj, curInd) =>\n                  curInd === valueIndex ? {...valObj, [question.key]: selected} : valObj))}/>\n  };\n  return componentMap[question.type];\n};\n\nconst StyledIcon = styled(FontAwesomeIcon)`\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst DocReqInput = ({question}) => {\n  const [, meta, helpers] = useField(question.key);\n  const {value} = meta;\n  const {setValue} = helpers;\n\n  const addDocument = () => {\n    const addition = {};\n    question.children.forEach(child => {\n      addition[child.key] = TYPE_TO_DEFAULT[child.type];\n      if (child.type === \"radio\") {\n        addition[child.key] = getOptions(child, true)[0];\n      }\n    });\n    setValue([...value, addition]);\n  };\n\n  const removeDocument = indexToRemove => {\n    setValue(value.filter((valObj, curInd) => curInd !== indexToRemove));\n  };\n\n  const getOptions = (childQuestion, includeLast) => {\n    if (childQuestion.options) {\n      return childQuestion.options;\n    } else if (question.options) {\n      const valueOptionsSet = new Set(value.filter((valObj, curInd) => includeLast ||\n        curInd < value.length - 1).map(valObj => valObj[childQuestion.key]));\n      return question.options.filter(option => !valueOptionsSet.has(option));\n    } else {\n      return null;\n    }\n  };\n\n  const name = question.settings?.name;\n\n  return (\n    <BasicInput question={question}>\n      {!question.disabledTooltip && value.map((obj, i) => {\n        return (\n          <div style={{margin: \"20px\"}} key={i}>\n            <DocReqTitle>{name ? name : \"Documentary Requirement\"} #{i + 1} <StyledIcon icon={faTrash}\n                                                                                        onClick={() => removeDocument(\n                                                                                          i)}/></DocReqTitle>\n            {question.children.map(child => {\n              const keyName = `${question.key}[${i}].${child.key}`;\n              return (\n                <DocReqFieldWrapper key={keyName}>\n                  <span>{child.questionText}{child.required ? <Asterisk> *</Asterisk> : null}</span>\n                  {CommonNestedTypeComponent({question: child, keyName}) ||\n                  ArrayNestedTypeComponent({\n                    question: child,\n                    parentQuestion: question,\n                    value,\n                    setValue,\n                    valueIndex: i,\n                    options: getOptions(child)\n                  })}\n                </DocReqFieldWrapper>)\n            })}\n          </div>\n        )\n      })}\n      {!question.disabledTooltip && <center style={{marginTop: '25px'}}>\n        <StyledButton disabled={question.options && question.options.length === value.length} type={\"button\"}\n                      onClick={addDocument}>Add {name ? name : \"Documentary Requirement\"}</StyledButton>\n      </center>}\n    </BasicInput>\n  )\n};\n\nconst contains = (option, answer) => {\n  if (option === \"*\") {\n    return answer.length;\n  } else if (answer && Array.isArray(answer)) {\n    return answer.some(piece => _.isEqual(piece, option));\n  } else {\n    return option === answer;\n  }\n};\n\nconst markDisabled = async ({questions, values, setLCApp, validateForm}) => {\n  let changed = false;\n  const questionsCopy = questions.map(q => ({...q}));\n  questionsCopy.filter(q => q.disabled).forEach(q => {\n    const dependency = JSON.parse(q.disabled);\n    for (let option of dependency.answer) {\n      if (contains(option, values[dependency.key])) {\n        const parentQuestion = questions.find(potential => potential.key === dependency.key);\n        changed = changed || !q.disabledTooltip;\n        const message = (<span style={{color: \"#58595A\"}}>This question is redundant based on your earlier\n        answer to <ClickableText>'{parentQuestion.questionText}'</ClickableText></span>);\n        q.disabledTooltip = {text: message, parentKey: parentQuestion.key};\n        return;\n      }\n    }\n    if (q.disabledTooltip) {\n      q.disabledTooltip = undefined;\n      changed = true;\n    }\n  });\n  if (changed) {\n    await setLCApp([...questionsCopy]);\n    validateForm();\n  }\n};\n\nconst findAndSetSectionsError = ({questions, errors, touched, setSectionsError}) => {\n  const erroredQuestions = questions.filter(q => errors[q.key]);\n  const erroredAndTouchedSections = erroredQuestions.filter(q => touched[q.key]).map(q => q.section);\n  setSectionsError(new Set(erroredAndTouchedSections));\n};\n\nconst scrollToFirstErrorOnSection = ({questions, errors, selectedSection}) => {\n  const erroredQuestions = questions.filter(q => errors[q.key]);\n  const erroredQuestionsOnSelectedSection = erroredQuestions.filter(q => q.section === selectedSection?.text);\n  if (erroredQuestionsOnSelectedSection.length) {\n    const selector = `[id=\"${erroredQuestionsOnSelectedSection[0].key}\"]`;\n    let errorElement = document.querySelector(selector);\n    errorElement.scrollIntoView({behavior: \"smooth\"});\n  } else {\n    window.scrollTo({top: 0, behavior: \"smooth\"});\n  }\n};\n\nconst ErrorFocus = (props) => {\n  let {isSubmitting, errors, touched, questions, selectedSection, setTouched, values} = props;\n\n  const prevErrors = usePrevious(errors);\n  const prevTouched = usePrevious(touched);\n  const prevValues = usePrevious(values);\n  const prevSelectedSection = usePrevious(selectedSection);\n  const prevIsSubmitting = usePrevious(isSubmitting);\n\n  const keyToEffect = {\n    scroll: scrollToFirstErrorOnSection,\n    sectionsErrors: findAndSetSectionsError,\n    markDisabled: markDisabled\n  };\n\n  useEffect(() => {\n    const effects = new Set();\n    if (!_.isEqual(selectedSection, prevSelectedSection)) {\n      touched = {...touched};\n      questions.forEach(q => {\n        if (q.section === prevSelectedSection?.text) {\n          touched[q.key] = true;\n        }\n      });\n      setTouched(touched);\n      effects.add(\"scroll\");\n    }\n    if (!_.isEqual(errors, prevErrors) || !_.isEqual(touched, prevTouched)) {\n      effects.add(\"sectionsErrors\");\n    }\n    if (!_.isEqual(values, prevValues)) {\n      effects.add(\"markDisabled\");\n    }\n    if (isSubmitting && !prevIsSubmitting) {\n      effects.add(\"sectionsErrors\");\n      effects.add(\"scroll\");\n    }\n    effects.forEach(effect => keyToEffect[effect](props));\n  });\n\n  return null;\n};\n\nconst usePrevious = value => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\nconst TYPE_TO_COMPONENT = {\n  text: TextInput,\n  decimal: NumberInput,\n  number: NumberInput,\n  boolean: YesNoInput,\n  hts: HTSInput,\n  radio: RadioInput,\n  date: DateInput,\n  checkbox: CheckboxInput,\n  object: ObjectInput,\n  array_of_objs: DocReqInput,\n  dropdown: DropdownInput\n};\n\nconst createDefault = question => {\n  let initial = question.initialValue;\n  if (question.type === \"object\") {\n    initial = initial || {};\n    question.children.forEach(child => {\n      initial[child.key] = child.initialValue || TYPE_TO_DEFAULT[child.type];\n    });\n  } else if (!initial) {\n    initial = TYPE_TO_DEFAULT[question.type];\n  }\n  return initial;\n};\n\nconst TYPE_TO_DEFAULT = {\n  text: \"\",\n  decimal: 0,\n  number: 0,\n  boolean: null,\n  radio: null,\n  date: (new Date()).toISOString().slice(0, 10),\n  checkbox: [],\n  object: {},\n  array_of_objs: [],\n  dropdown: \"\"\n};\n\nconst REQUIRED_FIELD_MSG = \"This field is required.\";\nconst REQUIRED_SECTION_MSG = \"Missing required fields\";\n\nconst TYPE_TO_VALIDATION_SCHEMA = {\n  text: string(),\n  decimal: number(),\n  number: number(),\n  boolean: boolean().nullable(),\n  hts: string(),\n  radio: string().nullable(),\n  date: date(),\n  checkbox: array().of(string()),\n  dropdown: string()\n};\n\nconst createChildrenShape = question => {\n  const shape = {};\n  question.children.forEach(child => {\n    shape[child.key] = child.required ?\n      TYPE_TO_VALIDATION_SCHEMA[child.type].required(REQUIRED_FIELD_MSG) :\n      TYPE_TO_VALIDATION_SCHEMA[child.type];\n  });\n  return shape;\n};\n\nconst createValidationSchema = question => {\n  let schema = TYPE_TO_VALIDATION_SCHEMA[question.type];\n  if (question.type === 'object') {\n    schema = object().shape(createChildrenShape(question));\n  } else if (question.type === 'array_of_objs') {\n    schema = array().of(object().shape(createChildrenShape(question)));\n  }\n  if (question.required && !question.disabledTooltip) {\n    schema = schema.required(REQUIRED_FIELD_MSG);\n  }\n  return schema;\n};\n\nconst loadTemplateAnswers = async ({lcApp, selectedTemplate, values, initialValues, setValues, setAppliedTemplate, setStatus}) => {\n  const questionType = {};\n  lcApp.forEach(q => questionType[q.key] = q.type);\n  const template = await makeAPIRequest(`/lc/digital_app_templates/${selectedTemplate.id}/`, \"GET\");\n  values = {...values};\n  for (let [key, value] of Object.entries(template)) {\n    const questionKey = _.snakeCase(key);\n    if (questionType[questionKey] === \"object\" ||\n      questionType[questionKey] === \"array_of_objs\" ||\n      questionType[questionKey] === \"checkbox\") {\n      value = JSON.parse(value);\n    }\n    if (initialValues[questionKey] !== undefined) {\n      values[questionKey] = value;\n    }\n    template[key] = value;\n  }\n  setStatus({status: \"success\", message: \"Successfully loaded application\"});\n  setTimeout(() => setStatus({status: null, message: \"\"}), 2500);\n  setValues(values);\n  setAppliedTemplate(template);\n};\n\nconst LoadTemplate = ({lcApp, setModal, initialValues, setAppliedTemplate, setStatus, setValues, values}) => {\n  const [selectedTemplate, setSelectedTemplate] = useState();\n  const [lcTemplates, setLCTemplates] = useState();\n\n  useEffect(() => {\n    const fetchTemplates = async () => {\n      setLCTemplates(await makeAPIRequest(\"/lc/digital_app_templates/\", \"GET\"));\n    };\n    fetchTemplates();\n  }, []);\n\n  return (\n    <Modal show={true} title={\"Load Application Template\"} onCancel={() => setModal(null)}\n           onSelect={async () => {\n             setModal(null);\n             if (!selectedTemplate) {\n               return;\n             }\n             await loadTemplateAnswers(\n               {lcApp, selectedTemplate, values, initialValues, setValues, setAppliedTemplate, setStatus});\n           }}\n    >\n      {lcTemplates && !lcTemplates.length && <div style={{paddingBottom: 20, color: \"gray\", fontStyle: \"italic\"}}>No\n        Saved Templates</div>}\n      {lcTemplates && <div style={{\n        flex: 1,\n        display: \"grid\",\n        gridAutoRows: \"1fr\",\n        overflowY: \"auto\",\n        gridTemplateColumns: \"repeat(3, 1fr)\"\n      }}>\n        {lcTemplates.map(template => <StyledButton type={\"button\"} fitWidth={true}\n                                                   selected={template.id === selectedTemplate?.id}\n                                                   onClick={() => setSelectedTemplate(template)}\n                                                   key={template.id}\n                                                   style={{margin: \"10px\"}}>{template.templateName}</StyledButton>)}\n      </div>}\n    </Modal>\n  )\n};\n\nconst SaveTemplate = ({setModal, values, lcApp, appliedTemplate, setStatus, setAppliedTemplate}) => {\n  const [newTemplateValue, setNewTemplateValue] = useState(\"\");\n  const [selectedSaveButton, setSelectedSaveButton] = useState(0);\n  const [saveTemplateError, setSaveTemplateError] = useState(\"\");\n  const [submitCount, setSubmitCount] = useState(0);\n  const [templateNameSet, setTemplateNameSet] = useState();\n  const [integrityError, setIntegrityError] = useState(\"\");\n\n  useEffect(() => {\n    const fetchTemplates = async () => {\n      setTemplateNameSet(\n        new Set((await makeAPIRequest(\"/lc/digital_app_templates/\", \"GET\")).map(template => template.templateName)));\n    };\n    fetchTemplates();\n  }, []);\n\n  useEffect(() => {\n    appliedTemplate && setSelectedSaveButton(1);\n  }, [appliedTemplate?.id]);\n\n  return (\n    <Modal show={true} title={\"Save Application Template\"} containerStyle={{width: \"60%\"}} selectButton={\"Save\"}\n           onCancel={() => setModal(null)} error={submitCount > 0 && saveTemplateError}\n           selectDisabled={submitCount && saveTemplateError}\n           onShow={() => {\n             const fields = [];\n             if (values[\"beneficiary_name\"]) {\n               fields.push(values[\"beneficiary_name\"].trim());\n             }\n             if (values[\"purchased_item\"]) {\n               fields.push(values[\"purchased_item\"].trim());\n             }\n             setNewTemplateValue(fields.join(\", \"));\n           }}\n           onSelect={async () => {\n             setSubmitCount(submitCount + 1);\n             const overwrite = selectedSaveButton === 1;\n             if (!overwrite && !newTemplateValue) {\n               setSaveTemplateError(\"Please input a valid template name\");\n               return;\n             }\n             const fields = {template_name: overwrite ? appliedTemplate.templateName : newTemplateValue.trim()};\n             lcApp.forEach(q => fields[q.key] =\n               (q.type === \"object\" || q.type === \"array_of_objs\" || q.type === \"checkbox\") ?\n                 JSON.stringify(values[q.key]) : values[q.key]);\n             const res = await makeAPIRequest(`/lc/digital_app_templates/${overwrite ? `${appliedTemplate.id}/` : \"\"}`,\n               overwrite ? \"PUT\" : \"POST\", fields, true);\n             let text = await res.text();\n             if (res.status !== 200) {\n               if (res.status >= 500) {\n                 text = \"Unknown server error. Please contact steve@bountium.org.\";\n               } else {\n                 setIntegrityError(text);\n               }\n               setSaveTemplateError(text);\n             } else {\n               setModal(null);\n               const questionType = {};\n               lcApp.forEach(q => questionType[q.key] = q.type);\n               const createdTemplate = JSON.parse(text)[overwrite ? \"updated_lc_template\" : \"created_lc_template\"];\n               for (let [key, value] of Object.entries(createdTemplate)) {\n                 if (questionType[key] === \"object\" ||\n                   questionType[key] === \"array_of_objs\" ||\n                   questionType[key] === \"checkbox\") {\n                   value = JSON.parse(value);\n                 }\n                 createdTemplate[key] = value;\n               }\n               setAppliedTemplate(objectToCamelCase(createdTemplate));\n               setStatus({status: \"success\", message: \"Successfully saved application\"});\n               setTimeout(() => setStatus({status: null, message: \"\"}), 2500);\n             }\n           }}\n    >\n      <div>\n        {appliedTemplate && <div style={{flexDirection: \"row\", display: \"flex\", paddingBottom: 20}}>\n          <StyledButton selected={selectedSaveButton === 1} nested type={\"button\"}\n                        onClick={() => {\n                          setSelectedSaveButton(1);\n                          setSaveTemplateError(\"\");\n                        }}\n                        style={{width: 160, justifyContent: \"center\"}}>\n            Overwrite</StyledButton>\n          <StyledDiv style={{flex: 1, marginLeft: 10, visibility: selectedSaveButton === 1 ? \"visible\" : \"hidden\"}}>\n            {appliedTemplate.templateName}</StyledDiv>\n        </div>}\n        <div style={{flexDirection: \"row\", display: \"flex\"}}>\n          <StyledButton selected={selectedSaveButton === 0} nested type={\"button\"}\n                        onClick={async () => {\n                          await setSelectedSaveButton(0);\n                          if (!newTemplateValue) {\n                            await setSaveTemplateError(\"Please input a valid template name\");\n                          } else if (templateNameSet.has(newTemplateValue)) {\n                            await setSaveTemplateError(integrityError);\n                          } else {\n                            await setSaveTemplateError(\"\");\n                          }\n                          document.querySelector(\"#newTemplateInput\").focus();\n                        }}\n                        style={{width: 160, justifyContent: \"center\"}}>\n            New</StyledButton>\n          <StyledInput style={{flex: 1, marginLeft: 10, visibility: selectedSaveButton === 0 ? \"visible\" : \"hidden\"}}\n                       type={\"text\"} value={newTemplateValue} id={\"newTemplateInput\"}\n                       onChange={({target}) => {\n                         let text = target.value;\n                         setNewTemplateValue(text);\n                         text = text.trim();\n                         if (!text) {\n                           setSaveTemplateError(\"Please input a valid template name\");\n                         } else if (templateNameSet.has(text)) {\n                           setSaveTemplateError(integrityError);\n                         } else {\n                           setSaveTemplateError(\"\");\n                         }\n                       }}/>\n        </div>\n      </div>\n    </Modal>\n  )\n};\n\nconst unsavedChanges = ({values, template, initialValues, submitCount}) => {\n  if (submitCount) {\n    return false;\n  }\n  if (!template) {\n    return !_.isEqual(values, initialValues);\n  }\n  for (let [templateField, templateValue] of Object.entries(template)) {\n    templateField = _.snakeCase(templateField);\n    templateValue = objectToSnakeCase(templateValue);\n    if (values[templateField] !== undefined && emptyAndChanged(values[templateField], templateValue) && !_.isEqual(\n      values[templateField], templateValue)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst emptyAndChanged = (currentValue, templateValue) => {\n  return currentValue || templateValue || currentValue === false || templateValue === false;\n};\n\nconst Refresh = ({appliedTemplate}) => {\n  const {values, initialValues, submitCount} = useFormikContext();\n  useEffect(() => {\n    if (unsavedChanges({values, template: appliedTemplate, initialValues, submitCount})) {\n      window.onbeforeunload = () => \"You have unsaved changes. Are you sure you want to leave without saving?\";\n    } else {\n      window.onbeforeunload = undefined;\n    }\n    return () => window.onbeforeunload = undefined;\n  });\n  return null;\n};\n\nconst BankLCAppPage = ({match}) => {\n  const persistedLcApp = JSON.parse(localStorage.getItem(`lc/${match.params.bankid}`));\n  const [user] = useContext(UserContext);\n  const [lcApp, setLCApp] = useState(null);\n  const [status, setStatus] = useState({status: null, message: \"\"});\n  const [selectedSectionIndex, setSelectedSectionIndex] = useState(null);\n  const [sections, setSections] = useState(null);\n  let [initialValues, setInitialValues] = useState({});\n  const [modal, setModal] = useState(null);\n  const [appliedTemplate, setAppliedTemplate] = useState(null);\n  useAuthentication(`/bank/${match.params.bankid}/application`);\n  useEffect(() => {\n    if (user && match.params.bankid) {\n      makeAPIRequest(`/bank/${match.params.bankid}/digital_app/`)\n      .then(json => {\n        const sectionSet = new Set();\n        json.forEach(q => {\n          sectionSet.add(q.section);\n          if (q.options) {\n            q.options = JSON.parse(q.options);\n          }\n          if (q.settings) {\n            q.settings = JSON.parse(q.settings);\n          }\n          q.children.forEach(child => {\n            if (child.options) {\n              child.options = JSON.parse(child.options);\n            }\n            if (child.settings) {\n              child.settings = JSON.parse(child.settings);\n            }\n          });\n        });\n        const sections = [];\n        if (persistedLcApp) {\n          initialValues = persistedLcApp;\n        } else {\n          json.forEach(q => {\n            if (user && q.key === 'applicant_name') {\n              initialValues[q.key] = user.business.name;\n            } else if (user && q.key === 'applicant_address') {\n              initialValues[q.key] = user.business.address;\n            } else {\n              initialValues[q.key] = createDefault(q);\n            }\n          });\n        }\n        sectionSet.forEach(\n          section => sections.push({text: section, error: false}));\n        setSections(sections);\n        setSelectedSectionIndex(0);\n        setInitialValues(initialValues);\n\n        setLCApp(json);\n      })\n    }\n  }, [match.params.bankid, user]);\n\n  let validationSchema = null;\n\n  if (lcApp) {\n    const schemaObj = {};\n    lcApp.forEach(q => {\n      schemaObj[q.key] = createValidationSchema(q);\n    });\n    validationSchema = object().shape(schemaObj);\n  }\n\n  return <BasicLayout\n    title={`LC Application ✏️`} isLoading={!lcApp} status={status} marginStyle={{marginBottom: 0, marginTop: 10}}>\n    {lcApp && (\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={(values, {setSubmitting}) => {\n          setSubmitting(true);\n          const app = {};\n          Object.entries(values).forEach((kv) => {\n            const [key, value] = kv;\n            if (value === null) {\n            } else {\n              app[key] = value;\n            }\n          });\n          makeAPIRequest(`/lc/by_bank/${match.params.bankid}/`, 'POST', app, true)\n          .then(async res => {\n            let text = await res.text();\n            if (res.status === 200) {\n              localStorage.removeItem(`lc/${match.params.bankid}`);\n              setStatus({\n                message:\n                  <div>\n                    <div style={{display: \"flex\"}}>\n                      <span style={{flex: 1}}/>\n                      <StyledIcon onClick={() => setStatus({status: null, message: \"\"})}\n                                  icon={faTimes} style={{color: \"black\"}}/>\n                    </div>\n                    <div>Your LC app has been sent in! The bank will get back to you ASAP.</div>\n                    <div style={{paddingTop: 25}}>\n                      <ClickableText onClick={() => {\n                        setStatus({status: null, message: \"\"});\n                        setModal(\"saveTemplate\");\n                      }}>\n                        Click here\n                      </ClickableText> to save your submitted application.\n                    </div>\n                  </div>,\n                status: \"success\"\n              });\n            } else {\n              if (text.length > 250) {\n                text = \"Unknown server error. Please contact steve@bountium.org.\";\n              }\n              localStorage.setItem(`lc/${match.params.bankid}`, JSON.stringify(values));\n              setStatus({status: \"error\", message: `Error submitting form: ${text}`});\n            }\n          });\n          setSubmitting(false);\n        }}\n      >\n        {({isSubmitting, errors, touched, setTouched, values, validateForm, setValues, handleSubmit, submitCount}) => (\n          <div style={{display: \"flex\", paddingBottom: 40}}>\n            <RouteBlockingModal when={unsavedChanges({values, template: appliedTemplate, initialValues, submitCount})}/>\n            <Refresh appliedTemplate={appliedTemplate}/>\n            {modal === \"loadTemplate\" && <LoadTemplate\n              initialValues={initialValues} lcApp={lcApp}\n              setAppliedTemplate={setAppliedTemplate} setModal={setModal}\n              setStatus={setStatus}\n              setValues={setValues} values={values}\n            />}\n            {modal === \"saveTemplate\" && <SaveTemplate\n              values={values} setStatus={setStatus} setAppliedTemplate={setAppliedTemplate}\n              setModal={setModal} lcApp={lcApp} appliedTemplate={appliedTemplate}\n            />}\n            <ErrorFocus\n              values={values} errors={errors} touched={touched} isSubmitting={isSubmitting} setLCApp={setLCApp}\n              setTouched={setTouched}\n              selectedSection={sections[selectedSectionIndex]} questions={lcApp} validateForm={validateForm}\n              setSectionsError={(erroredSectionSet => {\n                const sectionsErrors = sections.map(section => section.error);\n                sections.forEach(section => {\n                  section.error = erroredSectionSet.has(section.text)\n                });\n                !_.isEqual(sections.map(section => section.error), sectionsErrors) && setSections([...sections]);\n              })}/>\n            <ResizableScreenDiv\n              style={{width: \"30%\", position: \"sticky\", top: 0, display: \"flex\", flexDirection: \"column\"}}>\n              <div style={{flex: 1}}>\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                  <StyledButton type={\"button\"} style={{marginRight: \"10px\"}} fitWidth={true} onClick={() => {\n                    setModal(\"loadTemplate\");\n                  }}>Load Template</StyledButton>\n                  <StyledButton type={\"button\"} style={{marginLeft: 10, marginRight: 15}} fitWidth={true}\n                                onClick={() => setModal(\"saveTemplate\")}>\n                    Save As Template</StyledButton>\n                </div>\n                <ButtonVerticalWrapper>\n                  {sections.map((section, index) => (<StyledSection\n                    type=\"button\"\n                    onClick={() => setSelectedSectionIndex(index)}\n                    style={{whiteSpace: \"pre\"}}\n                    key={section.text}\n                    selected={index === selectedSectionIndex}>\n                    {section.text}\n                    {section.error && <SectionSubtitle\n                      style={{color: '#dc3545'}}>{REQUIRED_SECTION_MSG}</SectionSubtitle>}\n                  </StyledSection>))}\n                </ButtonVerticalWrapper>\n                <div style={{display: \"flex\", marginTop: \"20px\", width: \"95%\"}}>\n                  <Button disabled={isSubmitting} onClick={handleSubmit}>Submit LC App</Button>\n                </div>\n              </div>\n              <div style={{flex: 1}}/>\n              {status.status && <StatusMessage style={{overflowY: \"auto\", flexGrow: 0, marginTop: 20}}\n                                               status={status.status}>{status.message}</StatusMessage>}\n            </ResizableScreenDiv>\n            <Form style={{width: \"70%\"}}>\n              <div>\n                {lcApp && lcApp.filter(question => sections[selectedSectionIndex].text === question.section).map(\n                  question => {\n                    const Component = TYPE_TO_COMPONENT[question.type];\n                    return <Component\n                      key={question.id} question={question} status={status} setStatus={setStatus} lcApp={lcApp}\n                      setAppliedTemplate={setAppliedTemplate} appliedTemplate={appliedTemplate}/>;\n                  })}\n                <div style={{display: \"flex\", marginLeft: \"150px\", marginRight: \"150px\"}}>\n                  <Button\n                    style={{flex: 1, marginRight: \"50px\"}}\n                    disabled={selectedSectionIndex === 0}\n                    onClick={() => setSelectedSectionIndex(selectedSectionIndex - 1)}\n                    type=\"button\">Previous Section</Button>\n                  <Button\n                    style={{flex: 1, marginLeft: \"50px\"}}\n                    onClick={selectedSectionIndex < sections.length - 1 ? () => setSelectedSectionIndex(\n                      selectedSectionIndex + 1) : null}\n                    type={selectedSectionIndex === sections.length - 1 ? \"submit\" : \"button\"}>\n                    {selectedSectionIndex === sections.length - 1 ? \"Submit LC App\" : \"Next Section\"}\n                  </Button>\n                </div>\n              </div>\n            </Form>\n          </div>\n        )}\n      </Formik>\n\n    )}\n  </BasicLayout>\n};\n\nexport default BankLCAppPage;\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\nimport { Link } from \"react-router-dom\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  newBusinessName: string().required(requiredMsg),\n  newBusinessAddress: string().required(requiredMsg),\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg).matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BusinessSignUpPage = ({ history }) => {\n  const setUser = useContext(UserContext)[1];\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle={\n        <>\n      Get your team up & running with lightning-fast LC processing.\n      <br/><br/>\n      <span style={{fontStyle: 'italic'}}>Not a business? </span>\n      <Link to=\"/bank/register\">Register as a bank</Link>\n      </>\n      }\n    >\n    <Formik\n      initialValues={{\n        newBusinessName: '', newBusinessAddress: '', name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(\"/business/\", \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n            history.push(\"/business/invite\");\n          })\n          .then(() => setSubmitting(false));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n      <FormInput\n          title=\"Business Name\"\n          name=\"newBusinessName\"\n          type=\"text\"\n        />\n        <FormInput\n            title=\"Business Address\"\n            name=\"newBusinessAddress\"\n            type=\"text\"\n          />\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n<Button showArrow disabled={isSubmitting}>\n  Sign Up\n</Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BusinessSignUpPage;\n","import React, { useContext } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { object, string } from 'yup';\n\nimport Button from '../../components/ui/Button';\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { useAuthentication, UserContext } from '../../utils/auth';\nimport { makeAPIRequest } from '../../utils/api';\nimport styled from 'styled-components';\nimport { useState } from 'react';\n\nconst StyledForm = styled(Form)`\n  display: flex;\n  max-width: 800px;\n  min-width: 400px;\n  margin: auto;\n  justify-content: center;\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nconst FormWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst validationSchema = object().shape({\n  email: string().email('Please enter a valid email address.').required('Please enter an email address.'),\n});\n\nconst StatusMessage = styled.div`\n  ${props => props.status && `\n    padding: 10px;\n  `}\n  border-radius: 5px;\n  max-width: 400px;\n  overflow: scroll;\n  margin: 40px auto auto;\n  background-color: ${props => props.status === `error` ? `#dc3545` : `#4bb759`};\n  color: #fff;\n`\n\nconst StyledField = styled(Field)`\n  border-radius: 5px;\n  border: 1px solid #cdcdcd;\n  font-size: 18px;\n  padding-left: 10px;\n`\n\nconst ErrorMessageWrapper = styled.div`\n  margin: auto;\n  max-width: 400px;\n  color: #dc3545;\n  margin-top: 10px;\n`\n\nconst ButtonHolder = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`\n\nconst BusinessInvitePage = ({ history }) => {\n  useAuthentication('/business/invite');\n  const [user] = useContext(UserContext);\n  const [status, setStatus] = useState({ status: null, message: \"\"});\n  return (\n    <BasicLayout\n      title={`Welcome${(user ? ', ' + user.name : '')} 🚀`}\n      subtitle=\"Enter your teammates' emails to invite them to the platform.\"\n    >\n      <Formik\n        initialValues={{ email: '' }}\n        onSubmit={(values, { setSubmitting }) => {\n          setSubmitting(true);\n          makeAPIRequest(`/business/${user.employer}/invite_teammate/`, \"POST\", { \"inviteeEmail\": values.email }, true)\n            .then((response) => {\n              if (response.status === 200) setStatus({\n                status: \"success\",\n                message: `Invite sent to ${values.email}!`\n              });\n              else setStatus({\n                status: \"error\",\n                message: `Error inviting ${values.email}.`\n              })\n            });\n          setSubmitting(false);\n        }}\n        validationSchema={validationSchema}\n      >\n      {({ isSubmitting }) => (\n        <FormWrapper>\n        <StyledForm>\n          <StyledField type=\"email\" name=\"email\"/>\n          <Button type=\"submit\">{isSubmitting ? 'Sending...' : 'Send'}</Button>\n        </StyledForm>\n        <ErrorMessageWrapper>\n          <ErrorMessage name=\"email\"/>\n        </ErrorMessageWrapper>\n        </FormWrapper>\n      )}\n      </Formik>\n        {status.status && (<StatusMessage status={status.status}>{status.message}</StatusMessage>)}\n\n    <ButtonHolder>\n      <Button showArrow onClick={() => history.push(\"/business/createApp\")}>\n        Next\n      </Button>\n    </ButtonHolder>\n    </BasicLayout>\n  );\n}\n\nexport default BusinessInvitePage;\n","import React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\nimport { get } from \"lodash\";\n\nimport Button from \"../../components/ui/Button\";\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { useAuthentication, UserContext } from \"../../utils/auth\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst signUpFormValidationSchema = object().shape({\n  newBusinessName: string(),\n  name: string(),\n  title: string(),\n  password: string().matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string()\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BusinessManageAccountPage = () => {\n  useAuthentication(\"/business/account\");\n  const [user, setUser] = useContext(UserContext);\n\n  return (\n    <BasicLayout title=\"My Account 🛠\" subtitle=\"View and edit your user settings.\" isLoading={!user}>\n    <Formik\n      initialValues={{\n        name: get(user, ['name']), title: get(user, ['title']), password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/business/${get(user, ['business', 'id'])}/${get(user, ['id'])}/`, \"PUT\", { name: values.name, title: values.title })\n          .then((json) => {\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n          })\n          .then(() => setSubmitting(false))\n          .catch((err) => console.error(err));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"New Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm New Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n          <Button disabled={isSubmitting}>\n            Save Update\n          </Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n}\n\nexport default BusinessManageAccountPage;\n","import React, {useContext, useState} from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\nimport StatusMessage from \"../../components/ui/StatusMessage\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  margin-bottom: 10px;\n  \n  > :nth-child(1) {\n    grid-column-start: 2;\n    justify-self: center;\n  }\n  \n  > :nth-child(2) {\n    justify-self: end;\n  }\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg),\n  // .matches(/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n  //   \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n  //   \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  //), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BusinessEmployeeSignUpPage = ({ history, match }) => {\n  const setUser = useContext(UserContext)[1];\n  const [status, setStatus] = useState({status: null, message: \"\"});\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle=\"Create your account for lightning-fast LC processing.\"\n    >\n    <Formik\n      initialValues={{\n        name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/business/${match.params.businessid}/register/`, \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n            history.push(\"/business/invite\");\n          })\n          .then(() => setSubmitting(false))\n          .catch(e => e.text().then(message => setStatus({status: \"error\", message})).then(setSubmitting(false)))\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n          <StatusMessage style={{marginTop: 0, overflow: \"auto\"}} status={status.status}>{status.message}</StatusMessage>\n          <Button style={{height: \"fit-content\"}} showArrow disabled={isSubmitting}>\n            Sign Up\n          </Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BusinessEmployeeSignUpPage;\n","import React, { useEffect, useContext, useState } from 'react';\nimport { get } from 'lodash';\nimport styled from 'styled-components';\n\nimport BasicLayout from '../../../components/BasicLayout';\nimport { useAuthentication, UserContext } from '../../../utils/auth';\nimport { makeAPIRequest } from '../../../utils/api';\nimport Button from '../../../components/ui/Button';\nimport StatusMessage from '../../../components/ui/StatusMessage';\n\nconst ClaimMessage = styled.div`\n  font-weight: 300;\n  max-width: 600px;\n  text-align: center;\n  margin: auto auto 20px;\n  font-size: 18px;\n`\n\nconst useStatus = (init) => {\n  const [status, setStatus] = useState(init || {status: null, message: ''});\n  return {\n    status,\n    setSuccess: (msg) => setStatus({status: 'success', message: msg}),\n    setError: (msg) => setStatus({status: 'error', message: msg}),\n    clearStatus: () => setStatus({status: null, message: ''}),\n  }\n}\n\nconst ClaimBeneficiaryStatusPage = ({ match, history }) => {\n  const lcid = match.params.lcid;\n  useAuthentication(`/business/claimBeneficiary/${lcid}`);\n  const [lc, setLc] = useState(null);\n  const [user] = useContext(UserContext);\n  const { status, setError, setSuccess } = useStatus();\n  if (user && user.bank) history.push('/'); // redirect if wrong user type\n  // TODO come up with a better way to do that ^\n  console.log(lc)\n\n  useEffect(() => {\n    makeAPIRequest(`/lc/${lcid}/`, 'GET')\n      .then(json => setLc(json));\n  }, [lcid])\n\n  const handleClick = () => {\n    makeAPIRequest(`/lc/${lcid}/claim_beneficiary/`, 'POST')\n      .then(() => setSuccess('Congratulations! You have claimed beneficiary status on this order.'))\n      .catch(async (res) => {\n        const a = await res.text();\n        if (a.length > 250) setError('There was an error claiming beneficiary status.')\n        else setError('There was an error claiming beneficiary status: ' + res.error)\n      })\n  }\n\n  return (\n    <BasicLayout\n      title=\"Claim Beneficiary Status\"\n      isLoading={!(user && lc)}\n    >\n      <ClaimMessage>\n        {`Are you a representative of ${get(user, 'business.name')}, selling ${lc && lc.purchasedItem ? `${get(lc, 'unitsPurchased')}\n         ${get(lc, 'unitOfMeasure')} of ${get(lc, 'purchasedItem')} ` : ''}to ${get(lc, 'client.name')}${lc && lc.dueDate ? \n         `, due by ${get(lc, 'dueDate')}` : ''}?`}\n      </ClaimMessage>\n      <center><Button onClick={handleClick}>Yes, Claim Beneficiary Status</Button></center>\n      {status.status && <StatusMessage status={status.status}>{status.message}</StatusMessage>}\n    </BasicLayout>\n  )\n}\n\nexport default ClaimBeneficiaryStatusPage;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { get } from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\n\nimport BasicLayout from \"../../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../../utils/api';\nimport config from \"../../../config\";\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #000;\n  line-height: 1.25;\n`\n\nconst ListEntryField = styled.li`\n  flex-grow: 1;\n  flex-basis: 20%;\n  padding-left: 10px;\n  padding-right: 10px;\n`\n\nconst ListEntryWrapper = styled.ul`\n  display: flex;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border: 1px solid #cdcdcd;\n  font-weight: 500;\n  align-items: center;\n\n  ${(props) => !props.header && `\n  font-weight: 400;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n  transition: border 0.3s;\n  background-color: #fff;\n`\n\nconst useDebouncedEffect = (callback, parameters, delay) => {\n  const currentTimeout = useRef(null);\n\n  useEffect(() => {\n    if (currentTimeout.current !== null) {\n      clearTimeout(currentTimeout.current);\n    }\n    currentTimeout.current = setTimeout(callback, delay);\n    /* eslint-disable-next-line */\n  }, parameters);\n};\n\nconst Search = styled.input`\n  font-size: 16px;\n  padding: 5px 10px 5px 0;\n  border: none;\n`\n\nconst SearchWrapper = styled.div`\n  background-color: #fff;\n  border: 1px solid #cdcdcd;\n`\n\nconst Filter = ({ lcs, setShownLcs }) => {\n  const [filter, setFilter] = useState(null);\n  useDebouncedEffect(() => {\n    if (filter === null) return;\n    setShownLcs(lcs.filter(lc => lc.client.name.toLowerCase().includes(filter.toLowerCase())));\n  }, [filter, lcs], 200)\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n    <SearchWrapper>\n    <FontAwesomeIcon icon={faSearch}  style={{ padding: \"0 10px\"}} />\n      <Search type=\"text\" onChange={(e) => setFilter(e.target.value)} />\n    </SearchWrapper>\n      <span style={{ fontStyle: 'italic', marginLeft: '10px', fontWeight: 300, color: '#454545' }}>Start typing to filter by client</span>\n    </div>\n  )\n}\n\nconst LCListEntry = ({ lc }) => {\n  // NOTE: due_date and credit_amt will only be available for DigitalLCs\n  return (\n      <StyledLink to={`/lc/${lc.id}`}>\n      <ListEntryWrapper>\n        <ListEntryField>{lc.client.name}</ListEntryField>\n        <ListEntryField>{get(lc, 'beneficiary.name') || \"Unknown\"}</ListEntryField>\n        <ListEntryField>{lc.applicationDate}</ListEntryField>\n        <ListEntryField>{lc.draftPresentationDate || \"N/A\"}</ListEntryField>\n        <ListEntryField>{lc.creditAmt || \"N/A\"}</ListEntryField>\n      </ListEntryWrapper>\n      </StyledLink>\n  )\n}\n\n// The only different between this and the bank lc feed\n// is setting business id based on the user's business field\n// + addition of link to client or bene view\n// This could almost certainly be abstracted\nconst BusinessLCFeed = ({ title, user, url, hideSearch, currentlyOnClient }) => {\n  const [lcs, setLcs] = useState(null);\n  const [shownLcs, setShownLcs] = useState(null);\n  const businessid = get(user, ['business', 'id']);\n\n  useEffect(() => {\n    if (!businessid) return;\n    makeAPIRequest(url)\n      .then(json => {\n        setLcs(json);\n        setShownLcs(json);\n      });\n  }, [businessid, url]);\n\n  return (\n    <BasicLayout\n      title={title}\n      isLoading={!shownLcs}\n      link={`/business/lcs/${currentlyOnClient ? \"beneficiary\" : \"client\"}`}\n      linktext={`View LCs for which you are a ${currentlyOnClient ? \"beneficiary\" : \"client\"}`}\n    >\n    {/* \"Heading\" of the feed - delete if you think it unnecessary*/}\n    <div>\n      {!hideSearch && <Filter lcs={lcs} setShownLcs={setShownLcs} />}\n      <ListEntryWrapper header>\n        <ListEntryField>Client</ListEntryField>\n        <ListEntryField>Beneficiary</ListEntryField>\n        <ListEntryField>Applied</ListEntryField>\n        <ListEntryField>Drafts Due</ListEntryField>\n        <ListEntryField>Transaction Size</ListEntryField>\n      </ListEntryWrapper>\n    </div>\n    {(shownLcs && (shownLcs.length > 0 ? (\n      <div>\n    {shownLcs.map(lc => <LCListEntry lc={lc} key={lc.id}/>)}\n    </div>\n    ) : (<center style={{ marginTop: '30px', fontStyle: 'italic', color: '#888' }}>You don't have any LCs yet.</center>)))}\n    </BasicLayout>\n  )\n\n}\n\nexport default BusinessLCFeed;\n","import React, { useContext } from \"react\";\nimport BusinessLCFeed from \"./BusinessLCFeed\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\nimport { get } from \"lodash\";\n\nconst ClientLCFeedPage = ({ match }) => {\n  useAuthentication(`/business/lcs/client/`);\n  const [user] = useContext(UserContext);\n  const businessid = get(user, ['business', 'id']);\n  const businessname = get(user, ['business', 'name']);\n\n  const title = `All LCs ${businessname} has applied or been approved for`\n  return <BusinessLCFeed\n    title={title}\n    url={`/lc/by_client/${businessid}/`}\n    user={user}\n    hideSearch\n    currentlyOnClient\n    />\n}\n\nexport default ClientLCFeedPage\n","import React, { useContext } from \"react\";\nimport BusinessLCFeed from \"./BusinessLCFeed\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\nimport { get } from 'lodash'\n\nconst BeneficiaryLCFeedPage = ({ match }) => {\n  useAuthentication(`/business/lcs/beneficiary/`);\n  const [user] = useContext(UserContext);\n  const businessid = get(user, ['business', 'id']);\n  const businessname = get(user, ['business', 'name']);\n\n  const title = `All LCs for which ${businessname} is the named beneficiary`\n  return <BusinessLCFeed\n    title={title}\n    url={`/lc/by_beneficiary/${businessid}/`}\n    user={user}\n    hideSearch\n    />\n}\n\nexport default BeneficiaryLCFeedPage\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { get } from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nimport BasicLayout from \"../../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../../utils/api';\nimport config from \"../../../config\";\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #000;\n  line-height: 1.25;\n`\n\nconst ListEntryField = styled.li`\n  flex-grow: 1;\n  flex-basis: 20%;\n  padding-left: 10px;\n  padding-right: 10px;\n`\n\nconst ListEntryWrapper = styled.ul`\n  display: flex;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border: 1px solid #cdcdcd;\n  font-weight: 500;\n  align-items: center;\n\n  ${(props) => !props.header && `\n  font-weight: 400;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n  transition: border 0.3s;\n  background-color: #fff;\n`\n\nconst useDebouncedEffect = (callback, parameters, delay) => {\n  const currentTimeout = useRef(null);\n\n  useEffect(() => {\n    if (currentTimeout.current !== null) {\n      clearTimeout(currentTimeout.current);\n    }\n    currentTimeout.current = setTimeout(callback, delay);\n    /* eslint-disable-next-line */\n  }, parameters);\n};\n\nconst Search = styled.input`\n  font-size: 16px;\n  padding: 5px 10px 5px 0;\n  border: none;\n`\n\nconst SearchWrapper = styled.div`\n  background-color: #fff;\n  border: 1px solid #cdcdcd;\n`\n\nconst Filter = ({ banks, setShownBanks }) => {\n  const [filter, setFilter] = useState(null);\n  useDebouncedEffect(() => {\n    if (filter === null) return;\n    setShownBanks(banks.filter(bank => bank.name.toLowerCase().includes(filter.toLowerCase())));\n  }, [filter, banks], 200)\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n    <SearchWrapper>\n    <FontAwesomeIcon icon={faSearch}  style={{ padding: \"0 10px\"}} />\n      <Search type=\"text\" onChange={(e) => setFilter(e.target.value)} />\n    </SearchWrapper>\n      <span style={{ fontStyle: 'italic', marginLeft: '10px', fontWeight: 300, color: '#454545' }}>Start typing to filter by name</span>\n    </div>\n  )\n}\n\nconst BankListEntry = ({ bank }) => {\n  return (\n      <StyledLink to={`/bank/${bank.id}/application`}>\n      <ListEntryWrapper>\n        <ListEntryField>{bank.name}</ListEntryField>\n      </ListEntryWrapper>\n      </StyledLink>\n  )\n}\n\nconst BankDirectory = ({ title, user, url, hideSearch }) => {\n  const [banks, setBanks] = useState(null);\n  const [shownBanks, setShownBanks] = useState(null);\n\n  const businessid = get(user, ['business', 'id']);\n\n  useEffect(() => {\n    if (!businessid) return;\n    makeAPIRequest(url)\n      .then(json => {\n        setBanks(json);\n        setShownBanks(json);\n      });\n  }, [businessid, url]);\n\n  return (\n    <BasicLayout\n      title={title}\n      isLoading={!shownBanks}\n    >\n    {/* \"Heading\" of the feed - delete if you think it unnecessary*/}\n    <div>\n      {!hideSearch && <Filter banks={banks} setShownBanks={setShownBanks} />}\n      <ListEntryWrapper header>\n        <ListEntryField>Bank</ListEntryField>\n      </ListEntryWrapper>\n    </div>\n    {(shownBanks && (shownBanks.length > 0 ? (\n      <div>\n    {shownBanks.map(bank => <BankListEntry bank={bank} key={bank.id}/>)}\n    </div>\n    ) : (<center style={{ marginTop: '30px', fontStyle: 'italic', color: '#888' }}>No banks found.</center>)))}\n    </BasicLayout>\n  )\n\n}\n\nconst BankDirectoryPage = ({ match }) => {\n  useAuthentication(`/banks/`);\n  const [user] = useContext(UserContext);\n\n  const title = `Find the perfect bank for your LC needs!`\n  return <BankDirectory\n    title={title}\n    url={`/bank/`}\n    user={user}\n    />\n}\n\nexport default BankDirectoryPage;\n","import React, { useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\n\nimport GlobalStyle, { CSSReset } from './GlobalStyle'\nimport HomePage from './pages/HomePage/HomePage';\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport Nav from './components/Nav';\nimport { UserContext } from './utils/auth';\nimport BankSignUpPage from './pages/bank/BankSignUpPage';\nimport BankInvitePage from './pages/bank/BankInvitePage';\nimport BankManageAccountPage from './pages/bank/BankManageAccountPage';\nimport BankLCAppFeedPage from './pages/bank/feeds/BankLCAppFeedPage';\nimport BankLiveLCFeedPage from './pages/bank/feeds/BankLiveLCFeedPage';\nimport BankLCFeedPage from './pages/bank/feeds/BankLCFeedPage';\nimport BankLCFeedPageByClient from './pages/bank/feeds/BankLCFeedPageByClient';\nimport LCViewPage from './pages/LCViewPage/LCViewPage';\nimport BankEmployeeSignUpPage from './pages/bank/BankEmployeeSignUpPage';\nimport BankLCAppPage from './pages/bank/BankLCAppPage';\nimport BusinessSignUpPage from './pages/business/BusinessSignUpPage';\nimport BusinessInvitePage from './pages/business/BusinessInvitePage';\nimport BusinessManageAccountPage from './pages/business/BusinessManageAccountPage';\nimport BusinessEmployeeSignUpPage from './pages/business/BusinessEmployeeSignUpPage';\nimport ClaimBeneficiaryStatusPage from './pages/business/beneficiary/ClaimBeneficiaryStatusPage';\nimport ClientLCFeedPage from './pages/business/feeds/ClientLCFeedPage';\nimport BeneficiaryLCFeedPage from './pages/business/feeds/BeneficiaryLCFeedPage';\nimport BankDirectoryPage from './pages/business/feeds/BankDirectoryPage';\n\n// TODO It seems like having the presentational nav in this mostly-container\n//      component is poor separation of concerns. Look into this.\nfunction App() {\n  const [user, setUser] = useState(null);\n  // const [user, setUser] = useState(null);\n  // TODO:\n  //<Route path=\"/business/lcs/:lcid\" component={BusinessLCViewPage} />\n  //<Route path=\"/business/lcs\" component={BusinessLCFeedPage} />\n\n  return (\n    <UserContext.Provider value={[user, setUser]}>\n      <Router>\n        <CSSReset />\n        <GlobalStyle />\n        <Nav user={user} setUser={setUser} />\n        <Switch>\n          <Route path=\"/create\" />\n          <Route path=\"/manage\" />\n          <Route path=\"/bank/register/:bankid\" component={BankEmployeeSignUpPage} />\n          <Route path=\"/bank/register\" component={BankSignUpPage} />\n          <Route path=\"/bank/invite\" component={BankInvitePage} />\n          <Route path=\"/bank/account\" component={BankManageAccountPage} />\n          <Route path=\"/lc/:lcid\" component={LCViewPage} />\n          <Route path=\"/bank/lcs/client/:clientid\" component={BankLCFeedPageByClient} />\n          <Route path=\"/bank/lcs/live\" component={BankLiveLCFeedPage} />\n          <Route path=\"/bank/lcs/apps\" component={BankLCAppFeedPage} />\n          <Route path=\"/bank/lcs\" component={BankLCFeedPage} />\n          <Route path=\"/bank/:bankid/application\" component={BankLCAppPage} />\n          <Route path=\"/business/register/:businessid\" component={BusinessEmployeeSignUpPage} />\n          <Route path=\"/business/register\" component={BusinessSignUpPage} />\n          <Route path=\"/business/invite\" component={BusinessInvitePage} />\n          <Route path=\"/business/account\" component={BusinessManageAccountPage} />\n          <Route path=\"/business/claimBeneficiary/:lcid\" component={ClaimBeneficiaryStatusPage} />\n          <Route path=\"/business/lcs/client/\" component={ClientLCFeedPage} />\n          <Route path=\"/business/lcs/beneficiary/\" component={BeneficiaryLCFeedPage} />\n          <Route path=\"/business/lcs/\" component={ClientLCFeedPage} />\n          <Route path=\"/banks\" component={BankDirectoryPage} />\n          <Route path=\"/login\" component={LoginPage}/>\n          <Route path=\"/\" component={HomePage} />\n        </Switch>\n      </Router>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/logo.980300c8.png\";"],"sourceRoot":""}