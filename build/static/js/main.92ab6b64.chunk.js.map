{"version":3,"sources":["GlobalStyle.js","utils/api.js","utils/auth.js","pages/HomePage/HomePage.js","components/ui/StatusMessage.js","config.js","components/BasicLayout.js","pages/LoginPage/LoginPage.js","components/Nav.js","components/ui/Button.js","pages/bank/BankSignUpPage.js","pages/bank/BankInvitePage.js","pages/bank/BankManageAccountPage.js","pages/bank/feeds/LCFeed.js","pages/bank/feeds/BankLCAppFeedPage.js","pages/bank/feeds/BankLiveLCFeedPage.js","pages/bank/feeds/BankLCFeedPage.js","pages/bank/feeds/BankLCFeedPageByClient.js","components/lc/LCView.js","pages/LCViewPage/Pdf.js","pages/LCViewPage/Panel.js","pages/LCViewPage/DocumentaryRequirements.js","components/ui/Modal.js","pages/LCViewPage/ComplianceChecks.js","pages/LCViewPage/LCViewPage.js","pages/bank/BankEmployeeSignUpPage.js","components/ui/Dropdown.js","components/ui/ResizableScreenDiv.js","components/ui/RouteBlockingModal.js","pages/bank/BankLCAppPage.js","pages/business/BusinessSignUpPage.js","pages/business/BusinessInvitePage.js","pages/business/BusinessManageAccountPage.js","pages/business/BusinessEmployeeSignUpPage.js","pages/business/beneficiary/ClaimBeneficiaryStatusPage.js","pages/business/feeds/BusinessLCFeed.js","pages/business/feeds/ClientLCFeedPage.js","pages/business/feeds/BeneficiaryLCFeedPage.js","pages/business/feeds/BankDirectoryPage.js","App.js","index.js","images/logo.png"],"names":["CSSReset","createGlobalStyle","GlobalStyle","objectToSnakeCase","object","newObject","Array","isArray","map","Object","keys","forEach","key","snakeCase","console","error","objectToCamelCase","camelCase","makeAPIRequest","url","requestType","params","returnFullResponse","a","requestURL","fetchParams","method","body","JSON","stringify","fetch","response","status","Promise","reject","json","postFile","file","form","FormData","append","headers","Headers","logIn","email","password","Error","setSessionExpiry","Date","sessionExpiry","getTime","userEmployee","employer","business","usersEmployer","bank","logOut","setUser","UserContext","createContext","expiry","localStorage","setItem","useAuthentication","nextRoute","history","useHistory","useContext","user","useEffect","now","expirySeconds","getItem","getSessionExpiry","then","catch","err","push","HomePage","to","StatusMessage","styled","div","props","config","logo","accentColor","Margin","Title","h1","Subtitle","h2","RightAlignedLink","Content","Status","BasicLayout","title","subtitle","link","linktext","isLoading","children","marginStyle","statusComponent","style","href","size","color","loading","css","LoginForm","LoginErrorMessage","showError","HelpEmail","FormInputWrapper","FormInputTitle","h3","StyledFormInput","input","FormFooter","LogInButton","button","FormInput","value","type","onChange","LoginPage","location","useState","setEmail","setPassword","setError","get","onSubmit","e","preventDefault","target","onKey","icon","faArrowRight","marginLeft","StyledNav","nav","StyledNavLink","NavLink","LoginMenu","StyledLoginLink","StyledProfileLink","ProfileWrapper","ProfileLinkWrapper","show","DropDownWrapper","DropDownHeader","DropDownLink","DropDownNavLink","ProfileDropDown","name","onClick","log","LoginSection","showingDropdown","setShowingDropdown","wrapperEl","useRef","current","focus","ref","onBlur","faUserCircle","fontSize","NavLogo","img","attrs","src","alt","Nav","StyledButton","unselected","disabled","Button","showArrow","arrowStyle","SignUpForm","Form","Field","StyledErrorMessage","ErrorMessage","requiredMsg","signUpFormValidationSchema","shape","newBankName","string","required","matches","passwordConfirm","oneOf","component","BankSignUpPage","fontStyle","initialValues","values","setSubmitting","validationSchema","isSubmitting","StyledForm","FormWrapper","StyledField","ErrorMessageWrapper","ButtonHolder","BankInvitePage","message","setStatus","id","BankManageAccountPage","StyledLink","Link","ListEntryField","li","ListEntryWrapper","ul","header","Search","SearchWrapper","Filter","lcs","setShownLcs","filter","setFilter","callback","parameters","delay","currentTimeout","clearTimeout","setTimeout","useDebouncedEffect","lc","client","toLowerCase","includes","display","alignItems","faSearch","padding","fontWeight","LCListEntry","applicationDate","draftPresentationDate","creditAmt","LCFeed","hideSearch","setLcs","shownLcs","bankid","length","marginTop","BankLCAppFeedPage","match","clientid","setClient","paramsclientid","TitleWrapper","LCTitle","LCView","faArrowLeft","paddingRight","pdfjs","GlobalWorkerOptions","workerSrc","pdfjsWorker","PdfComponent","canvasRef","setIsLoading","loadingTask","getDocument","promise","pdf","getPage","page","viewport","getViewport","scale","canvas","context","getContext","height","width","renderContext","canvasContext","renderTask","render","fetchPdf","window","innerHeight","border","BasicView","PanelTitle","highlight","PanelBody","PanelTitleAlt","Panel","expand","setExpand","editing","setEditing","canEdit","expandEnabled","clickable","faPencilAlt","faChevronDown","faChevronRight","cursor","ModalBackground","ModalWrapper","ModalFlex","ModalLeftColumn","ModalRightColumn","ModalButtonsWrapper","MODAL_TYPES","Modal","docReq","hideModal","refreshLc","setType","justifyContent","linkToSubmittedDoc","ViewModal","lcid","digitalDocReq","setDigitalDocReq","data","undefined","sellerName","fields","sellerAddress","indicatedDateOfShipment","countryOfExport","reasonForExport","consigneeName","buyerName","consigneeAddress","buyerAddress","goodsDescription","unitOfMeasure","unitsPurchased","unitPrice","currency","hsCode","countryOfOrigin","DocReqTitle","docName","field","SmallHeader","marginBottom","margin","textDecoration","Pdf","InputWrapper","QuestionText","Asterisk","span","ButtonWrapper","selected","BasicInput","question","useField","meta","touched","questionText","NumberInput","AllRadiosWrapper","AllCheckboxesWrapper","TYPE_TO_COMPONENT","text","decimal","number","boolean","helpers","setValue","handleClick","val","radio","options","parse","opt","date","checkbox","i","indexOf","slice","concat","faCheckSquare","marginRight","TYPE_TO_DEFAULT","toISOString","TYPE_TO_VALIDATION_SCHEMA","nullable","array","of","CreateModal","setFields","suggestedFields","setSuggestedFields","d","s","schemaObj","q","enableReinitialize","app","entries","kv","Component","UploadModal","setIsSubmitting","flexDirection","maxWidth","FileUpload","uploadFile","files","DocumentaryEntryFlex","DocumentaryEntryWrapper","DocReqDate","DocReqStatus","ExpandedDocumentaryEntry","label","DocumentaryEntryEvaluation","DocumentaryRequirement","documentaryRequirement","userType","live","showModal","dueDate","requiredValues","rejected","expanded","setExpanded","comments","setComments","minWidth","approve","complaints","DocumentaryRequirements","isModalShowing","setIsModalShowing","modalDocReq","setModalDocReq","useModal","docReqs","documentaryrequirementSet","satisfied","Background","Container","ActionButton","CancelButton","onCancel","onSelect","containerStyle","onShow","selectDisabled","selectButton","cancelButton","scrollTop","document","documentElement","parseInt","top","position","overflowY","isNaN","resetScroll","event","stopPropagation","textarea","RequestClarificationModal","initialReason","modal","setModal","setLc","beneficiary","comment","setComment","textAreaRef","action","updatedLc","paddingTop","RejectionModal","rejectUrl","rejectionReason","setRejectionReason","titleCase","exceptions","Set","allCaps","split","substr","ind","wordIndex","word","has","toUpperCase","charAt","substring","join","SanctionInfo","sanction","paddingBottom","paddingLeft","onContextMenu","open","aliases","alias","addresses","address","addressGroup","country","addressToString","ComplianceCheck","initialRequestComment","initialRejectionReason","errorMessage","approveUrl","duration","CompanyOFACCheck","sanctions","CountrySanctionCheck","beneficiaryCountry","clientCountry","countrySanctionMessage","rel","ImportLicenseCheck","licenseSanctionMessage","ComplianceChecks","TwoColumnHolder","LeftColumn","RightColumn","OrderStatusWrapper","PartyDisplayMessage","APPROVALS_TO_STATE","issuerRejected","canApprove","clientIssuer","bene","issuer","issuerBene","OrderStatusMessage","stateName","OrderStatus","totalCredit","approvals","handleClickApprove","approvedCreditAmt","approvedCredit","model","parseFloat","cashSecure","allApproved","every","paidOut","drawn","requested","OrderNotes","latestVersionNotes","ClientInformationWrapper","HistoryOrder","ClientInformation","employee","clientOrders","setClientOrders","order","purchasedItem","BigStatsWrapper","BigNumberTitle","BigNumber","AnalysisWrapper","AnalysisBody","AnalysisDetail","pop","Financials","creditOverflow","lcCredit","issuerApproved","annualCashflow","balanceAvailable","ODColumn","ODValue","StyledInput","StyledPopupInput","nested","YesNoInput","SubmitWrapper","SubmitSection","OrderDetail","units","errorClicked","Input","opacity","OrderDetails","showExtra","setShowExtra","details","lateChargeDate","currencyDenomination","expirationDate","creditAmtVerbal","extraDetails","creditDeliveryMeans","draftsInvoiceValue","creditAvailability","partialShipmentAllowed","transshipmentAllowed","merchChargeLocation","chargeTransportationLocation","namedPlaceOfDestination","arrangingOwnInsurance","otherInstructions","merchDescription","transferableToClient","transferableToBeneficiary","lcValues","newLc","pair","k","v","scrollToAndHighlight","questionKey","scrollTimeout","selector","parentElement","querySelector","originalBackgroundColor","getComputedStyle","backgroundColor","addEventListener","scrollHandler","removeEventListener","animate","scrollIntoView","behavior","block","CreditOverflowPopup","0","1","selectedButtonIndices","setSelectedButtonIndex","prevSelectedButtonIndices","usePrevious","minimumIncrease","toString","increaseApprovedCreditValue","setIncreaseApprovedCreditValue","requestMoreCashValue","setRequestMoreCashValue","submissionAttempts","setSubmissionAttempts","increaseApprovedCreditRef","requestMoreCashRef","useFormikContext","setFieldValue","overflow","handleError","_","isEqual","visibility","Comments","setResponse","moment","format","authorType","commentIndex","respondable","textAlign","LCViewPage","setTotalCredit","BankEmployeeSignUpPage","Option","highlighted","Dropdown","items","selectedIndex","menu","setMenu","flex","onOutsideClick","borderRight","wordBreak","alignSelf","maxHeight","zIndex","item","faCheck","SearchableSelect","handleChange","highlightedItemIndex","setHighlightedItemIndex","autoComplete","onKeyDown","keyCode","itemIndex","onMouseDown","OutsideAlerter","wrapperRef","handleClickOutside","contains","ResizableScreenDiv","minTop","containerRef","setTop","getBoundingClientRect","Math","max","RouteBlockingModal","when","modalVisible","setModalVisible","lastLocation","setLastLocation","confirmedNavigation","setConfirmedNavigation","pathname","nextLocation","ClickableText","SectionSubtitle","StyledDiv","NestedButtonWrapper","ButtonVerticalWrapper","fitWidth","StyledSection","disabledTooltip","changeQuestionBackgroundTemp","scrollY","offsetTop","clientHeight","offsetHeight","parentKey","DocReqFieldWrapper","StyledDocReqField","StyledDocReqDiv","CommonNestedTypeComponent","keyName","StyledIcon","FontAwesomeIcon","option","answer","some","piece","markDisabled","questions","setLCApp","validateForm","changed","questionsCopy","dependency","parentQuestion","find","potential","findAndSetSectionsError","errors","setSectionsError","erroredAndTouchedSections","section","scrollToFirstErrorOnSection","selectedSection","erroredQuestionsOnSelectedSection","scrollTo","ErrorFocus","setTouched","prevErrors","prevTouched","prevValues","prevSelectedSection","prevIsSubmitting","keyToEffect","scroll","sectionsErrors","effects","add","effect","lcApp","setAppliedTemplate","appliedTemplate","setValues","autofillTemplateTimeout","beneficiaryAutocompleteTimeout","suggested","setSuggested","timeoutId","beneficiary_name","purchased_item","paramString","result","faTimes","template","loadTemplateAnswers","selectedTemplate","templateName","inputComponent","child","ObjectNestedTypeComponent","array_of_objs","getOptions","childQuestion","includeLast","valueOptionsSet","valObj","curInd","settings","obj","faTrash","indexToRemove","valueIndex","curVal","ArrayNestedTypeComponent","addition","createChildrenShape","questionType","LoadTemplate","setSelectedTemplate","lcTemplates","setLCTemplates","fetchTemplates","gridAutoRows","gridTemplateColumns","SaveTemplate","newTemplateValue","setNewTemplateValue","selectedSaveButton","setSelectedSaveButton","saveTemplateError","setSaveTemplateError","submitCount","setSubmitCount","templateNameSet","setTemplateNameSet","integrityError","setIntegrityError","trim","overwrite","template_name","res","createdTemplate","unsavedChanges","templateField","templateValue","emptyAndChanged","currentValue","Refresh","onbeforeunload","BankLCAppPage","persistedLcApp","selectedSectionIndex","setSelectedSectionIndex","sections","setSections","setInitialValues","sectionSet","initial","initialValue","createDefault","schema","createValidationSchema","removeItem","handleSubmit","erroredSectionSet","index","whiteSpace","flexGrow","newBusinessName","newBusinessAddress","BusinessSignUpPage","BusinessInvitePage","BusinessManageAccountPage","BusinessEmployeeSignUpPage","businessid","ClaimMessage","ClaimBeneficiaryStatusPage","init","setSuccess","msg","clearStatus","useStatus","BusinessLCFeed","currentlyOnClient","ClientLCFeedPage","businessname","BeneficiaryLCFeedPage","banks","setShownBanks","BankListEntry","BankDirectory","setBanks","shownBanks","BankDirectoryPage","App","Provider","path","BankLCFeedPageByClient","BankLiveLCFeedPage","BankLCFeedPage","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/main.92ab6b64.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\n\nexport const CSSReset = createGlobalStyle`\n/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n`;\n\nconst GlobalStyle = createGlobalStyle`\n  html {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  }\n  body {\n    background-color: #f6faff;\n  }\n`;\n\nexport default GlobalStyle;","import { setSessionExpiry } from \"./auth\";\nimport { snakeCase, camelCase } from \"lodash\";\n// import history from \"../history\";\n\nconst API_BASEURL = \"/api\";\n\nexport const objectToSnakeCase = object => {\n  let newObject = {};\n  if (typeof object !== \"object\" || object === null) {\n    return object;\n  } else if (Array.isArray(object)) {\n    return object.map(objectToSnakeCase);\n  } else if (typeof object === \"object\" && object !== null) {\n    Object.keys(object).forEach(key => {\n      newObject[snakeCase(key)] = objectToSnakeCase(object[key]);\n    });\n  } else {\n    console.error(\"objectToSnakeCase failed - unrecognized type.\");\n  }\n  return newObject;\n};\n\nexport const objectToCamelCase = object => {\n  let newObject = {};\n  if (typeof object !== \"object\" || object === null) {\n    return object;\n  } else if (Array.isArray(object)) {\n    return object.map(objectToCamelCase);\n  } else if (typeof object === \"object\" && object !== null) {\n    Object.keys(object).forEach(key => {\n      newObject[camelCase(key)] = objectToCamelCase(object[key]);\n    });\n  } else {\n    console.error(\"objectToCamelCase failed - unrecognized type.\");\n  }\n  return newObject;\n};\n\nexport const makeAPIRequest = async (\n  url,\n  requestType,\n  params,\n  returnFullResponse\n) => {\n  const requestURL = API_BASEURL + url;\n  const fetchParams = {\n    method: requestType,\n  };\n  if (requestType && requestType !== \"GET\") {\n    fetchParams.body = JSON.stringify(objectToSnakeCase(params));\n  }\n  const response = await fetch(requestURL, fetchParams);\n  if (response.status === 401 || response.status === 403) {\n    // history.push(\"/login\");\n    // // TODO show this error to the user\n    // return Promise.reject(\n    //   \"Error: Attempted to make unauthenticated API request. Redirecting to login.\"\n    // );\n  } else if (response.status < 200 || response.status >= 400) {\n    // TODO show this error to the user\n    if (returnFullResponse) {\n      return response;\n    } else {\n      return Promise.reject(response);\n    }\n  }\n\n  if (returnFullResponse) return response;\n  return objectToCamelCase(await response.json());\n};\n\nexport const postFile = async (url, file, returnFullResponse) => {\n  const requestURL = API_BASEURL + url;\n  const form = new FormData();\n  form.append(\"file\", file);\n  const headers = new Headers();\n  headers.append(\"Content-Type\", \"application/pdf\");\n  const response = await fetch(requestURL, {\n    method: \"PUT\",\n    body: form,\n    headers\n  });\n  if (response.status === 401 || response.status === 403) {\n    // history.push(\"/login\");\n    // // TODO show this error to the user\n    // return Promise.reject(\n    //   \"Error: Attempted to make unauthenticated API request. Redirecting to login.\"\n    // );\n  } else if (response.status < 200 || response.status >= 400) {\n    // TODO show this error to the user\n    if (returnFullResponse) {\n      return response;\n    } else {\n      return Promise.reject(response);\n    }\n  }\n\n  if (returnFullResponse) return response;\n  return objectToCamelCase(await response.json());\n};\n\nexport const logIn = async (email, password) => {\n  const requestURL = \"/api/user/login/\";\n  const response = await fetch(requestURL, {\n    method: \"POST\",\n    body: JSON.stringify({ email, password })\n  });\n  if (response.status !== 200) {\n    throw new Error(\n      \"Error logging in: recieved status code \" + response.status\n    );\n  }\n  const json = objectToCamelCase(await response.json());\n  setSessionExpiry(new Date(json.sessionExpiry).getTime());\n  if (json.userEmployee.employer)\n    return { ...json.userEmployee, business: json.usersEmployer };\n  else return { ...json.userEmployee, bank: json.usersEmployer };\n};\n\nexport const logOut = async setUser => {\n  const requestURL = \"/api/user/logout/\";\n  const response = await fetch(requestURL, {\n    method: \"POST\"\n  });\n  if (response.status !== 200) {\n    console.error(\"Error logging out: recieved status code \" + response.status);\n  }\n  setSessionExpiry(null);\n  setUser(null);\n  // TODO figure out why this doesn't work\n  // history.push(\"/login\");\n};\n","import { useEffect, createContext, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeAPIRequest } from \"./api\";\n\nexport const UserContext = createContext([null, () => null]);\nconst SESSION_EXPIRY = \"session_expiry\";\n\nexport const getSessionExpiry = () => {\n  const now = new Date();\n  const expirySeconds = localStorage.getItem(\"session_expiry\");\n  if (expirySeconds && now.getTime() > expirySeconds) {\n    return null;\n  }\n  return localStorage.getItem(SESSION_EXPIRY);\n};\n\nexport const setSessionExpiry = expiry => {\n  // TODO change this expiry date to be consistent with the backend\n  localStorage.setItem(SESSION_EXPIRY, expiry);\n};\n\nexport const useAuthentication = nextRoute => {\n  const history = useHistory();\n  let [user, setUser] = useContext(UserContext);\n\n  useEffect(() => {\n    if (user) return;\n    const sessionExists = getSessionExpiry();\n    if (!sessionExists) {\n      history.push(\"/login\", { nextRoute });\n    } else {\n      makeAPIRequest(\"/user/this_users_info/\")\n        .then(json => {\n          if (json.userEmployee.employer)\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n          else setUser({ ...json.userEmployee, bank: json.usersEmployer });\n        })\n        .catch(err => {\n          console.error(err);\n          history.push(\"/login\", { nextRoute });\n        });\n    }\n  }, [user, setUser, history, nextRoute]);\n};\n","import React, { useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useAuthentication, UserContext } from \"../../utils/auth\";\n\nconst HomePage = () => {\n  useAuthentication('/');\n  const [user] = useContext(UserContext);\n\n  return (\n    user ? <Redirect to={`/${user.business ? \"business\" : \"bank\"}/lcs`}/> : <div></div>\n  );\n};\n\nexport default HomePage;\n","import styled from \"styled-components\";\n\nconst StatusMessage = styled.div`\n  ${props => props.status && `\n    padding: 10px;\n  `}\n  ${props => !props.status && `\n    visibility: hidden;\n  `}\n  border-radius: 5px;\n  max-width: 400px;\n  overflow: scroll;\n  margin: 40px auto auto;\n  background-color: ${props => props.status === `error` ? `#dc3545` : props.status === `info` ? `#7dd8ff` : `#4bb759`};\n  color: #fff;\n  line-height: 1.25;\n`;\n\nexport default StatusMessage;\n","import logo from \"./images/logo.png\"\n\nconst config = {\n  logo,\n  accentColor: 'rgb(27, 108, 255)',\n};\n\nexport default config;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport StatusMessage from \"./ui/StatusMessage\";\nimport { css } from \"@emotion/core\";\n\nimport config from '../config';\n\nconst Margin = styled.div`\n  margin: 80px auto 40px;\n  max-width: 1000px;\n`;\n\nconst Title = styled.h1`\n  border-bottom: 1px solid #cdcdcd;\n  padding: 10px 0;\n  font-size: 24px;\n`;\n\nconst Subtitle = styled.h2`\n  margin-top: 40px;\n  text-align: center;\n  color: #555;\n`;\n\nconst RightAlignedLink = styled.a`\n  float : right;\n  padding: 10px 0;\n  color: #00d;\n  line-height: 1.25;\n`;\n\nconst Content = styled.div`\n  margin: 40px 0 0;\n`;\n\nconst Status = styled.div`\n  position: sticky;\n  bottom: 0;\n`;\n\nconst BasicLayout = ({ title, subtitle, link, linktext, isLoading, children,\n  marginStyle, statusComponent }) => {\n  return (\n    <Margin style={marginStyle}>\n      <Title>{title}</Title>\n      {subtitle && <Subtitle>{subtitle}</Subtitle>}\n      {link && <RightAlignedLink href={link}>{linktext}</RightAlignedLink>}\n      <Content>\n        {isLoading ? (\n          <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          />\n        ) : (\n          children\n        )}\n      </Content>\n      <Status>\n        {statusComponent}\n      </Status>\n    </Margin>\n  );\n};\n\nexport default BasicLayout;\n","import React, { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { get } from \"lodash\";\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { logIn } from \"../../utils/api\";\nimport { UserContext } from \"../../utils/auth\";\nimport config from '../../config';\n\nconst LoginForm = styled.form`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst LoginErrorMessage = styled.div`\n  ${props => props.showError && `\n    padding: 10px 10px;\n  `}\n  border-radius: 5px;\n  background-color: #dc3545;\n  color: #fff;\n`\n\nconst HelpEmail = styled.a`\n  font-size: 14px;\n  font-style: italic;\n  margin: 0 10px 10px;\n`\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled.input`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n`;\n\n// TODO revisit styles? not super happy with how this looks\n// also it says \"Log In\" 3 times on this page... we get it\nconst LogInButton = styled.button`\n  cursor: pointer;\n  transition: color 0.3s;\n  margin: 10px 5px;\n  border: none;\n  font-size: 16px;\n  background-color: #fff;\n\n  &:hover {\n    color: ${config.accentColor};\n  }\n`;\n\nconst FormInput = ({ title, value, type, onChange }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>\n        {title}\n        {type === \"password\" && (<HelpEmail href=\"mailto:support@bountium.com\"> Need help?</HelpEmail>)}\n      </FormInputTitle>\n      <StyledFormInput type={type} value={value} onChange={onChange} />\n    </FormInputWrapper>\n  );\n};\n\nconst LoginPage = ({ history, location }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const setUser = useContext(UserContext)[1];\n  const nextRoute = get(location, \"state.nextRoute\");\n  const clickLogIn = (e) => {\n    e.preventDefault();\n    logIn(email, password)\n      .then((json) => setUser(json))\n      .then(() => history.push(nextRoute || \"/\"))\n      .catch(() => {\n        setError(\"❕ We can't seem to log you in right now.\");\n      });\n  };\n  return (\n    <BasicLayout title=\"Log In\">\n      <LoginForm onSubmit={clickLogIn}>\n        <FormInput\n          title=\"Email\"\n          type=\"text\"\n          value={email}\n          onChange={e => setEmail(e.target.value)}\n        />\n        <FormInput\n          title=\"Password\"\n          type=\"password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          onKey\n        />\n        <HelpEmail>\n          New Here? <Link to=\"/bank/register\">Create Account</Link>\n        </HelpEmail>\n        <FormFooter>\n        <LoginErrorMessage showError={error}>\n          {error}\n        </LoginErrorMessage>\n          <LogInButton type=\"submit\">\n            Log In\n            <FontAwesomeIcon\n              icon={faArrowRight}\n              size=\"lg\"\n              color={config.accentColor}\n              style={{ marginLeft: \"10px\" }}\n            />\n          </LogInButton>\n        </FormFooter>\n      </LoginForm>\n    </BasicLayout>\n  );\n};\n\nexport default LoginPage;\n","import React, { useState, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUserCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { get } from \"lodash\";\n\n// TODO import different sized logos for performance\nimport config from \"../config\";\nimport { logOut } from \"../utils/api\";\n\nconst StyledNav = styled.nav`\n  display: flex;\n  align-items: center;\n  padding: 0 140px;\n  background-color: #fff;\n  min-height: 80px;\n  font-size: 14px;\n`;\n\nconst StyledNavLink = styled(NavLink)`\n  color: rgb(138, 138, 138);\n  margin-right: 40px;\n  text-decoration: none;\n  &.active {\n    color: #000;\n  }\n`;\n\nconst LoginMenu = styled.div`\n  margin-left: auto;\n  display: flex;\n`;\n\nconst StyledLoginLink = styled(NavLink)`\n  text-decoration: none;\n  color: #000;\n  transition: color 0.3s;\n\n  &:hover {\n    color: ${config.accentColor};\n  }\n`;\n\nconst StyledProfileLink = styled.a`\n  text-decoration: none;\n  color: #000;\n  transition: color 0.3s;\n  cursor: pointer;\n\n  &:hover {\n    color: ${config.accentColor};\n  }\n`;\n\nconst ProfileWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ProfileLinkWrapper = styled.button`\n  padding: 5px 10px;\n  border: 1px solid #fff;\n  border-radius: 5px;\n  background-color: #fff;\n  font-size: 14px;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }\n  transition: border 0.3s;\n  ${props => props.show && `border: 1px solid ${config.accentColor};`}\n`;\n\nconst DropDownWrapper = styled.div`\n  background-color: #fff;\n  min-width: 200px;\n  border-radius: 5px;\n  border: 1px solid #cdcdcd;\n  font-size: 14px;\n  padding: 10px;\n  opacity: 0;\n  transition: opacity 0.3s;\n  position: absolute;\n  top: 60px;\n  right: 50px;\n  ${props => props.show && `opacity: 1;`}\n`;\n\nconst DropDownHeader = styled.div`\n  color: ${config.accentColor};\n  font-size: 16px;\n  margin-bottom: 10px;\n  :not(:first-child) {\n    margin-top: 10px;\n  }\n`;\n\nconst DropDownLink = styled.div`\n  margin: 5px;\n  color: #000;\n  text-decoration: none;\n  border: none;\n\n  &:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nconst DropDownNavLink = styled(NavLink)`\n  margin: 5px;\n  color: #000;\n  text-decoration: none;\n  border: none;\n\n  &:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nconst ProfileDropDown = ({ user, setUser, show }) => {\n  const history = useHistory();\n  return (\n    <DropDownWrapper show={show}>\n      <DropDownHeader>\n        {user.bank\n          ? get(user, [\"bank\", \"name\"])\n          : get(user, [\"business\", \"name\"])}\n      </DropDownHeader>\n      {user.bank && <DropDownLink>View LC Application</DropDownLink>}\n      <DropDownLink>\n        View {user.bank ? \"Bank\" : \"Business\"} Profile (Coming soon)\n      </DropDownLink>\n      <DropDownHeader>{user.name}</DropDownHeader>\n      <DropDownNavLink to={`${user.bank ? \"/bank\" : \"/business\"}/account`}>\n        View Profile\n      </DropDownNavLink>\n      <DropDownLink\n        onClick={() => {\n          logOut(setUser)\n            .then(() => history.push(\"/login\"))\n            .catch(err => console.log(err));\n        }}\n      >\n        Log Out\n      </DropDownLink>\n    </DropDownWrapper>\n  );\n};\n\nconst LoginSection = ({ user, setUser }) => {\n  const [showingDropdown, setShowingDropdown] = useState(false);\n  const wrapperEl = useRef(null);\n  return (\n    <LoginMenu>\n      {user ? (\n        <ProfileWrapper>\n          <ProfileLinkWrapper\n            onClick={e => {\n              e.preventDefault();\n              setShowingDropdown(true);\n              wrapperEl.current.focus();\n            }}\n            ref={wrapperEl}\n            show={showingDropdown}\n            onBlur={() => setShowingDropdown(false)}\n          >\n            <StyledProfileLink>\n              {user.name}\n              <FontAwesomeIcon\n                icon={faUserCircle}\n                style={{ marginLeft: \"10px\", fontSize: \"16px\" }}\n              />\n            </StyledProfileLink>\n          </ProfileLinkWrapper>\n          <ProfileDropDown\n            user={user}\n            setUser={setUser}\n            show={showingDropdown}\n          />\n        </ProfileWrapper>\n      ) : (\n        <StyledLoginLink to=\"/login\">Log In</StyledLoginLink>\n      )}\n    </LoginMenu>\n  );\n};\n\nconst NavLogo = styled.img.attrs({ src: config.logo, alt: \"Bountium Logo\" })`\n  max-height: 50px;\n`;\n\nconst Nav = ({ user, setUser }) => {\n  return (\n    <StyledNav>\n      <StyledNavLink to=\"/\">\n        <NavLogo />\n      </StyledNavLink>\n      {user && (\n        <>\n          {user.business &&\n            <StyledNavLink to={`/banks/`}>\n              Apply for an LC\n            </StyledNavLink>\n          }\n          {user.business &&<StyledNavLink to={`/business/lcs/`}>\n            Manage your LCs and Applications\n          </StyledNavLink>}\n          {user.bank && <StyledNavLink to=\"/bank/lcs/apps\">\n            Review LC Applications\n          </StyledNavLink>}\n          {user.bank && <StyledNavLink to=\"/bank/lcs/live\">Manage Live LCs</StyledNavLink>}\n        </>\n      )}\n      <LoginSection user={user} setUser={setUser} />\n    </StyledNav>\n  );\n};\n\nexport default Nav;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowRight } from \"@fortawesome/free-solid-svg-icons\";\n\nimport config from '../../config';\n\nconst disabledBackgroundColor = `#888588`;\nconst disabledColor = `#f1ecec`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.unselected ? `#fff` : props.disabled ? disabledBackgroundColor : config.accentColor};\n  color: ${(props) => props.unselected ? config.accentColor : props.disabled ? disabledColor : `#fff`};\n  border-radius: 5px;\n  padding: 10px;\n  ${props => !props.disabled && `border: 1px solid ${config.accentColor};`}\n  font-size: 16px;\n  ${props => !props.disabled && `cursor: pointer;`}\n`;\n\nconst Button = ({ children, showArrow, arrowStyle, ...props }) => {\n  return (\n    <StyledButton {...props}>\n      {children}\n      {showArrow && (\n        <FontAwesomeIcon\n          icon={faArrowRight}\n          size=\"lg\"\n          color=\"#fff\"\n          style={{ marginLeft: \"10px\", ...arrowStyle }}\n        />\n      )}\n    </StyledButton>\n  );\n}\n\nexport default Button;\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\nimport { Link } from \"react-router-dom\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  newBankName: string().required(requiredMsg),\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg).matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BankSignUpPage = ({ history }) => {\n  const setUser = useContext(UserContext)[1];\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle={\n      <>\n      Get your team up & running with lightning-fast LC processing.\n      <br/><br/>\n      <span style={{fontStyle: 'italic'}}>Not a bank? </span>\n      <Link to=\"/business/register\">Register as a business</Link>\n      </>\n      }\n    >\n    <Formik\n      initialValues={{\n        newBankName: '', name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(\"/bank/\", \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, bank: json.usersEmployer });\n            history.push(\"/bank/invite\");\n          })\n          .then(() => setSubmitting(false));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n      <FormInput\n          title=\"Bank Name\"\n          name=\"newBankName\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n<Button showArrow disabled={isSubmitting}>\n  Sign Up\n</Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BankSignUpPage;\n","import React, { useContext } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { object, string } from 'yup';\n\nimport Button from '../../components/ui/Button';\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { useAuthentication, UserContext } from '../../utils/auth';\nimport { makeAPIRequest } from '../../utils/api';\nimport styled from 'styled-components';\nimport { useState } from 'react';\n\nconst StyledForm = styled(Form)`\n  display: flex;\n  max-width: 800px;\n  min-width: 400px;\n  margin: auto;\n  justify-content: center;\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nconst FormWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst validationSchema = object().shape({\n  email: string().email('Please enter a valid email address.').required('Please enter an email address.'),\n});\n\nconst StatusMessage = styled.div`\n  ${props => props.status && `\n    padding: 10px;\n  `}\n  border-radius: 5px;\n  max-width: 400px;\n  overflow: scroll;\n  margin: 40px auto auto;\n  background-color: ${props => props.status === `error` ? `#dc3545` : `#4bb759`};\n  color: #fff;\n`\n\nconst StyledField = styled(Field)`\n  border-radius: 5px;\n  border: 1px solid #cdcdcd;\n  font-size: 18px;\n  padding-left: 10px;\n`\n\nconst ErrorMessageWrapper = styled.div`\n  margin: auto;\n  max-width: 400px;\n  color: #dc3545;\n  margin-top: 10px;\n`\n\nconst ButtonHolder = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`\n\nconst BankInvitePage = ({ history }) => {\n  useAuthentication('/bank/invite');\n  const [user] = useContext(UserContext);\n  const [status, setStatus] = useState({ status: null, message: \"\"});\n  return (\n    <BasicLayout \n      title={`Welcome${(user ? ', ' + user.name : '')} 🚀`}\n      subtitle=\"Enter your teammates' emails to invite them to the platform.\"\n    >\n      <Formik\n        initialValues={{ email: '' }}\n        onSubmit={(values, { setSubmitting }) => {\n          setSubmitting(true);\n          makeAPIRequest(`/bank/${user.bank.id}/invite_teammate/`, \"POST\", { \"inviteeEmail\": values.email }, true)\n            .then((response) => {\n              if (response.status === 200) setStatus({ \n                status: \"success\",\n                message: `Invite sent to ${values.email}!`\n              });\n              else setStatus({\n                status: \"error\",\n                message: `Error inviting ${values.email}.`\n              })\n            });\n          setSubmitting(false);\n        }}\n        validationSchema={validationSchema}\n      >\n      {({ isSubmitting }) => (\n        <FormWrapper>\n        <StyledForm>\n          <StyledField type=\"email\" name=\"email\"/>\n          <Button type=\"submit\">{isSubmitting ? 'Sending...' : 'Send'}</Button>\n        </StyledForm>\n        <ErrorMessageWrapper>\n          <ErrorMessage name=\"email\"/>\n        </ErrorMessageWrapper>\n        </FormWrapper>\n      )}\n      </Formik>\n        {status.status && (<StatusMessage status={status.status}>{status.message}</StatusMessage>)}\n\n    <ButtonHolder>\n      <Button showArrow onClick={() => history.push(\"/bank/createApp\")}>\n        Next\n      </Button>\n    </ButtonHolder>\n    </BasicLayout>\n  );\n}\n\nexport default BankInvitePage;","import React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\nimport { get } from \"lodash\";\n\nimport Button from \"../../components/ui/Button\";\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { useAuthentication, UserContext } from \"../../utils/auth\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst signUpFormValidationSchema = object().shape({\n  newBankName: string(),\n  name: string(),\n  title: string(),\n  password: string().matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string()\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BankManageAccountPage = () => {\n  useAuthentication(\"/bank/account\");\n  const [user, setUser] = useContext(UserContext);\n\n  return (\n    <BasicLayout title=\"My Account 🛠\" subtitle=\"View and edit your user settings.\" isLoading={!user}>\n    <Formik\n      initialValues={{\n        name: get(user, ['name']), title: get(user, ['title']), password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/bank/${get(user, ['bank', 'id'])}/${get(user, ['id'])}/`, \"PUT\", { name: values.name, title: values.title })\n          .then((json) => {\n            setUser({ ...json.userEmployee, bank: json.usersEmployer });\n          })\n          .then(() => setSubmitting(false))\n          .catch((err) => console.error(err));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"New Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm New Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n          <Button disabled={isSubmitting}>\n            Save Update\n          </Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n}\n\nexport default BankManageAccountPage;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { get } from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\n\nimport BasicLayout from \"../../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../../utils/api';\nimport config from '../../../config';\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #000;\n  line-height: 1.25;\n`\n\nconst ListEntryField = styled.li`\n  flex-grow: 1;\n  flex-basis: 20%;\n  padding-left: 10px;\n  padding-right: 10px;\n`\n\nconst ListEntryWrapper = styled.ul`\n  display: flex;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border: 1px solid #cdcdcd;\n  font-weight: 500;\n  align-items: center;\n\n  ${(props) => !props.header && `\n  font-weight: 400;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n  transition: border 0.3s;\n  background-color: #fff;\n`\n\nconst useDebouncedEffect = (callback, parameters, delay) => {\n  const currentTimeout = useRef(null);\n\n  useEffect(() => {\n    if (currentTimeout.current !== null) {\n      clearTimeout(currentTimeout.current);\n    }\n    currentTimeout.current = setTimeout(callback, delay);\n    /* eslint-disable-next-line */\n  }, parameters);\n};\n\nconst Search = styled.input`\n  font-size: 16px;\n  padding: 5px 10px 5px 0;\n  border: none;\n`\n\nconst SearchWrapper = styled.div`\n  background-color: #fff;\n  border: 1px solid #cdcdcd;\n`\n\nconst Filter = ({ lcs, setShownLcs }) => {\n  const [filter, setFilter] = useState(null);\n  useDebouncedEffect(() => {\n    if (filter === null) return;\n    setShownLcs(lcs.filter(lc => lc.client.name.toLowerCase().includes(filter.toLowerCase())));\n  }, [filter, lcs], 200)\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n    <SearchWrapper>\n    <FontAwesomeIcon icon={faSearch}  style={{ padding: \"0 10px\"}} />\n      <Search type=\"text\" onChange={(e) => setFilter(e.target.value)} />\n    </SearchWrapper>\n      <span style={{ fontStyle: 'italic', marginLeft: '10px', fontWeight: 300, color: '#454545' }}>Start typing to filter by client</span>\n    </div>\n  )\n}\n\nconst LCListEntry = ({ lc }) => {\n  // NOTE: due_date and credit_amt will only be available for DigitalLCs\n  return (\n      <StyledLink to={`/lc/${lc.id}`}>\n      <ListEntryWrapper>\n        <ListEntryField>{lc.client.name}</ListEntryField>\n        <ListEntryField>{get(lc, 'beneficiary.name') || \"Unknown\"}</ListEntryField>\n        <ListEntryField>{lc.applicationDate}</ListEntryField>\n        <ListEntryField>{lc.draftPresentationDate || \"N/A\"}</ListEntryField>\n        <ListEntryField>{lc.creditAmt || \"N/A\"}</ListEntryField>\n      </ListEntryWrapper>\n      </StyledLink>\n  )\n}\n\nconst LCFeed = ({ title, user, url, hideSearch }) => {\n  const [lcs, setLcs] = useState(null);\n  const [shownLcs, setShownLcs] = useState(null);\n  const bankid = get(user, ['bank', 'id']);\n\n  useEffect(() => {\n    if (!bankid) return;\n    makeAPIRequest(url)\n      .then(json => {\n        setLcs(json);\n        setShownLcs(json);\n      });\n  }, [bankid, url]);\n\n  return (\n    <BasicLayout\n      title={title}\n      isLoading={!shownLcs}\n    >\n    {/* \"Heading\" of the feed - delete if you think it unnecessary*/}\n    <div>\n      {!hideSearch && <Filter lcs={lcs} setShownLcs={setShownLcs} />}\n      <ListEntryWrapper header>\n        <ListEntryField>Client</ListEntryField>\n        <ListEntryField>Beneficiary</ListEntryField>\n        <ListEntryField>Applied</ListEntryField>\n        <ListEntryField>Drafts Due</ListEntryField>\n        <ListEntryField>Transaction Size</ListEntryField>\n      </ListEntryWrapper>\n    </div>\n    {(shownLcs && (shownLcs.length > 0 ? (\n      <div>\n    {shownLcs.map(lc => <LCListEntry lc={lc} key={lc.id}/>)}\n    </div>\n    ) : (<center style={{ marginTop: '30px', fontStyle: 'italic', color: '#888' }}>You don't have any LCs yet.</center>)))}\n    </BasicLayout>\n  )\n\n}\n\nexport default LCFeed;\n","import React, { useContext } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { get } from \"lodash\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nconst BankLCAppFeedPage = () => {\n  useAuthentication('/bank/lcs/apps');\n  const [user] = useContext(UserContext);\n  const bankid = get(user, ['bank', 'id']);\n  return <LCFeed \n    title=\"All LC Applications 📝\" \n    url={`/lc/by_bank/${bankid}/awaiting_issuer_approval/`}\n    user={user}\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React, { useContext } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { get } from \"lodash\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nconst BankLCAppFeedPage = () => {\n  useAuthentication('/bank/lcs/live');\n  const [user] = useContext(UserContext);\n  const bankid = get(user, ['bank', 'id']);\n  return <LCFeed \n    title=\"All Live LCs 📄\" \n    url={`/lc/by_bank/${bankid}/live/`}\n    user={user}\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React, { useContext } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { get } from \"lodash\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nconst BankLCAppFeedPage = ({ match }) => {\n  useAuthentication('/bank/lcs');\n  const [user] = useContext(UserContext);\n  const bankid = get(user, ['bank', 'id']);\n  return <LCFeed \n    title=\"All LC Applications and Live LCs 📝📄\" \n    url={`/lc/by_bank/${bankid}/`}\n    user={user}\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React, { useState, useContext, useEffect } from \"react\";\nimport LCFeed from \"./LCFeed\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\nimport { makeAPIRequest } from \"../../../utils/api\";\n\nconst BankLCAppFeedPage = ({ match }) => {\n  useAuthentication(`/bank/lcs/client/${match.params.clientid}`);\n  const [user] = useContext(UserContext);\n  const [client, setClient] = useState(null);\n  console.log(client)\n  useEffect(() => {\n    makeAPIRequest(`/business/${match.params.clientid}/`)\n      .then(json => setClient(json))\n  }, [match.params.clientid])\n  const title = client ? `All LCs for ${client.name}` : `All LCs for Client #${match.params.clientid}`;\n  return <LCFeed \n    title={title} \n    url={`/lc/by_client/${match.paramsclientid}/`}\n    user={user}\n    hideSearch\n    />\n}\n\nexport default BankLCAppFeedPage\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport { css } from \"@emotion/core\";\nimport { Link } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\n\nimport config from '../../config'\n\nconst Margin = styled.div`\n  margin: 40px auto;\n  max-width: 1000px;\n`;\n\nconst TitleWrapper = styled.div`\n  display: flex;\n  border-bottom: 1px solid #cdcdcd;\n  padding: 10px 0;\n  font-size: 24px;\n`\n\nconst LCTitle = styled(Link)`\n  margin-right: 15px;\n  font-weight: 500;\n  text-decoration: none;\n  color: #000;\n`\n\nconst Subtitle = styled.h2`\n  font-weight: 200;\n`;\n\nconst Content = styled.div`\n  margin: 40px 0 0;\n`;\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #454545;\n  margin: 20px 0;\n  display: block;\n`\n\nconst LCView = ({ lc, children }) => {\n  return (\n    <Margin>\n      <StyledLink to=\"/\">\n        <FontAwesomeIcon icon={faArrowLeft} color={config.accentColor} style={{ paddingRight: \"10px\"}} /> \n        Back to LCs\n      </StyledLink>\n        {!lc ? (\n          <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          />\n        ) : (\n          <>\n      <TitleWrapper>\n      {lc.client &&\n          <LCTitle to={`/bank/lcs/client/${lc.client.id}`}>{lc.client.name}</LCTitle>\n      }\n        <Subtitle>{`LC #${lc.id}`}</Subtitle>\n      </TitleWrapper>\n      <Content>\n          {children}\n      </Content>\n      </>\n        )}\n    </Margin>\n  );\n};\n\nexport default LCView;\n","import React, { useRef, useEffect, useState } from 'react';\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport { css } from '@emotion/core';\nimport pdfjs from 'pdfjs-dist';\n\nimport pdfjsWorker from 'pdfjs-dist/build/pdf.worker.entry';\nimport config from '../../config';\n\npdfjs.GlobalWorkerOptions.workerSrc = pdfjsWorker;\n\nconst PdfComponent = ({ src }) => {\n  const canvasRef = useRef(null)\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchPdf = async () => {\n      setIsLoading(true);\n      const loadingTask = pdfjs.getDocument(src);\n\n      const pdf = await loadingTask.promise;\n\n      const firstPageNumber = 1;\n\n      const page = await pdf.getPage(firstPageNumber);\n\n      const scale = 1;\n      const viewport = page.getViewport({scale: scale});\n\n      // Prepare canvas using PDF page dimensions\n      const canvas = canvasRef.current;\n\n      const context = canvas.getContext('2d');\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n\n      // Render PDF page into canvas context\n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport\n      };\n\n      const renderTask = page.render(renderContext);\n\n      await renderTask.promise;\n    };\n\n    fetchPdf()\n      .then(() => setIsLoading(false));\n  }, [src]);\n\n  return (\n    <>\n    {isLoading && \n          <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          />\n    }\n    <canvas\n      ref={canvasRef}\n      width={700}\n      height={window.innerHeight}\n      style={{border: '1px solid #cdcdcd', display: isLoading ? 'none' : 'block'}}\n    />\n    </>\n  );\n}\n\nexport default PdfComponent;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronDown, faChevronRight, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nimport config from '../../config';\nimport AnimateHeight from \"react-animate-height\";\n\nconst BasicView = styled.div`\n  border: 1px solid #dfdfdf;\n  background-color: #fff;\n  border-radius: 0 0 20px 20px;\n  margin-bottom: 30px;\n`\n\nconst PanelTitle = styled.h2`\n  background-color: ${(props) => props.highlight ? config.accentColor : `rgb(199, 222, 255)`};\n  border-bottom: 1px solid #dfdfdf;\n  padding: 15px 20px;\n  display: flex;\n  justify-content: space-between;\n  ${(props) => props.highlight && `\n    font-weight: 500;\n    color: #fff;\n  `}\n`\n\nconst PanelBody = styled.div`\n  padding: 15px 20px;\n  line-height: 1.25;\n`\n\nconst PanelTitleAlt = styled.div`\n  color: ${config.accentColor};\n  margin-right: 5px;\n`\n\nconst Panel = ({ title, children, highlight, expand, setExpand, editing, setEditing, canEdit, ...props }) => {\n  const expandEnabled = [true, false].includes(expand);\n  return (\n    <BasicView {...props}>\n      <PanelTitle highlight={highlight} clickable={expandEnabled}>\n        {title}\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n        {canEdit && (editing\n          ? (\n            <>\n            <PanelTitleAlt>Editing</PanelTitleAlt>\n            <span\n              style={{fontStyle: 'italic', fontSize: '14px', color: '#555'}}\n              onClick={() => setEditing(false)}\n              >Cancel</span>\n            </>\n          )\n          : <FontAwesomeIcon\n            icon={faPencilAlt}\n            onClick={() => setEditing(true)}\n            style={{\n              color: config.accentColor,\n            }}\n            />\n        )}\n        {expandEnabled &&\n          <FontAwesomeIcon\n            icon={expand ? faChevronDown : faChevronRight}\n            onClick={() => setExpand(e => !e)}\n            style={{\n              color: config.accentColor,\n              padding: '0 10px',\n              cursor: 'pointer',\n            }}\n            />\n        }\n        </div>\n      </PanelTitle>\n      <PanelBody>{children}</PanelBody>\n    </BasicView>\n  )\n}\n\nexport default Panel;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Field, Form, useField } from 'formik';\nimport { object, string, number, boolean, array, date } from 'yup';\nimport Pdf from './Pdf';\nimport MoonLoader from 'react-spinners/MoonLoader'\nimport { css } from \"@emotion/core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronDown, faChevronRight, faCheckSquare } from \"@fortawesome/free-solid-svg-icons\";\nimport { get, camelCase } from \"lodash\";\n\nimport { makeAPIRequest, postFile, objectToCamelCase } from '../../utils/api';\nimport Panel from './Panel';\nimport Button from '../../components/ui/Button';\nimport config from \"../../config\";\n\nconst ModalBackground = styled.div`\n  ${props => !props.show && `display: none;`}\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.4);\n  overflow: scroll;\n`\n\nconst ModalWrapper = styled.div`\n  max-width: 70%;\n  background-color: #fff;\n  border-radius: 10px;\n  margin: 10% auto;\n  padding: 20px 30px;\n`\n\nconst ModalFlex = styled.div`\n  display: flex;\n  justify-content: space-around;\n`\n\nconst ModalLeftColumn = styled.div`\n  flex-grow: 1;\n  min-width: 30%;\n  flex-basis: 40%;\n`\n\nconst ModalRightColumn = styled.div`\n  flex-grow: 1;\n  flex-basis: 50%;\n`\n\nconst ModalButtonsWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n  margin: 20px auto 30px;\n`\n\nconst MODAL_TYPES = { CREATE: 'create', UPLOAD: 'upload'}\n\nconst Modal = ({ show, docReq, hideModal, refreshLc, lc }) => {\n  const [type, setType] = useState(MODAL_TYPES.CREATE);\n  if (docReq && docReq.type === 'generic') return (\n    <ModalBackground show={show}>\n    <ModalWrapper>\n      <UploadModal docReq={docReq} refreshLc={refreshLc} hideModal={hideModal}/>\n      <div style={{marginTop: '20px', display: 'flex', justifyContent: 'flex-end'}}>\n        <Button onClick={hideModal}>Close</Button>\n      </div>\n    </ModalWrapper>\n    </ModalBackground>\n  );\n  return (\n    <ModalBackground show={show}>\n      {docReq && docReq.linkToSubmittedDoc ? (\n      <ModalWrapper>\n        <ViewModal docReq={docReq}/>\n        <div style={{marginTop: '20px', display: 'flex', justifyContent: 'flex-end'}}>\n          <Button onClick={hideModal}>Close</Button>\n        </div>\n      </ModalWrapper>\n      ) : docReq && (\n      <ModalWrapper>\n        <ModalButtonsWrapper>\n          <Button onClick={() => setType(MODAL_TYPES.CREATE)} unselected={type !== MODAL_TYPES.CREATE}>Create Digital DocReq</Button>\n          <Button onClick={() => setType(MODAL_TYPES.UPLOAD)} unselected={type !== MODAL_TYPES.UPLOAD}>Upload PDF DocReq</Button>\n        </ModalButtonsWrapper>\n        {type === MODAL_TYPES.CREATE\n          ? <CreateModal docReq={docReq} refreshLc={refreshLc} hideModal={hideModal} lc={lc}/>\n          : <UploadModal docReq={docReq} refreshLc={refreshLc} hideModal={hideModal}/>\n        }\n        <div style={{marginTop: '20px', display: 'flex', justifyContent: 'flex-end'}}>\n          <Button onClick={hideModal}>Cancel</Button>\n        </div>\n      </ModalWrapper>\n      )}\n    </ModalBackground>\n  )\n}\n\nconst ViewModal = ({ docReq }) => {\n  const lcid = docReq && docReq.lcid;\n  // NULL if the docreq is not digital\n  const [digitalDocReq, setDigitalDocReq] = useState(null);\n  useEffect(() => {\n    if (!docReq) return;\n    makeAPIRequest(`/lc/${lcid}/doc_req/${docReq.id}/`)\n      .then(data => {\n        // HACK we can \"guess\" if there is a digital doc req if the seller name is defined\n        if (data.sellerName === undefined) {\n          setDigitalDocReq(null);\n        } else {\n          setDigitalDocReq(data);\n        }\n      });\n  }, [docReq, lcid])\n  if (!docReq) return null;\n  const fields = !digitalDocReq ? [] : [\n    {title: \"Seller Name\", value: digitalDocReq.sellerName},\n    {title: \"Seller Address\", value: digitalDocReq.sellerAddress},\n    {title: \"Shipping Date\", value: digitalDocReq.indicatedDateOfShipment},\n    {title: \"Country of Export\", value: digitalDocReq.countryOfExport},\n    // {title: \"Incoterms Of Sale\", value: digitalDocReq.incotermsOfSale},\n    {title: \"Reason for Export\", value: digitalDocReq.reasonForExport},\n    {title: \"Consignee Name\", value: digitalDocReq.consigneeName || digitalDocReq.buyerName},\n    {title: \"Consignee Address\", value: digitalDocReq.consigneeAddress || digitalDocReq.buyerAddress},\n    {title: \"Buyer Name\", value: digitalDocReq.buyerName},\n    {title: \"Buyer Address\", value: digitalDocReq.buyerAddress},\n    {title: \"Description of Goods\", value: digitalDocReq.goodsDescription},\n    {title: \"Units of Measure\", value: digitalDocReq.unitOfMeasure},\n    {title: \"Units Purchased\", value: digitalDocReq.unitsPurchased},\n    {title: \"Price per Unit\", value: digitalDocReq.unitPrice},\n    {title: \"Currency of Settlement\", value: digitalDocReq.currency},\n    {title: \"Harmonized Schedule Code\", value: digitalDocReq.hsCode},\n    {title: \"Country of Origin\", value: digitalDocReq.countryOfOrigin},\n  ]\n  const link = docReq.linkToSubmittedDoc;\n  return (\n    <ModalFlex>\n    {digitalDocReq && (\n        <ModalLeftColumn>\n          <DocReqTitle style={{marginTop: '0'}}>{docReq.docName}</DocReqTitle>\n          {fields.map(field => field && (\n            <div key={field.title}>\n              <SmallHeader>{field.title}</SmallHeader>\n              <DocReqTitle>{field.value}</DocReqTitle>\n            </div>\n          ))}\n        </ModalLeftColumn>\n    )}\n        <ModalRightColumn >\n          <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}}>\n          <DocReqTitle style={{margin: '0'}}>PDF Preview</DocReqTitle>\n          <Button style={{padding: '5px 10px'}}>\n            <a href={link} style={{color: \"#fff\", fontSize: '14px', textDecoration: 'none'}}>Download PDF</a>\n          </Button>\n          </div>\n          {link && <Pdf src={`/api/lc/${lcid}/doc_req/${docReq.id}/file/`} />}\n        </ModalRightColumn>\n        </ModalFlex>\n  )\n}\n\nconst InputWrapper = styled.div`\n  max-width: 700px;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border-radius: 10px;\n  border: 1px solid #cdcdcd;\n\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }\n  transition: border 0.3s;\n  background-color: #fff;\n`\n\nconst QuestionText = styled.h3`\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.25;\n`\n\nconst Subtitle = styled.div`\n  margin-top: 15px;\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`\n\nconst Asterisk = styled.span`\n  color: #dc3545;\n  font-size: 16px;\n`\nconst StyledFormInput = styled(Field)`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  font-size: 16px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  margin-top: 15px;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  border: 1px solid ${config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  margin: 10px 0;\n  max-width: 45%;\n  display: flex;\n  align-items: center;\n`\n\n\nconst BasicInput = ({ question, children, subtitle }) => {\n  const [, meta] = useField(question.key);\n  const { error, touched } = meta;\n  return (\n    <InputWrapper>\n      <QuestionText>{question.questionText}{question.required ? (<Asterisk> *</Asterisk>) : null}</QuestionText>\n      {subtitle && <Subtitle>{subtitle}</Subtitle>}\n      {error && touched && <Subtitle style={{color: '#dc3545'}}>{typeof error !== 'object' ? error : null}</Subtitle>}\n      {children}\n    </InputWrapper>\n  )\n}\n\nconst TextInput = ({ question }) => {\n  return (\n    <BasicInput question={question}>\n      <StyledFormInput type=\"text\" name={question.key}/>\n    </BasicInput>\n  );\n};\n\nconst NumberInput = ({ question }) => {\n  return (\n    <BasicInput question={question}>\n      <StyledFormInput type=\"number\" name={question.key}/>\n    </BasicInput>\n  )\n}\n\nconst YesNoInput = ({ question }) => {\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  }\n\n  return (\n    <BasicInput question={question}>\n      <ButtonWrapper style={{ justifyContent: 'center' }}>\n        <StyledButton onClick={handleClick(true)} selected={value === true}>Yes</StyledButton>\n        <StyledButton onClick={handleClick(false)} selected={value === false}>No</StyledButton>\n      </ButtonWrapper>\n    </BasicInput>\n  )\n}\n\nconst AllRadiosWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst RadioInput = ({ question }) => {\n  const options = JSON.parse(question.options);\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  }\n  return (\n    <BasicInput question={question}>\n    <AllRadiosWrapper>\n      <ButtonWrapper>\n    {options && options.map((opt) => (\n        <StyledButton onClick={handleClick(opt)} selected={value === opt} key={opt}>{opt}</StyledButton>\n    ))}\n      </ButtonWrapper>\n    </AllRadiosWrapper>\n    </BasicInput>\n  )\n}\n\nconst DateInput = ({ question }) => {\n  return (\n    <BasicInput question={question}>\n      <StyledFormInput type=\"date\" name={question.key}/>\n    </BasicInput>\n  )\n}\n\nconst AllCheckboxesWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst CheckboxInput = ({ question }) => {\n  const options = JSON.parse(question.options);\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    const i = value.indexOf(val);\n    if (i !== -1) {\n      setValue(value.slice(0, i).concat(value.slice(i + 1)));\n    } else {\n      setValue(value.concat([val]));\n    }\n  }\n\n  return (\n    <BasicInput question={question} subtitle=\"Check all that apply.\">\n    <AllCheckboxesWrapper>\n      <ButtonWrapper>\n    {options && options.map((opt) => (\n        <StyledButton onClick={handleClick(opt)} selected={value.indexOf(opt) !== -1} key={opt}>\n        {value.indexOf(opt) !== -1 && <FontAwesomeIcon icon={faCheckSquare} style={{ marginRight: '10px' }}/>}\n        {opt}\n        </StyledButton>\n    ))}\n      </ButtonWrapper>\n    </AllCheckboxesWrapper>\n    </BasicInput>\n  )\n}\n\nconst TYPE_TO_COMPONENT = {\n  text: TextInput,\n  decimal: NumberInput,\n  number: NumberInput,\n  boolean: YesNoInput,\n  radio: RadioInput,\n  date: DateInput,\n  checkbox: CheckboxInput,\n};\n\nconst TYPE_TO_DEFAULT = {\n  text: \"\",\n  decimal: 0,\n  number: 0,\n  boolean: null,\n  radio: null,\n  date: (new Date()).toISOString().slice(0, 10),\n  checkbox: [],\n}\n\nconst REQUIRED_MSG = \"This field is required.\";\n\nconst TYPE_TO_VALIDATION_SCHEMA = {\n  text: string(),\n  decimal: number(),\n  number: number(),\n  boolean: boolean().nullable(),\n  radio: string().nullable(),\n  date: date(),\n  checkbox: array().of(string()),\n}\n\nconst CreateModal = ({ docReq, hideModal, refreshLc, lc}) => {\n  const [fields, setFields] = useState([]);\n  const [suggestedFields, setSuggestedFields] = useState([]);\n  useEffect(() => {\n    if (!docReq) return undefined;\n    makeAPIRequest(`/lc/supported_creatable_docs/${docReq.type}/`)\n      .then(d => setFields(d));\n    makeAPIRequest(`/lc/${lc.id}/doc_req/${docReq.id}/autopopulate/`)\n      .then(s => setSuggestedFields(s));\n  }, [docReq])\n  if (!docReq) return null;\n  const schemaObj = {};\n  let initialValues = {};\n  let validationSchema = null;\n  fields.forEach(q => {\n    Object.keys(suggestedFields).forEach(key => {\n      if (camelCase(q.key) == key) {\n        initialValues[q.key] = get(lc, suggestedFields[key])\n      }\n    });\n    if (!initialValues[q.key]) initialValues[q.key] = TYPE_TO_DEFAULT[q.type];\n  });\n  fields.forEach(q => {\n    schemaObj[q.key] = TYPE_TO_VALIDATION_SCHEMA[q.type];\n    if (q.required) {\n      schemaObj[q.key] = schemaObj[q.key].required(REQUIRED_MSG);\n    }\n  });\n  validationSchema = object().shape(schemaObj);\n  console.log(initialValues)\n  return fields.length > 0 && (\n    <Formik\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      enableReinitialize\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        const app = {};\n        Object.entries(values).forEach((kv) => {\n          const [key, value] = kv;\n          if (value === null) {\n          } else {\n            app[key] = value;\n          }\n        });\n        const { lcid, id } = docReq;\n        makeAPIRequest(`/lc/${lcid}/doc_req/${id}/`, 'POST', app, true)\n          .then(() => hideModal())\n          .then(() => refreshLc())\n          .then(() => setSubmitting(false));\n          // .then(async res => {\n          //   let text = await res.text();\n          //   if (res.status === 200) {\n          //     localStorage.removeItem(`lc/${match.params.bankid}`);\n          //     setStatus({status: \"success\", message: \"Your LC app has been sent in! The bank will get back to you ASAP.\"});\n          //   } else {\n          //     if (text.length > 250) text = \"Unknown server error. Please contact steve@bountium.org.\"\n          //     localStorage.setItem(`lc/${match.params.bankid}`, JSON.stringify(values))\n          //     setStatus({status: \"error\", message: `Error submitting form: ${text}`});\n          //   }\n          //   })\n      }}\n    >\n    {({ isSubmitting }) => (\n      isSubmitting ? <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          /> : (\n      <Form>\n      <DocReqTitle>Create {docReq.docName}</DocReqTitle>\n      {fields && fields.map(question => {\n        const Component = TYPE_TO_COMPONENT[question.type];\n        return <Component key={question.key} question={question} />;\n      })}\n      <div style={{display: \"flex\", justifyContent: \"center\", marginTop: \"20px\"}}>\n      <Button disabled={isSubmitting} type=\"submit\">Create</Button>\n      </div>\n      </Form>\n\n          )\n    )}\n      </Formik>\n  )\n}\n\nconst UploadModal = ({ docReq, refreshLc, hideModal }) => {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const uploadFile = (file) => {\n    if (!file) {\n      console.error('No file found.');\n      return;\n    }\n    setIsSubmitting(true);\n    const { lcid, id } = docReq;\n    postFile(`/lc/${lcid}/doc_req/${id}/`, file)\n      .then(() => hideModal())\n      .then(() => refreshLc())\n      .then(() => setIsSubmitting(false));\n  }\n\n  return (\n    <>\n      <DocReqTitle>Upload {docReq.docName}</DocReqTitle>\n      <div style={{ display: \"flex\", flexDirection: \"column\", maxWidth: '700px' , margin: 'auto'}}>\n        {isSubmitting ? <MoonLoader\n            size={45}\n            color={config.accentColor}\n            loading={true}\n            css={css`\n              margin: 0 auto;\n            `}\n          /> : (\n        <FileUpload>\n          Upload File\n          <input\n            type=\"file\"\n            onChange={(e) => uploadFile(e.target.files[0])}\n            style={{ display: \"none\" }}\n          />\n        </FileUpload>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst DocumentaryEntryFlex = styled.div`\n  display: flex;\n  align-items: center;\n  > :nth-child(1) {\n    min-width: 60%;\n  }\n  > :nth-child(2) {\n    min-width: 20%;\n  }\n  > :nth-child(3) {\n    min-width: 20%;\n  }\n  ${props => props.clickable && `cursor: pointer;`}\n`\n\nconst DocumentaryEntryWrapper = styled.div`\n  border-bottom: 1px solid #cdcdcd;\n`\n\nconst DocReqTitle = styled.div`\n  font-weight: 500;\n  font-size: 24px;\n  max-width: 700px;\n  margin: 5px auto 20px;\n  display: flex;\n  align-items: center;\n`\n\nconst DocReqDate = styled.div`\n  font-size: 14px;\n`\n\nconst DocReqStatus = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n`\n\nconst ExpandedDocumentaryEntry = styled.div`\n  padding-bottom: 10px;\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.5;\n`\n\nconst FileUpload = styled.label`\n  padding: 5px 10px;\n  border: 1px solid #dcdcdc;\n  margin-right: auto;\n  cursor: pointer;\n`\n\nconst DocumentaryEntryEvaluation = styled.div`\n  display: flex;\n  margin-top: 10px;\n\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`\n\nconst SmallHeader = styled.div`\n  font-size: 12px;\n  min-width: 150px;\n  margin-right: 50px;\n`\n\nconst DocumentaryRequirement = ({ documentaryRequirement: docReq, lcid, userType, status, live, refreshLc, showModal, ...props }) => {\n  const { docName: title, dueDate, linkToSubmittedDoc, id, requiredValues, rejected } = docReq;\n  const [expanded, setExpanded] = useState(false);\n  const [comments, setComments] = useState('');\n\n  const approve = () => {\n    makeAPIRequest(`/lc/${lcid}/doc_req/${id}/evaluate/`, 'POST', {\n      approve: true, complaints: comments,\n    }).then(() => refreshLc());\n  }\n\n  const reject = () => {\n    makeAPIRequest(`/lc/${lcid}/doc_req/${id}/evaluate/`, 'POST', {\n      approve: false, complaints: comments,\n    }).then(() => refreshLc());\n  }\n\n  return (\n    <DocumentaryEntryWrapper>\n      <DocumentaryEntryFlex\n        clickable\n        onClick={() => setExpanded((e) => !e)}\n        {...props}\n      >\n        <DocReqTitle style={{ margin: \"15px 0\" }}>\n          {title}\n          <FontAwesomeIcon\n            icon={expanded ? faChevronDown : faChevronRight}\n            style={{ color: config.accentColor, marginLeft: \"10px\" }}\n          />\n        </DocReqTitle>\n        <DocReqDate>{dueDate}</DocReqDate>\n        <DocReqStatus>{status}</DocReqStatus>\n      </DocumentaryEntryFlex>\n      {expanded && (\n        <ExpandedDocumentaryEntry>\n          <DocumentaryEntryFlex>\n            <div>\n              <div style={{ marginRight: \"30px\" }}>\n                Required Values: {requiredValues}\n              </div>\n            </div>\n            <div>\n              {live && linkToSubmittedDoc && <Button style={{ marginRight: \"10px\", minWidth: '80px' }}\n                onClick={() => showModal(docReq, lcid)}>View</Button>}\n            </div>\n            <div>\n              {linkToSubmittedDoc && (\n                <div>\n                  File: <a href={linkToSubmittedDoc}>order.pdf</a>\n                </div>\n              )}\n              {live &&\n                status !== \"Approved\" &&\n                (!linkToSubmittedDoc || rejected) && (\n                  <Button style={{ marginRight: \"10px\", minWidth: '80px' }}\n                onClick={() => showModal(docReq, lcid)}>Create</Button>\n                )}\n            </div>\n          </DocumentaryEntryFlex>\n          {live &&\n            userType === \"issuer\" &&\n            status !== \"Approved\" &&\n            !rejected &&\n            linkToSubmittedDoc && (\n              <DocumentaryEntryEvaluation>\n                <Button onClick={approve}>Approve</Button>\n                <Button onClick={reject}>Reject</Button>\n                <div>\n                  <SmallHeader>Comments</SmallHeader>\n                  <input\n                    type=\"text\"\n                    value={comments}\n                    onChange={(e) => setComments(e.target.value)}\n                  />\n                </div>\n              </DocumentaryEntryEvaluation>\n            )}\n        </ExpandedDocumentaryEntry>\n      )}\n    </DocumentaryEntryWrapper>\n  );\n}\n\nconst useModal = () => {\n  const [isModalShowing, setIsModalShowing] = useState(false);\n  const [modalDocReq, setModalDocReq] = useState(null);\n\n  return {\n    showModal: (docReq, lcid) => {\n      setIsModalShowing(true);\n      setModalDocReq({...docReq, lcid});\n    },\n    hideModal: () => setIsModalShowing(false),\n    isModalShowing,\n    modalDocReq\n  }\n}\n\nconst DocumentaryRequirements = ({ lc, userType, live, refreshLc }) => {\n  const { showModal, hideModal, isModalShowing, modalDocReq } = useModal();\n  const docReqs = lc.documentaryrequirementSet;\n  return (\n    <Panel title=\"Documentary Requirements\">\n      <DocumentaryEntryFlex>\n        <SmallHeader style={{margin: \"0\"}}>Document Title</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Recieve By</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Status</SmallHeader>\n      </DocumentaryEntryFlex>\n      {docReqs ? docReqs.map(d =>\n        <DocumentaryRequirement\n          documentaryRequirement={d}\n          status={d.satisfied ? \"Approved\" : d.rejected ? \"Rejected\" : d.linkToSubmittedDoc ? \"Pending\" : \"Incomplete\"}\n          lcid={lc.id}\n          live={live}\n          userType={userType}\n          refreshLc={refreshLc}\n          key={d.docName}\n          showModal={showModal}\n          />\n        ) : (\n          <div style={{ marginTop: \"10px\", fontStyle: \"italic\", fontWeight: \"300\"}}>\n            There are no documentary requirements for this LC.\n          </div>\n        )\n      }\n      <Modal show={isModalShowing} docReq={modalDocReq} hideModal={hideModal} refreshLc={refreshLc} lc={lc}/>\n    </Panel>\n  );\n}\n\nexport default DocumentaryRequirements;\n","import React, {useEffect} from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"./Button\";\nimport config from \"../../config\";\n\nconst Background = styled.div`\n  position: fixed;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  left: 0%;\n  top: 0%;\n  z-index: 2;\n  background-color: rgba(211, 211, 211, 0.5);\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Container = styled.div`\n  background-color: white;\n  opacity: 100%;\n  padding: 20px;\n  max-width: 80%;\n  max-height: 80%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Title = styled.div`\n  font-size: 26px;\n  padding-bottom: 15px;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst ActionButton = styled(Button)`\n  margin: 5px;\n  min-width: 72px;\n`;\n\nconst CancelButton = styled(ActionButton)`\n  color: ${config.accentColor};\n  background-color: transparent;\n  min-width: 72px;\n`;\n\nconst Error = styled.span`\n  display: inline-flex;\n  align-items: center;\n  color: red;\n  font-style: italic;\n  padding-right: 20px;\n`;\n\nexport const Modal = ({show, title, children, onCancel, onSelect, containerStyle,\n  onShow, error, selectDisabled, selectButton = \"Select\", cancelButton = \"Cancel\"}) => {\n\n  useEffect(() => {\n    const scrollTop = show ? `-${document.documentElement.scrollTop}px` : -parseInt(document.body.style.top);\n    document.body.style.position = show ? \"fixed\" : \"\";\n    document.body.style.width = show ? \"100%\" : \"\";\n    document.body.style.overflowY = show ? \"scroll\" : \"\";\n    if (show) document.body.style.top = scrollTop;\n    else {\n      document.body.style.top = \"\";\n      if (!isNaN(scrollTop)) document.documentElement.scrollTop = scrollTop;\n    }\n    show && onShow && onShow();\n    return () => {\n      document.body.style.position = \"\";\n      document.body.style.width = \"\";\n      document.body.style.overflowY = \"\";\n      const resetScroll = -parseInt(document.body.style.top);\n      if (!isNaN(resetScroll)) document.documentElement.scrollTop = resetScroll;\n      document.body.style.top = \"\";\n    }\n  }, [show]);\n\n  return (\n      show &&\n      <Background onClick={() => onCancel()}>\n        <Container style={containerStyle} onClick={event => event.stopPropagation()}>\n          <Title>{title}</Title>\n          {children}\n          <ButtonWrapper>\n            <Error>{error}</Error>\n            <CancelButton type={\"button\"} onClick={onCancel}>{cancelButton}</CancelButton>\n            <ActionButton type={\"button\"} disabled={selectDisabled} onClick={onSelect}>{selectButton}</ActionButton>\n          </ButtonWrapper>\n        </Container>\n      </Background>\n  )\n};\n","import React, {useEffect, useRef, useState} from 'react';\nimport styled from 'styled-components';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faChevronDown, faChevronRight} from \"@fortawesome/free-solid-svg-icons\";\nimport {get} from \"lodash\";\n\nimport {makeAPIRequest} from '../../utils/api';\nimport Panel from './Panel';\nimport config from \"../../config\";\nimport AnimateHeight from \"react-animate-height\";\nimport {Modal} from \"../../components/ui/Modal\";\n\nconst InputWrapper = styled.div`\n  max-width: 700px;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border-radius: 10px;\n  border: 1px solid #cdcdcd;\n\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }\n  transition: border 0.3s;\n  background-color: #fff;\n`;\n\nconst QuestionText = styled.h3`\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.25;\n`;\n\nconst Subtitle = styled.div`\n  margin-top: 5px;\n  margin-bottom: 10px;\n  color: ${props => props.error ? \"red\" : \"#555353\"};\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst Asterisk = styled.span`\n  color: #dc3545;\n  font-size: 16px;\n`;\n\nconst StyledFormInput = styled.textarea`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-height: 100px;\n  font-size: 16px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  border: 1px solid ${config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  margin: 10px 0;\n  display: flex;\n  align-items: center;\n`;\n\nconst DocumentaryEntryFlex = styled.div`\n  display: flex;\n  align-items: baseline;\n  > :nth-child(1) {\n    min-width: 55%;\n  }\n  > :nth-child(2) {\n    min-width: 30%;\n  }\n  > :nth-child(3) {\n    min-width: 15%;\n  }\n  ${props => props.clickable && `cursor: pointer;`}\n`;\n\nconst DocumentaryEntryWrapper = styled.div`\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst DocReqTitle = styled.div`\n  font-weight: 500;\n  font-size: 24px;\n  max-width: 700px;\n  margin: 5px auto 20px;\n  margin: 5px auto 20px;\n  display: flex;\n  align-items: center;\n  ${props => props.clickable && `cursor: pointer;`}\n`;\n\nconst DocReqStatus = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n`;\n\nconst ExpandedDocumentaryEntry = styled.div`\n  padding-bottom: 10px;\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.5;\n  width: 75%;\n`;\n\nconst DocumentaryEntryEvaluation = styled.div`\n  display: flex;\n  margin-top: 10px;\n\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nconst SmallHeader = styled.div`\n  font-size: 12px;\n  min-width: 150px;\n  margin-right: 50px;\n`;\n\nconst RequestClarificationModal = ({lc, initialReason, modal, setModal, type, setLc, client, beneficiary}) => {\n  const [comment, setComment] = useState(initialReason);\n  const textAreaRef = useRef(null);\n\n  let field;\n  if (type === \"company\") {\n    field = \"ofacBankApproval\"\n  } else if (type === \"country\") {\n    field =  \"sanctionBankApproval\";\n  } else if (type === \"license\") {\n    field = \"importLicenseApproval\";\n  }\n\n  useEffect(() => {\n    if (modal === \"requestClarification\") {\n      textAreaRef.current.focus();\n    }\n  }, [modal]);\n\n  const onRequest = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n      lc: {[field]: \"requested\"},\n      comment: {action: \"requested clarification on the beneficiary\", message: comment}\n    }).then(data => setLc(data.updatedLc));\n    setModal(\"\");\n  };\n\n  return (\n    <Modal selectButton={\"Confirm\"} show={modal === \"requestClarification\"} onCancel={() => setModal(\"\")}\n           title={\"Request Clarification\"} onSelect={onRequest}>\n      <div>Request {client?.name} to provide more information about {beneficiary?.name}?</div>\n      <div style={{paddingTop: 40}}>Comment:</div>\n      <StyledFormInput ref={textAreaRef} value={comment} onChange={({target}) => setComment(target.value)}/>\n    </Modal>\n  )\n};\n\nconst RejectionModal = ({initialReason, modal, setModal, rejectUrl, setLc}) => {\n  const [rejectionReason, setRejectionReason] = useState(initialReason);\n  const textAreaRef = useRef(null);\n\n  useEffect(() => {\n    if (modal === \"reject\") {\n      textAreaRef.current.focus();\n    }\n  }, [modal]);\n\n  const onReject = () => {\n    makeAPIRequest(rejectUrl, \"PUT\").then(data => setLc(data.updatedLc));\n    setModal(\"\");\n  };\n\n  return (\n    <Modal selectButton={\"Reject\"} show={modal === \"reject\"} onCancel={() => setModal(\"\")} title={\"Confirm Rejection\"}\n           onSelect={onReject}>\n      <div>Are you sure you want to reject this LC? Doing so will cause all changes to be permanently halted.</div>\n      <div style={{paddingTop: 40}}>Notes:</div>\n      <StyledFormInput ref={textAreaRef} value={rejectionReason}\n                       onChange={({target}) => setRejectionReason(target.value)}/>\n    </Modal>\n  )\n};\n\nconst titleCase = string => {\n  const exceptions = new Set(\n    [\"and\", \"as\", \"but\", \"for\", \"if\", \"nor\", \"or\", \"so\", \"yet\", \"a\", \"an\",\n      \"the\", \"as\", \"at\", \"by\", \"for\", \"in\", \"of\", \"off\", \"on\", \"per\", \"to\",\n      \"up\", \"via\"]);\n\n  const allCaps = new Set([\"s.a.\", \"sa\"]);\n\n  const capitalizeFirstLetter = (word, wordIndex) => {\n    word = word.toLowerCase();\n    if (allCaps.has(word)) {\n      return word.toUpperCase();\n    } else if (!wordIndex || !exceptions.has(word)) {\n      return word.charAt(0).toUpperCase() + word.substring(1);\n    } else {\n      return word;\n    }\n  };\n\n  return string.split(\" \").map((substr, ind) => capitalizeFirstLetter(substr, ind)).join(\" \");\n};\n\nconst SanctionInfo = ({sanction}) => {\n\n  const handleRightClick = event => {\n    event.preventDefault();\n    window.open(`https://www.google.com/search?q=${sanction.name}`);\n  };\n\n  const addressToString = address => {\n    const fields = [];\n    address.address && fields.push(address.address);\n    address.addressGroup && fields.push(address.addressGroup);\n    address.country && fields.push(address.country);\n    return fields.join(\", \");\n  };\n\n  return (\n    <div style={{paddingBottom: 20, paddingLeft: 20}}>\n      <div style={{fontSize: 19, width: \"70%\"}} title={\"Right click to search\"}\n           onContextMenu={handleRightClick}>{titleCase(sanction.name)}</div>\n      {sanction.aliases.length > 0 && <div style={{paddingLeft: 40, paddingTop: 5}}>\n        Aliases:\n        <div style={{paddingLeft: 40}}>\n          {sanction.aliases.map(alias => <div style={{paddingTop: 3}} key={alias.id}>{titleCase(alias.name)}</div>)}\n        </div>\n      </div>}\n      {sanction.addresses.length > 0 && <div style={{paddingLeft: 40, paddingTop: 5}}>\n        Addresses:\n        <div style={{paddingLeft: 40}}>\n          {sanction.addresses.map(\n            address => <div style={{paddingTop: 3}} key={address.id}>{addressToString(address)}</div>)}\n        </div>\n      </div>}\n    </div>\n  )\n};\n\n\nconst ComplianceCheck = ({\n  lc, setLc, title, initialRequestComment, initialRejectionReason, error, errorMessage,\n  children, status, approveUrl, rejectUrl, type\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [modal, setModal] = useState(\"\");\n\n  const onWaiveClick = () => {\n    makeAPIRequest(approveUrl, \"PUT\").then(data => setLc(data.updatedLc));\n  };\n\n  return (\n    <DocumentaryEntryWrapper>\n      <RejectionModal modal={modal} setModal={setModal} initialReason={initialRejectionReason}\n                      rejectUrl={rejectUrl} setLc={setLc}/>\n      <RequestClarificationModal lc={lc} modal={modal} setModal={setModal} initialReason={initialRequestComment}\n                                  setLc={setLc} client={lc?.client} type={type}\n                                 beneficiary={lc?.beneficiary}/>\n      <DocumentaryEntryFlex>\n        <div>\n          <DocReqTitle style={{margin: \"15px 0 0 0\"}} clickable\n                       onClick={() => setExpanded((e) => !e)}>\n            {title}\n            <FontAwesomeIcon\n              icon={expanded ? faChevronDown : faChevronRight}\n              style={{color: config.accentColor, marginLeft: \"10px\"}}\n            />\n          </DocReqTitle>\n          <Subtitle error={error} style={{paddingLeft: 10}}>\n            {error && errorMessage}\n          </Subtitle>\n        </div>\n        <ButtonWrapper style={{position: \"relative\"}}>\n          <StyledButton selected={status === \"Accepted\"} onClick={onWaiveClick}>Waive</StyledButton>\n          <StyledButton selected={status === \"Rejected\"} onClick={() => setModal(\"reject\")}>Reject</StyledButton>\n          {expanded && <StyledButton style={{position: \"absolute\", top: 40}} selected={status === \"Requested\"}\n                                     onClick={() => setModal(\"requestClarification\")}>\n            Request More Info</StyledButton>}\n        </ButtonWrapper>\n        <DocReqStatus>{status}</DocReqStatus>\n      </DocumentaryEntryFlex>\n      <AnimateHeight duration={300} height={expanded ? \"auto\" : 0}>\n        <ExpandedDocumentaryEntry>\n          {children}\n        </ExpandedDocumentaryEntry>\n      </AnimateHeight>\n    </DocumentaryEntryWrapper>\n  );\n};\n\nconst CompanyOFACCheck = ({lc, setLc}) => {\n  const beneficiary = get(lc, 'beneficiary.name');\n  const sanctions = get(lc, 'ofacSanctions');\n  const status = get(lc, \"ofacBankApproval\");\n  return (\n    <ComplianceCheck\n      lc={lc}\n      type={\"company\"}\n      setLc={setLc}\n      approveUrl={`/lc/${lc.id}/approve_ofac/`}\n      rejectUrl={`/lc/${lc.id}/reject_ofac/`}\n      title={\"OFAC Company Sanctions\"}\n      status={titleCase(status)}\n      initialRejectionReason={`The beneficiary ${beneficiary} is on the OFAC SDN sanction list.`}\n      initialRequestComment={`Our records indicate that the beneficiary ${beneficiary} is on the OFAC SDN sanction list. If this is a mistake, please provide reasoning to confirm so.`}\n      error={sanctions.length > 0}\n      errorMessage={`${sanctions.length > 0 ? sanctions.length : \"No\"} ${sanctions.length > 0 ? \"potential\"\n        : \"\"} error${sanctions.length !== 1 ? \"s\" : \"\"}${sanctions.length === 0 ? \" found\" : \"\"}`}\n    >\n      {sanctions.length > 0 ? sanctions.map(sanction => <SanctionInfo key={sanction.id} sanction={sanction}/>) :\n        <div style={{paddingLeft: 20, width: \"70%\"}}>Did not find any immediate sanction violations for company {beneficiary}.</div>}\n    </ComplianceCheck>\n  )\n};\n\nconst CountrySanctionCheck = ({lc, setLc}) => {\n  const beneficiary = get(lc, 'beneficiary.name');\n  const beneficiaryCountry = get(lc, 'beneficiary.country');\n  const clientCountry = get(lc, \"client.country\");\n  const countrySanctionMessage = get(lc, \"sanctionAutoMessage\");\n  const status = get(lc, \"sanctionBankApproval\");\n  let message;\n  if (countrySanctionMessage === null) {\n    message = `Not able to check sanction violations for the country ${beneficiaryCountry}.\n    Please contact steve@bountium.org if you would like for this functioniality to be extended.`;\n  } else if (countrySanctionMessage === \"\") {\n    message = `Did not find any immediate sanction errors for country ${beneficiaryCountry}.`;\n  } else {\n    message = <div>{beneficiaryCountry} may violate sanctions. Please click&nbsp;\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href={countrySanctionMessage}>here</a> for more information.</div>;\n  }\n\n  return (\n    <ComplianceCheck\n      lc={lc}\n      type={\"country\"}\n      setLc={setLc}\n      title={\"Country Sanctions\"}\n      status={titleCase(status)}\n      approveUrl={`/lc/${lc.id}/approve_sanction/`}\n      rejectUrl={`/lc/${lc.id}/reject_sanction/`}\n      initialRejectionReason={`The beneficiary ${beneficiary}'s country (${beneficiaryCountry}) has sanction violations with your country (${clientCountry}).`}\n      initialRequestComment={`Our records indicate that the beneficiary ${beneficiary}'s country (${beneficiaryCountry}) has sanctions against your country (${clientCountry}). If this is a mistake, please provide reasoning to confirm so.`}\n      error={countrySanctionMessage === null || countrySanctionMessage}\n      errorMessage={countrySanctionMessage === \"\" ? \"No errors found\" : \"1 potential error\"}\n    >\n      <div style={{paddingLeft: 20, fontSize: 19, width: \"70%\"}}>{beneficiaryCountry}</div>\n      <div style={{paddingLeft: 60}}>{message}</div>\n    </ComplianceCheck>\n  )\n};\n\nconst ImportLicenseCheck = ({lc, setLc}) => {\n  const beneficiary = get(lc, 'beneficiary.name');\n  const beneficiaryCountry = get(lc, 'beneficiary.country');\n  const clientCountry = get(lc, \"client.country\");\n  const licenseSanctionMessage = get(lc, \"importLicenseMessage\");\n  const good = get(lc, \"merchDescription\")\n  const status = get(lc, \"importLicenseApproval\");\n  let message;\n  if (licenseSanctionMessage === null || licenseSanctionMessage === \"\" ) {\n    message = `Could not find any permits or licenses required for this transaction.\n    Please contact steve@bountium.org if you would like additionaly information.`;\n  }\n  else {\n    message = <div>{licenseSanctionMessage}</div>;\n  }\n\n  return (\n      <ComplianceCheck\n          lc={lc}\n          type={\"license\"}\n          setLc={setLc}\n          title={\"Import License/Permits\"}\n          status={titleCase(status)}\n          approveUrl={`/lc/${lc.id}/approve_license/`}\n          rejectUrl={`/lc/${lc.id}/reject_license/`}\n          initialRejectionReason={`There may an additional permit/license required for the goods marked`}\n          initialRequestComment={`Our records indicate that there are additional permits required to ship this good. If this is a mistake, please provide reasoning to confirm so.`}\n          error={licenseSanctionMessage === null || licenseSanctionMessage}\n          errorMessage={licenseSanctionMessage === \" \" ? null : \"1 potential error\"}\n      >\n        {licenseSanctionMessage.length > 1 ?  <div style = {{paddingTop: 20, paddingLeft: 20}}>{licenseSanctionMessage}</div>  :\n            <div style={{paddingLeft: 20, width: \"70%\"}}>Did not find any immediate license/permits required for this transaction.</div>}\n      </ComplianceCheck>\n  )\n};\n\n\n\n\n\n\n\nconst ComplianceChecks = ({lc, setLc}) => {\n  return (\n    <Panel title=\"Compliance Checks\">\n      <DocumentaryEntryFlex>\n        <SmallHeader style={{margin: \"0\"}}>Type</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Action</SmallHeader>\n        <SmallHeader style={{margin: \"0\"}}>Status</SmallHeader>\n      </DocumentaryEntryFlex>\n      <CompanyOFACCheck lc={lc} setLc={setLc}/>\n      <CountrySanctionCheck lc={lc} setLc={setLc}/>\n      <ImportLicenseCheck lc={lc} setLc={setLc} />\n    </Panel>\n  );\n};\n\nexport default ComplianceChecks;\n","import React, {useContext, useEffect, useRef, useState} from \"react\";\nimport styled from \"styled-components\";\nimport {Field, Form, Formik, useField, useFormikContext} from \"formik\";\nimport _, {get} from \"lodash\";\nimport moment from \"moment\";\n\nimport {makeAPIRequest} from '../../utils/api';\nimport {useAuthentication, UserContext} from \"../../utils/auth\";\nimport LCView from \"../../components/lc/LCView\";\nimport Button from \"../../components/ui/Button\";\nimport DocumentaryRequirements from './DocumentaryRequirements';\nimport Panel from './Panel';\nimport config from '../../config';\nimport {Modal} from \"../../components/ui/Modal\";\nimport ComplianceChecks from \"./ComplianceChecks\";\n\n// TODO break this file up into multiple files\n\nconst disabledBackgroundColor = `#c3c1c3`;\nconst disabledColor = `black`;\n\nconst TwoColumnHolder = styled.div`\n  display: flex;\n`;\n\nconst LeftColumn = styled.div`\n  flex-grow: 1;\n  margin-right: 20px;\n  min-width: 250px;\n  max-width: 250px;\n`;\n\nconst RightColumn = styled.div`\n  flex-grow: 6;\n`;\n\nconst OrderStatusWrapper = styled.div`\n  font-weight: 300;\n`;\n\nconst PartyDisplayMessage = styled.div`\n  font-weight: 300;\n  margin: 15px 0;\n  text-align: center;\n`;\n\nconst APPROVALS_TO_STATE = {\n  issuerRejected: {\n    message: \"LC Application has been rejected by the issuer.\",\n    canEdit: [],\n    canApprove: []\n  },\n  client: {\n    message: \"LC Application has been submitted and is waiting on issuer review.\",\n    canEdit: ['issuer'],\n    canApprove: ['issuer'],\n  },\n  clientIssuer: {\n    message: \"LC has been sent to beneficiary and is awaiting approval or proposed changes.\",\n    canEdit: ['beneficiary'],\n    canApprove: ['beneficiary'],\n  },\n  // clientBene is not possible\n  bene: {\n    message: \"LC has been resubmitted to issuer with beneficiary redlining and is awaiting their approval.\",\n    canEdit: ['issuer'],\n    canApprove: ['issuer'],\n  },\n  issuer: {\n    message: \"LC has been resent to client with issuer edits and is awaiting client approval.\",\n    canEdit: ['client'],\n    canApprove: ['client'],\n  },\n  issuerBene: {\n    message: \"LC has been resent to client with issuer and beneficiary edits and is awaiting client approval.\",\n    canEdit: ['client'],\n    canApprove: ['client'],\n  },\n};\n\nconst OrderStatusMessage = ({stateName}) => {\n  const message = APPROVALS_TO_STATE[stateName].message;\n  return <div>{message}</div>\n};\n\nconst OrderStatus = ({lc, setLc, userType, stateName, setModal, totalCredit}) => {\n  const approvals = [\n    {name: 'Issuer:', value: get(lc, 'issuerApproved')},\n    {name: 'Client:', value: get(lc, 'clientApproved')},\n    {name: 'Beneficiary:', value: get(lc, 'beneficiaryApproved')}\n  ];\n  const handleClickApprove = async () => {\n    const approvedCreditAmt = lc.client.approvedCredit.filter(\n      model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt;\n    if (userType === \"issuer\" && (!approvedCreditAmt || parseFloat(totalCredit) +\n      parseFloat(lc.creditAmt) - parseFloat(lc.cashSecure) > parseFloat(approvedCreditAmt))) {\n      setModal(\"creditOverflow\");\n    } else {\n      makeAPIRequest(`/lc/${get(lc, 'id')}/evaluate/`, 'POST', {approve: true})\n      .then(json => setLc({...lc, [`${userType}Approved`]: true}));\n    } // TODO fix\n  };\n  const handleClickPayout = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/payout/`, 'POST', {approve: true})\n    .then(json => setLc({...lc, paidOut: true})); // TODO fix\n  };\n  const handleClickRequest = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/request/`, 'POST', {approve: true})\n    .then(json => setLc({...lc, requested: true})); // TODO fix\n  };\n  const handleClickDraw = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/draw/`, 'POST', {approve: true})\n    .then(json => setLc({...lc, drawn: true})); // TODO fix\n  };\n  const allApproved = approvals.every(a => a.value);\n  const {paidOut, drawn, requested} = lc;\n  return (\n    <Panel title=\"Order Status\" highlight>\n      <OrderStatusWrapper>\n        {!allApproved && APPROVALS_TO_STATE[stateName].canApprove.includes(userType) &&\n        <center><Button onClick={handleClickApprove}>Approve</Button></center>}\n        {allApproved && !paidOut && userType === \"issuer\" &&\n        <center><Button onClick={handleClickPayout}\n                        style={{marginBottom: '15px'}}>Pay Out</Button></center>}\n        {allApproved && !requested && userType === \"beneficiary\" &&\n        <center><Button onClick={handleClickRequest} style={{marginBottom: '15px'}}>Request</Button></center>}\n        {allApproved && !drawn && userType === \"beneficiary\" &&\n        <center><Button onClick={handleClickDraw} style={{marginBottom: '15px'}}>Draw</Button></center>}\n        {allApproved && <PartyDisplayMessage style={{marginTop: '0'}}>This LC is live.</PartyDisplayMessage>}\n        {allApproved && paidOut ? <PartyDisplayMessage style={{marginTop: '0'}}>This LC has been paid\n            out.</PartyDisplayMessage>\n          : drawn ? <PartyDisplayMessage style={{marginTop: '0'}}>Payment for this LC has been\n              drawn.</PartyDisplayMessage>\n            : requested ? <PartyDisplayMessage style={{marginTop: '0'}}>Payment for this LC has been\n              requested.</PartyDisplayMessage> : null}\n        <PartyDisplayMessage style={{fontWeight: '500'}}>You are the {userType}.</PartyDisplayMessage>\n        {!allApproved && (\n          <OrderStatusMessage stateName={stateName}/>\n        )}\n      </OrderStatusWrapper>\n    </Panel>\n  );\n};\n\nconst OrderNotes = ({lc}) => {\n  return (\n    <Panel title=\"Revision Notes\">\n      <OrderStatusWrapper>\n        {lc.latestVersionNotes}\n      </OrderStatusWrapper>\n    </Panel>\n  )\n};\n\nconst ClientInformationWrapper = styled.div`\n  font-weight: 300;\n  font-size: 14px;\n  line-height: 1.5;\n`;\n\nconst HistoryOrder = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst ClientInformation = ({lc}) => {\n  const employee = get(lc, 'taskedClientEmployees[0]');\n  const client = get(lc, 'client');\n  const [clientOrders, setClientOrders] = useState(null);\n  useEffect(() => {\n    makeAPIRequest(`/lc/by_client/${client.id}/`)\n    .then(json => setClientOrders(json));\n  }, [client.id]);\n\n  return (\n    <Panel title=\"Client Information\">\n      <ClientInformationWrapper>\n        POC: {employee.name}\n        <br/>\n        Email: <a href={`mailto:${employee.email}`}>{employee.email}</a>\n        <h1 style={{fontWeight: \"500\", margin: \"15px 0\"}}>Order History</h1>\n        {clientOrders && clientOrders.map(order => (\n          <HistoryOrder key={order.id}>\n            <a href={`/lc/${order.id}`}>{order.purchasedItem || `LC #${order.id}`}</a>\n            {lc.paidOut ? <span>{order.dueDate}</span> : <span>{order.applicationDate}</span>}\n          </HistoryOrder>\n        ))}\n      </ClientInformationWrapper>\n    </Panel>\n  );\n};\n\nconst BigStatsWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  > {\n    flex-grow: 1;\n  }\n\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst BigNumberTitle = styled.div`\n  font-size: 14px;\n  margin: 10px 0 15px;\n`;\n\nconst BigNumber = styled.div`\n  font-weight: 600;\n  font-size: 30px;\n  margin-bottom: 25px;\n`;\n\nconst AnalysisWrapper = styled.div`\n  display: flex;\n  align-items: baseline;\n  margin: 10px;\n`;\n\nconst SmallHeader = styled.div`\n  font-size: 12px;\n  min-width: 150px;\n  margin-right: 50px;\n`;\n\nconst AnalysisBody = styled.div`\n  font-weight: ${props => props.error === undefined ? 300 : 400};\n  ${props => props.error && \"color: red;\"}\n  ${props => props.error === false && \"color: #00a031;\"}\n`;\n\nconst AnalysisDetail = styled.span`\n  font-style: italic;\n  font-weight: 300;\n  font-size: 14px;\n  color: red;\n  text-decoration: underline;\n  opacity: .6;\n  cursor: pointer;\n  &:hover {\n    opacity: 1;\n    ${props => props.pop && \"font-size: 15px;\"}\n  }\n`;\n\nconst Subtitle = styled.div`\n  margin-top: 15px;\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst Financials = ({lc, setModal, totalCredit}) => {\n  let creditOverflow = false;\n  const approvedCreditAmt = lc.client.approvedCredit.filter(\n    model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt;\n  const lcCredit = lc.issuerApproved ? 0 : parseFloat(lc.creditAmt) - parseFloat(lc.cashSecure);\n  if (!approvedCreditAmt || parseFloat(totalCredit) +\n    lcCredit > parseFloat(approvedCreditAmt)) {\n    creditOverflow = true;\n  }\n  const client = get(lc, 'client');\n  return (\n    <Panel title=\"Financials\">\n      <BigStatsWrapper>\n        <div style={{paddingRight: 30, width: \"max-content\"}}>\n          <BigNumberTitle>Annual Cashflow</BigNumberTitle>\n          <BigNumber>\n            {client.annualCashflow || \"N/A\"}\n            <span style={{fontWeight: \"200\", fontSize: \"16px\"}}> yearly</span>\n          </BigNumber>\n        </div>\n        <div style={{paddingRight: 30}}>\n          <BigNumberTitle>Savings Available</BigNumberTitle>\n          <BigNumber>{client.balanceAvailable || \"N/A\"}</BigNumber>\n        </div>\n        <div>\n          <BigNumberTitle>Approved Credit</BigNumberTitle>\n          <BigNumber>{client.approvedCredit.filter(model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt\n          || \"N/A\"}</BigNumber>\n        </div>\n      </BigStatsWrapper>\n      <div>\n        <AnalysisWrapper>\n          <SmallHeader>Credit Analysis</SmallHeader>\n          <AnalysisBody error={creditOverflow}>\n            {creditOverflow ? \"There is a credit overflow.\"\n              : \"Approving this LC will not exceed the current approved credit limit.\"}\n            {creditOverflow && <span>&nbsp;</span>}\n            {creditOverflow && <AnalysisDetail onClick={() => setModal(\"creditOverflow\")}>\n              Click here for details\n            </AnalysisDetail>}\n          </AnalysisBody>\n        </AnalysisWrapper>\n        <AnalysisWrapper>\n          <SmallHeader>Tolerance Analysis</SmallHeader>\n          <AnalysisBody>\n            Bountium will provide tools to help understand tolerance values within a letter of credit.\n            <span style={{fontStyle: \"italic\", fontWeight: \"300\", fontSize: \"14px\"}}>\n              &nbsp;Coming soon\n            </span>\n          </AnalysisBody>\n        </AnalysisWrapper>\n      </div>\n    </Panel>\n  );\n};\n\nconst ODColumn = styled.div`\n  flex-basis: 50%;\n`;\n\nconst ODValue = styled.div`\n  font-weight: 500;\n  font-size: 24px;\n  margin-bottom: 20px;\n  margin-top: 5px;\n`;\n\nconst StyledInput = styled(Field)`\n\tborder: none;\n\tbackground-color: #eee;\n\tpadding: 10px;\n\tborder-radius: 10px;\n\tfont-size: 18px;\n`;\n\nconst StyledPopupInput = styled.input`\n  padding: 10px 0 5px;\n  flex: 1;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  border: 1px solid ${config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  margin: ${props => props.nested ? `0px` : `10px 0;`}\n  max-width: 45%;\n  display: flex;\n  align-items: center;\n`;\n\nconst YesNoInput = ({name}) => {\n  const [, meta, helpers] = useField(name);\n  const {value} = meta;\n  const {setValue} = helpers;\n\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n\n  return (\n    <ButtonWrapper>\n      <StyledButton onClick={handleClick(true)} selected={value === true}>Yes</StyledButton>\n      <StyledButton onClick={handleClick(false)} selected={value === false}>No</StyledButton>\n    </ButtonWrapper>\n  )\n};\n\nconst TYPE_TO_COMPONENT = {\n  text: (props) => (<StyledInput type=\"text\" {...props}/>),\n  number: (props) => (<StyledInput type=\"number\" {...props}/>),\n  date: (props) => (<StyledInput type=\"date\" {...props}/>),\n  boolean: (props) => (<YesNoInput type=\"text\" {...props}/>),\n};\n\nconst SubmitWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #cdcdcd;\n  padding-bottom: 10px;\n  margin-bottom: 10px;\n  align-items: center;\n`;\n\nconst SubmitSection = () => {\n  return (\n    <SubmitWrapper>\n      <ODColumn>\n        <Button type=\"submit\">Submit Revisions</Button>\n      </ODColumn>\n      <ODColumn>\n        <SmallHeader style={{marginBottom: '5px'}}>Revision Comments</SmallHeader>\n        <Field name=\"latestVersionNotes\" type=\"text\"/>\n      </ODColumn>\n    </SubmitWrapper>\n  )\n};\n\nconst OrderDetail = ({title, value, units, type, name, editing, error, errorClicked}) => {\n  const Input = TYPE_TO_COMPONENT[type];\n  return (\n    <>\n      <SmallHeader>{title}</SmallHeader>\n      <ODValue>\n        {editing && type ? <Input name={name} id={name}/> : (value || \"N/A\")}\n        {units && <span style={{fontWeight: \"200\", fontSize: \"16px\"}}> {units}</span>}\n        {error && <span>&nbsp;</span>}\n        {error && <AnalysisDetail pop onClick={errorClicked} style={{opacity: 1}}>{error}</AnalysisDetail>}\n      </ODValue>\n    </>\n  )\n};\n\nconst OrderDetails = ({lc, refreshLc, stateName, userType, live, modal, setModal, totalCredit}) => {\n  const [showExtra, setShowExtra] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const canEdit = !live && APPROVALS_TO_STATE[stateName].canEdit.includes(userType);\n  const details = [\n    {title: \"Counterparty\", value: get(lc, 'beneficiary.name')}, // must edit bene separately\n    {title: \"Counterparty's Country\", value: get(lc, 'beneficiary.country')}, // must edit bene separately\n    {title: \"Latest Permissible Charge Date\", value: lc.lateChargeDate, name: 'lateChargeDate', type: 'date'},\n    {title: \"Draft Presentation Date\", value: lc.draftPresentationDate, name: 'draftPresentationDate', type: 'date'},\n    {title: \"Unit of Measure\", value: lc.unitOfMeasure, type: 'text', name: 'unitOfMeasure'},\n    {title: \"Units Purchased\", value: lc.unitsPurchased, name: 'unitsPurchased', type: 'number'},\n    {\n      title: \"Price of Purchase\",\n      value: lc.creditAmt,\n      units: lc.currencyDenomination,\n      name: 'creditAmt',\n      type: 'number'\n    },\n    {title: \"Credit Expiration Date\", value: lc.expirationDate, name: 'expirationDate', type: 'date'},\n    {title: \"Cash Secure Amount\", value: lc.cashSecure, type: 'number', name: 'cashSecure'},\n    {title: \"Credit Amount (Verbal)\", value: lc.creditAmtVerbal, type: 'text', name: 'creditAmtVerbal'}\n  ];\n  const extraDetails = [\n    {title: \"Credit Delivery Means\", value: lc.creditDeliveryMeans, name: 'creditDeliveryMeans', type: 'text'},\n    // {title: \"Party Paying Other Banks' Fees\", value: lc.payingOtherBanksFees, href: }, TODO make this work\n    {\n      title: \"Draft's Invoice Value\",\n      value: lc.draftsInvoiceValue,\n      name: 'draftsInvoiceValue',\n      units: '%',\n      type: 'number'\n    },\n    {title: \"Credit Availability\", value: lc.creditAvailability, name: 'creditAvailability', type: 'text'},\n    {\n      title: \"Partial Shipment Allowed\",\n      value: lc.partialShipmentAllowed === true ? \"Yes\" : \"No\",\n      name: 'partialShipmentAllowed',\n      type: 'boolean'\n    },\n    {\n      title: \"Transshipment Allowed\",\n      value: lc.transshipmentAllowed === true ? \"Yes\" : \"No\",\n      name: 'transshipmentAllowed',\n      type: 'boolean'\n    },\n    {title: \"Merch Charge Location\", value: lc.merchChargeLocation, type: 'text', name: 'merchChargeLocation'},\n    {\n      title: \"Charge Transportation Location\",\n      value: lc.chargeTransportationLocation,\n      type: 'text',\n      name: 'chargeTransportationLocation'\n    },\n    {\n      title: \"Named Place of Destination\",\n      value: lc.namedPlaceOfDestination,\n      type: 'text',\n      name: 'namedPlaceOfDestination'\n    },\n    // {title: \"Doc Reception Notifees\", value: lc.docReceptionNotifees},\n    {\n      title: \"Client Arranging Insurance\",\n      value: lc.arrangingOwnInsurance === true ? \"Yes\" : \"No\",\n      name: 'arrangingOwnInsurance',\n      type: 'boolean'\n    },\n    {title: \"Other Instructions\", value: lc.otherInstructions, type: 'text', name: 'otherInstructions'},\n    {title: \"Merch Description\", value: lc.merchDescription, type: 'text', name: 'merchDescription'},\n    {\n      title: \"Transferable\", value: (lc.transferableToClient\n        ? `Yes, to ${lc.client.name}`\n        : (lc.transferableToBeneficiary\n          ? `Yes${lc.beneficiary && `, to ${lc.beneficiary.name}`}`\n          : \"No\")) // not editable for now\n    }\n  ];\n\n  // setup initial values\n  const initialValues = {latestVersionNotes: ''};\n  const allDetails = ([...details, ...extraDetails]);\n  allDetails.forEach(d => {\n    if (!d.name) {\n      return;\n    }\n    switch (d.type) {\n      case 'boolean':\n        if (d.value.toLowerCase() === 'yes') {\n          initialValues[d.name] = true;\n        } else if (d.value.toLowerCase() === 'no') {\n          initialValues[d.name] = false;\n        }\n        break;\n      default:\n        d.type && (initialValues[d.name] = d.value);\n    }\n  });\n\n  return (\n    <Panel title=\"Order Details\" expand={showExtra} setExpand={setShowExtra} editing={editing} setEditing={setEditing}\n           canEdit={canEdit}>\n      <Formik\n        initialValues={initialValues}\n        onSubmit={(values, {setSubmitting}) => {\n          setSubmitting(true);\n          const {latestVersionNotes, ...lcValues} = values;\n          const newLc = {};\n          Object.entries(lcValues).forEach(pair => {\n            const [k, v] = pair;\n            if (v !== initialValues[k]) {\n              newLc[k] = v;\n            }\n          });\n          makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n            lc: newLc, latestVersionNotes,\n          }).then(() => {\n            setSubmitting(false);\n            refreshLc();\n            setEditing(false);\n          })\n        }}\n      >\n        {() => (<div>\n            <CreditOverflowPopup\n              setModal={setModal} modal={modal} setEditing={setEditing}\n              lc={lc} refreshLc={refreshLc} totalCredit={totalCredit}/>\n            <Form>\n              {editing && <SubmitSection/>}\n              <div style={{display: 'flex'}}>\n                <ODColumn>\n                  {details.slice(0, details.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                  {showExtra && extraDetails.slice(0, extraDetails.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                </ODColumn>\n                <ODColumn>\n                  {details.slice(details.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                  {showExtra && extraDetails.slice(extraDetails.length / 2).map((d) =>\n                    <OrderDetail key={d.title} {...d} editing={editing}/>\n                  )}\n                </ODColumn>\n              </div>\n            </Form>\n          </div>\n        )}\n      </Formik>\n    </Panel>\n  );\n};\n\nconst scrollToAndHighlight = (questionKey) => {\n  const selector = `[id=\"${questionKey}\"]`;\n  let parentElement = document.querySelector(selector);\n  const originalBackgroundColor = window.getComputedStyle(parentElement).backgroundColor;\n  const changeQuestionBackgroundTemp = () => {\n    parentElement.animate({backgroundColor: [\"lightblue\", originalBackgroundColor]}, 1000);\n  };\n  let scrollTimeout;\n  const scrollHandler = () => {\n    clearTimeout(scrollTimeout);\n    scrollTimeout = setTimeout(() => {\n      window.removeEventListener(\"scroll\", scrollHandler);\n      changeQuestionBackgroundTemp();\n      parentElement.focus();\n    }, 20);\n  };\n  window.addEventListener(\"scroll\", scrollHandler);\n  parentElement.scrollIntoView({behavior: \"smooth\", block: \"center\"});\n};\n\nconst usePrevious = value => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\nconst CreditOverflowPopup = ({lc, modal, setModal, refreshLc, setEditing, totalCredit}) => {\n  const [selectedButtonIndices, setSelectedButtonIndex] = useState({0: true, 1: false});\n  const prevSelectedButtonIndices = usePrevious(selectedButtonIndices);\n  const approvedCredit = lc.client.approvedCredit.filter(model => model.bank.id === lc.issuer.id)[0]?.approvedCreditAmt\n    || 0;\n  const minimumIncrease = (parseFloat(totalCredit) + parseFloat(lc.creditAmt) - parseFloat(lc.cashSecure) - parseFloat(\n    approvedCredit)).toString();\n  const [increaseApprovedCreditValue, setIncreaseApprovedCreditValue] = useState(minimumIncrease);\n  const [requestMoreCashValue, setRequestMoreCashValue] = useState(minimumIncrease);\n  const [error, setError] = useState(\"\");\n  const [submissionAttempts, setSubmissionAttempts] = useState(0);\n  const increaseApprovedCreditRef = useRef(null);\n  const requestMoreCashRef = useRef(null);\n  const {setFieldValue, values} = useFormikContext();\n  const overflow = -(parseFloat(approvedCredit) - parseFloat(totalCredit) -\n    parseFloat(lc.creditAmt) + parseFloat(lc.cashSecure));\n\n  useEffect(() => {\n    handleError();\n  }, [increaseApprovedCreditValue, requestMoreCashValue]);\n\n  useEffect(() => {\n    if (!_.isEqual(selectedButtonIndices, prevSelectedButtonIndices)) {\n      handleError();\n      if (selectedButtonIndices[0] && selectedButtonIndices[1]) {\n        if (prevSelectedButtonIndices[0]) {\n          requestMoreCashRef.current && requestMoreCashRef.current.focus();\n        } else if (prevSelectedButtonIndices[1]) {\n          increaseApprovedCreditRef.current && increaseApprovedCreditRef.current.focus();\n        }\n      } else if (selectedButtonIndices[0]) {\n        increaseApprovedCreditRef.current && increaseApprovedCreditRef.current.focus();\n      } else if (selectedButtonIndices[1]) {\n        requestMoreCashRef.current && requestMoreCashRef.current.focus();\n      }\n    }\n  });\n\n  const handleError = () => {\n    if (selectedButtonIndices[0] && selectedButtonIndices[1] && parseFloat(increaseApprovedCreditValue) + parseFloat(\n      requestMoreCashValue) < parseFloat(minimumIncrease)) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    } else if (selectedButtonIndices[0] && !selectedButtonIndices[1] && parseFloat(increaseApprovedCreditValue)\n      < parseFloat(minimumIncrease)) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    } else if (selectedButtonIndices[1] && !selectedButtonIndices[0] && parseFloat(requestMoreCashValue) < parseFloat(\n      minimumIncrease)) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    } else if (!selectedButtonIndices[0] && !selectedButtonIndices[1]) {\n      setError(`The minimum approved credit plus cash secured amount must be at least ${minimumIncrease}`);\n      return true;\n    }\n    setError(\"\");\n    return false;\n  };\n\n  const onSelect = async () => {\n    setSubmissionAttempts(submissionAttempts + 1);\n    const error = handleError();\n    if (!error && selectedButtonIndices[0]) {\n      await makeAPIRequest(`/bank/${lc.issuer.id}/business/${lc.client.id}/approved_credit/`, \"PUT\",\n        {approvedCreditAmt: parseFloat(increaseApprovedCreditValue) + parseFloat(approvedCredit)});\n      refreshLc();\n      setModal(false);\n    }\n    if (!error && selectedButtonIndices[1]) {\n      await setEditing(true);\n      await setModal(false);\n      setFieldValue(\"cashSecure\", parseFloat(requestMoreCashValue) + parseFloat(lc.cashSecure));\n      setFieldValue(\"latestVersionNotes\",\n        `Please increase cash secured amount.${values.latestVersionNotes && \" \" + values.latestVersionNotes}`);\n      scrollToAndHighlight(\"cashSecure\");\n    }\n  };\n\n  return (\n    <Modal containerStyle={{width: \"55%\"}} show={modal === \"creditOverflow\"} title={\"Credit Overflow\"}\n           error={submissionAttempts > 0 && error} onCancel={() => setModal(false)}\n           selectDisabled={submissionAttempts > 0 && error} onSelect={onSelect}>\n      <div>\n        Approving this LC will exceed the current approved credit ({approvedCredit}) for {get(lc,\n        \"client.name\")} by {overflow}.\n        <Subtitle>Check all that apply.</Subtitle>\n        <div style={{flexDirection: \"row\", display: \"flex\", paddingTop: 20, paddingBottom: 20}}>\n          <StyledButton\n            nested style={{width: 230, justifyContent: \"center\"}}\n            onClick={() => setSelectedButtonIndex({...selectedButtonIndices, 0: !selectedButtonIndices[0]})}\n            selected={selectedButtonIndices[0]}>\n            Increase Approved Credit By</StyledButton>\n          <StyledPopupInput\n            ref={increaseApprovedCreditRef} value={increaseApprovedCreditValue} type={\"number\"}\n            onChange={({target}) => setIncreaseApprovedCreditValue(target.value)}\n            style={{marginLeft: 10, visibility: selectedButtonIndices[0] ? \"visible\" : \"hidden\"}}/>\n        </div>\n        <div style={{flexDirection: \"row\", display: \"flex\", paddingBottom: 20}}>\n          <StyledButton\n            nested style={{width: 230, justifyContent: \"center\"}}\n            onClick={() => setSelectedButtonIndex({...selectedButtonIndices, 1: !selectedButtonIndices[1]})}\n            selected={selectedButtonIndices[1]}>\n            Request More Secured Cash</StyledButton>\n          <StyledPopupInput\n            ref={requestMoreCashRef} value={requestMoreCashValue} type={\"number\"}\n            onChange={({target}) => setRequestMoreCashValue(target.value)}\n            style={{marginLeft: 10, visibility: selectedButtonIndices[1] ? \"visible\" : \"hidden\"}}/>\n        </div>\n      </div>\n    </Modal>\n  )\n};\n\nconst StyledFormInput = styled.textarea`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-height: 100px;\n  font-size: 16px;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst Comments = ({lc, setLc, comments, userType}) => {\n  const [modal, setModal] = useState(false);\n  const [response, setResponse] = useState(\"\");\n\n  const onRespond = () => {\n    makeAPIRequest(`/lc/${get(lc, 'id')}/`, 'PUT', {\n      lc: {},\n      comment: {action: \"responded to the issuer\", message: response}\n    }).then(data => setLc(data.updatedLc));\n    setModal(false);\n  };\n\n  // TODO this should be a backend thing\n  comments = comments.filter(comment => comment[userType + \"Viewable\"]);\n  return (\n    <Panel title={\"Comments\"}>\n      <Modal selectButton={\"Respond\"} show={modal} onCancel={() => setModal(false)}\n             title={\"Respond to Comment\"} onSelect={onRespond}>\n        <div>\n          On {moment(modal.date).format(\"dddd, MMMM Do YYYY [at] h:mm a\")}, {userType === modal.authorType ? \"you\"\n          : `the ${modal.authorType}`} {modal.action}:\n          <div style={{paddingTop: 5, fontStyle: \"italic\", color: \"#808080\"}}>\n            \"{modal.message}\"\n          </div>\n        </div>\n        <div style={{paddingTop: 40}}>Response:</div>\n        <StyledFormInput value={response} onChange={({target}) => setResponse(target.value)}/>\n      </Modal>\n      {comments?.length ?\n        comments.map((comment, commentIndex) =>\n          <div style={commentIndex > 0 ? {paddingTop: 40} : null} key={comment.id}>\n            On {moment(comment.date).format(\"dddd, MMMM Do YYYY [at] h:mm a\")}, {userType === comment.authorType ? \"you\"\n            : `the ${comment.authorType}`} {comment.action}:\n            <div style={{paddingTop: 5, fontStyle: \"italic\", color: \"#808080\"}}>\n              \"{comment.message}\"\n            </div>\n            {comment.respondable === userType &&\n            <div style={{textAlign: \"end\"}}>\n              <Button onClick={() => setModal(comment)}>Respond</Button>\n            </div>}\n          </div>\n        )\n        : \"No comments to show.\"}\n    </Panel>\n  )\n};\n\nconst LCViewPage = ({match}) => {\n  useAuthentication(`/bank/lcs/${match.params.lcid}`);\n  const [user] = useContext(UserContext);\n  const [modal, setModal] = useState(\"\");\n  const [lc, setLc] = useState(null);\n  const [totalCredit, setTotalCredit] = useState();\n  let userType = 'unknown';\n  if (get(user, 'bank')) {\n    userType = 'issuer';\n  } else if (get(user, 'business')) {\n    if (get(user, 'business.id') === get(lc, 'client.id')) {\n      userType = 'client';\n    } else if (get(user, 'business.id') === get(lc, 'beneficiary.id')) {\n      userType = 'beneficiary';\n    }\n  }\n  const live = get(lc, 'beneficiaryApproved') && get(lc, 'clientApproved') && get(lc, 'issuerApproved');\n  // get state of order\n  const a = {\n    issuer: get(lc, 'issuerApproved'),\n    client: get(lc, 'clientApproved'),\n    beneficiary: get(lc, 'beneficiaryApproved'),\n    issuerRejected: get(lc, 'ofacBankApproval') === 'rejected' || get(lc, 'sanctionBankApproval') === 'rejected'\n  };\n  let stateName = 'all';\n  if (a.issuerRejected) {\n    stateName = 'issuerRejected';\n  } else if (a.issuer === true) {\n    if (a.client === true) {\n      stateName = 'clientIssuer';\n    } else if (a.beneficiary === true) {\n      stateName = 'issuerBene';\n    } else {\n      stateName = 'issuer';\n    }\n  } else if (a.client === true) {\n    if (!a.beneficiary && !a.issuer) {\n      stateName = 'client';\n    }\n  } else if (a.beneficiary === true) {\n    if (!a.client && !a.issuer) {\n      stateName = 'bene';\n    }\n  }\n\n  // TODO change API to just return the new LC after we update it\n  const refreshLc = () => {\n    makeAPIRequest(`/lc/${match.params.lcid}/`)\n    .then(json => userType === \"issuer\" ? makeAPIRequest(`/lc/total_credit/${json.client.id}/`).then(totalCredit => {\n      setTotalCredit(totalCredit);\n      setLc(json)\n    }) : setLc(json));\n  };\n\n  useEffect(() => {\n    if (user) {\n      refreshLc();\n    }\n  }, [match.params.lcid, user?.id]);\n\n  return (\n    <LCView lc={lc}>\n      <TwoColumnHolder>\n        <LeftColumn>\n          <OrderStatus lc={lc} totalCredit={totalCredit} userType={userType} setLc={setLc} live={live}\n                       stateName={stateName} setModal={setModal}/>\n          {get(lc, 'latestVersionNotes') && <OrderNotes lc={lc}/>}\n          <ClientInformation lc={lc}/>\n          <Comments lc={lc} setLc={setLc} comments={lc?.comments} userType={userType}/>\n        </LeftColumn>\n        <RightColumn>\n          {userType === 'issuer' && <Financials lc={lc} totalCredit={totalCredit} setModal={setModal}/>}\n          <OrderDetails lc={lc} setLc={setLc} refreshLc={refreshLc} stateName={stateName}\n                        userType={userType} live={live} modal={modal} setModal={setModal} totalCredit={totalCredit}/>\n          {userType === 'issuer' && <ComplianceChecks lc={lc} userType={userType} live={live} setLc={setLc}/>}\n          <DocumentaryRequirements lc={lc} userType={userType} live={live} refreshLc={refreshLc}/>\n        </RightColumn>\n      </TwoColumnHolder>\n    </LCView>\n  )\n\n};\n\nexport default LCViewPage;\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg).matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BankEmployeeSignUpPage = ({ history, match }) => {\n  const setUser = useContext(UserContext)[1];\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle=\"Create your account for lightning-fast LC processing.\"\n    >\n    <Formik\n      initialValues={{\n        name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/bank/${match.params.bankid}/register/`, \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, bank: json.usersEmployer });\n            history.push(\"/bank/invite\");\n          })\n          .then(() => setSubmitting(false));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n<Button showArrow disabled={isSubmitting}>\n  Sign Up\n</Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BankEmployeeSignUpPage;","import React, {useEffect, useRef, useState} from \"react\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faChevronDown, faCheck} from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\nimport {Field} from \"formik\";\n\nconst disabledBackgroundColor = `#c3c1c3`;\nconst disabledColor = `black`;\n\nconst Option = styled.div`\n  padding: 10px;\n  overflow-wrap: break-word;\n  color: white;\n  user-select: none;\n  display: flex;\n  ${props => props.highlighted && `background-color: #1772fb;`}\n  &:hover {\n    background-color: #1772fb;\n  }\n`;\n\nconst StyledFormInput = styled(Field)`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nexport const Dropdown = ({ items, onChange, selectedIndex }) => {\n  const [menu, setMenu] = useState(false);\n\n  return (\n      <OutsideAlerter style={{position: \"relative\", flex: 1, flexDirection: \"column\"}} onOutsideClick={() => setMenu(false)}>\n        <div>\n          <div style={{display: \"flex\"}} onClick={() => setMenu(!menu)}>\n            <div style={{borderRight: \"1px solid #cdcdcd\", padding: \"10px\", flex: 1, wordBreak: \"break-word\"}}>{items[selectedIndex]}</div>\n            <div style={{width: \"20px\", alignSelf: \"center\", paddingLeft: \"5px\"}}>\n              <FontAwesomeIcon\n                  icon={faChevronDown}\n                  size=\"lg\"\n                  color=\"#000\"\n              />\n            </div>\n          </div>\n          {menu && <div style={{position: \"absolute\", width: \"100%\", backgroundColor: \"black\", maxHeight: \"300px\", overflowY: \"scroll\", zIndex: 1}}>\n            {items.map(item => <Option key={item} onClick={() => {\n              setMenu(false);\n              onChange && onChange(item);\n            }}><FontAwesomeIcon icon={faCheck} color={\"#fff\"} style={{width: \"20px\", visibility: items[selectedIndex] === item ? \"visible\" : \"hidden\"}}/>\n            <div style={{flex: 1}}>{item}</div></Option>)}\n          </div>}\n        </div>\n      </OutsideAlerter>\n  )\n};\n\nexport const SearchableSelect = ({ items, onSelect, questionKey, handleChange }) => {\n  const [menu, setMenu] = useState(false);\n  const [highlightedItemIndex, setHighlightedItemIndex] = useState(-1);\n\n  useEffect(() => {\n    setHighlightedItemIndex(-1);\n  }, [items]);\n\n  const onKeyDown = event => {\n    if (event.keyCode === 40 && highlightedItemIndex + 1 < items.length) {\n      event.preventDefault();\n      setHighlightedItemIndex(highlightedItemIndex + 1);\n    } else if (event.keyCode === 38 && highlightedItemIndex - 1 >= 0) {\n      event.preventDefault();\n      setHighlightedItemIndex(highlightedItemIndex - 1);\n    } else if (event.keyCode === 13 && highlightedItemIndex > -1) {\n      event.preventDefault();\n      setMenu(false);\n      onSelect(items[highlightedItemIndex]);\n    }\n  };\n\n  const onChange = event => {\n    setMenu(true);\n    handleChange(event);\n  };\n\n  const onClick = item => {\n    setMenu(false);\n    onSelect && onSelect(item);\n  };\n\n  return (\n      <OutsideAlerter style={{position: \"relative\", flex: 1, flexDirection: \"column\"}} onOutsideClick={() => setMenu(false)}>\n        <div style={{display: \"flex\"}} onClick={() => setMenu(!menu)}>\n          <StyledFormInput autoComplete={\"off\"} onChange={onChange} type={\"text\"} name={questionKey} onKeyDown={onKeyDown}/>\n        </div>\n        {menu && <div style={{\n          position: \"absolute\",\n          width: \"100%\",\n          backgroundColor: \"black\",\n          maxHeight: \"300px\",\n          overflowY: \"scroll\",\n          zIndex: 1}}>\n          {items.map((item, itemIndex) =>\n              <Option highlighted={highlightedItemIndex === itemIndex}\n                      key={item.id} onMouseDown={() => onClick(item)}>\n            <div style={{flex: 1}}>{item.name}</div></Option>)}\n        </div>}\n      </OutsideAlerter>\n  )\n};\n\n/**\n * Hook that alerts clicks outside of the passed ref\n */\nconst useOutsideAlerter = (ref, onOutsideClick) => {\n  useEffect(() => {\n    /**\n     * Alert if clicked on outside of element\n     */\n    function handleClickOutside(event) {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onOutsideClick();\n      }\n    }\n    // Bind the event listener\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [ref]);\n};\n\n/**\n * Component that alerts if you click outside of it\n */\nexport const OutsideAlerter = (props) => {\n  const wrapperRef = useRef(null);\n  useOutsideAlerter(wrapperRef, props.onOutsideClick);\n\n  return <div ref={wrapperRef} style={props.style}>{props.children}</div>;\n};\n","import React, {useEffect, useRef, useState} from \"react\";\n\nexport const ResizableScreenDiv = ({style, children, minTop}) => {\n  const containerRef = useRef(null);\n  const [top, setTop] = useState(0);\n\n  useEffect(() => {\n    setTop(containerRef.current.getBoundingClientRect().top);\n    const scrollHandler = () => setTop(containerRef.current.getBoundingClientRect().top);\n    window.addEventListener(\"scroll\", scrollHandler);\n    return () => window.removeEventListener(\"scroll\", scrollHandler);\n  }, []);\n\n  return (\n      <div ref={containerRef} style={{...style, height: `calc(100vh - ${Math.max(top, minTop === undefined ? 40 : minTop)}px)`}}>\n        {children}\n      </div>\n  )\n};\n","import React, { useEffect, useState } from 'react';\nimport { Prompt, useHistory } from 'react-router-dom';\nimport {Modal} from './Modal';\n\nexport const RouteBlockingModal = ({when}) => {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [lastLocation, setLastLocation] = useState(null);\n  const [confirmedNavigation, setConfirmedNavigation] = useState(false);\n  const history = useHistory();\n\n  const closeModal = () => {\n    setModalVisible(false);\n  };\n  const handleBlockedNavigation = (nextLocation) => {\n    if (!confirmedNavigation) {\n      setModalVisible(true);\n      setLastLocation(nextLocation);\n      return false;\n    }\n    return true;\n  };\n\n  const handleConfirmNavigationClick = () => {\n    setModalVisible(false);\n    setConfirmedNavigation(true);\n  };\n\n  useEffect(() => {\n    if (confirmedNavigation && lastLocation) {\n      // Navigate to the previous blocked location with your navigate function\n      history.push(lastLocation.pathname);\n    }\n  }, [confirmedNavigation, lastLocation]);\n\n  return (\n      <div>\n        <Prompt when={when} message={handleBlockedNavigation}/>\n        <Modal\n            show={modalVisible}\n            title=\"Exit without saving?\"\n            selectButton=\"Confirm\"\n            cancelButton={\"Dismiss\"}\n            onCancel={closeModal}\n            onSelect={handleConfirmNavigationClick}>\n          <div style={{paddingBottom: 15}}>You have unsaved changes. Are you sure you want to leave without saving?</div>\n        </Modal>\n      </div>\n  );\n};\n","import React, {useContext, useEffect, useRef, useState} from 'react';\nimport styled from 'styled-components';\nimport _ from 'lodash'\nimport {Field, Form, Formik, useField, useFormikContext} from 'formik';\nimport {array, boolean, date, number, object, string} from 'yup';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {\n  faCheckSquare,\n  faTimes,\n  faTrash\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport BasicLayout from '../../components/BasicLayout';\nimport {\n  makeAPIRequest,\n  objectToCamelCase,\n  objectToSnakeCase\n} from '../../utils/api';\nimport Button from \"../../components/ui/Button\";\nimport StatusMessage from \"../../components/ui/StatusMessage\";\nimport {useAuthentication, UserContext} from '../../utils/auth';\n\nimport config from '../../config';\nimport {Dropdown, SearchableSelect} from \"../../components/ui/Dropdown\";\nimport {Modal} from \"../../components/ui/Modal\";\nimport {ResizableScreenDiv} from \"../../components/ui/ResizableScreenDiv\";\nimport {RouteBlockingModal} from \"../../components/ui/RouteBlockingModal\";\n\nconst disabledBackgroundColor = `#c3c1c3`;\nconst disabledColor = `black`;\n\nconst InputWrapper = styled.div`\n  max-width: 700px;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border-radius: 10px;\n  border: 1px solid #cdcdcd;\n  transition: border 0.3s;\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  \n  ${props => !props.disabled && `&:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n`;\n\nconst QuestionText = styled.h3`\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.25;\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst ClickableText = styled.span`\n  color: blue;\n  cursor: pointer;\n  &:hover {\n    color: #1772fb;\n  }\n`;\n\nconst Subtitle = styled.div`\n  margin-top: 15px;\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst SectionSubtitle = styled.div`\n  color: #555353;\n  font-style: italic;\n  font-size: 14px;\n  font-weight: 300;\n`;\n\nconst Asterisk = styled.span`\n  color: #dc3545;\n  font-size: 16px;\n`;\n\nconst StyledFormInput = styled(Field)`\n  margin-top: 10px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst StyledInput = styled.input`\n  padding: 10px 0 5px;\n  flex: 1;\n  font-size: 16px;\n  border: none;\n  border-bottom: ${props => props.disabled ? `0px` : `1px solid #cdcdcd`};\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst StyledDiv = styled.div`\n  padding: 10px 0 5px;\n  flex: 1;\n  height: 18px;\n  border: none;\n  background-color: ${props => props.disabled ? disabledBackgroundColor : `#fff`};\n  color: ${props => props.disabled ? disabledColor : `#000`};\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  margin-top: 15px;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst NestedButtonWrapper = styled.div`\n  padding-left: 10px;\n  flex: 1;\n  display: flex;\n\n  > :not(:last-child) {\n    margin-right: 20px;\n  }\n`;\n\nconst ButtonVerticalWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 15px;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  width: 95%;\n  > :first-child {\n    border-top: thin solid ${config.accentColor};\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : props.disabled ? disabledBackgroundColor : `#fff`};\n  border-radius: 5px;\n  padding: 5px 10px;\n  color: ${(props) => props.selected ? `#fff` : props.disabled ? disabledColor : config.accentColor};\n  border: 1px solid ${props => props.disabled ? disabledColor : config.accentColor};\n  font-size: 16px;\n  ${props => !props.disabled && `cursor: pointer;`}\n  margin: ${props => props.nested ? `0px` : `10px 0;`}\n  ${props => !props.fitWidth && `max-width: 45%;`}\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledSection = styled.button`\n  background-color: ${(props) => props.selected ? config.accentColor : `#fff`};\n  border-radius: 1px;\n  padding: 10px 10px;\n  color: ${(props) => props.selected ? `#fff` : config.accentColor};\n  font-size: 16px;\n  cursor: pointer;\n  text-align: left;\n  width: 100%;\n  border-width: thin;\n  border-style: solid;\n  border-color: ${config.accentColor};\n  border-top: none;\n`;\n\nconst scrollToAndHighlight = (questionKey) => {\n  const selector = `[id=\"${questionKey}\"]`;\n  let parentElement = document.querySelector(selector);\n  const originalBackgroundColor = window.getComputedStyle(parentElement).backgroundColor;\n  const changeQuestionBackgroundTemp = () => {\n    parentElement.animate({backgroundColor: [\"lightblue\", originalBackgroundColor]}, 1000);\n  };\n\n  // if the element is on the screen\n  if (window.scrollY <= parentElement.offsetTop && window.scrollY + document.documentElement.clientHeight >=\n      parentElement.offsetTop + parentElement.offsetHeight) {\n    changeQuestionBackgroundTemp();\n  } else {\n    let scrollTimeout;\n    const scrollHandler = () => {\n      clearTimeout(scrollTimeout);\n      scrollTimeout = setTimeout(() => {\n        window.removeEventListener(\"scroll\", scrollHandler);\n        changeQuestionBackgroundTemp()\n      }, 20);\n    };\n    window.addEventListener(\"scroll\", scrollHandler);\n    parentElement.scrollIntoView({behavior: \"smooth\", block: \"nearest\"});\n  }\n};\n\nconst BasicInput = ({ question, children, subtitle }) => {\n  const [, meta] = useField(question.key);\n  const { error, touched } = meta;\n  return (\n    <InputWrapper id={question.key} disabled={question.disabledTooltip}>\n      <QuestionText disabled={question.disabledTooltip}>{question.questionText}{question.required ? (<Asterisk> *</Asterisk>) : null}</QuestionText>\n      {!question.disabledTooltip && subtitle && <Subtitle>{subtitle}</Subtitle>}\n      {question.disabledTooltip && <Subtitle onClick={() => scrollToAndHighlight(question.disabledTooltip.parentKey)}>{question.disabledTooltip.text}</Subtitle>}\n      {error && touched && <Subtitle style={{color: '#dc3545'}}>{typeof error !== 'object' ? error : null}</Subtitle>}\n      {children}\n    </InputWrapper>\n  )\n};\n\nconst TextInput = ({ question, status, setStatus, lcApp, setAppliedTemplate, appliedTemplate }) => {\n  const {values, setValues, initialValues, handleChange, setFieldValue} = useFormikContext();\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n  const autofillTemplateTimeout = useRef();\n  const beneficiaryAutocompleteTimeout = useRef(null);\n\n  const [suggested, setSuggested] = useState([]);\n\n  useEffect(() => {\n    if (status.status !== \"success\" && !appliedTemplate && (question.key === \"beneficiary_name\" || question.key === \"purchased_item\")) {\n      clearTimeout(autofillTemplateTimeout.current);\n      const timeoutId = setTimeout(() => {\n          const params = {};\n          if (values.beneficiary_name) params.beneficiary_name = values.beneficiary_name;\n          if (values.purchased_item) params.purchased_item = values.purchased_item;\n          const paramString = Object.entries(params).map(([key, value]) => `${key}=${value}`).join(\"&\");\n          if (paramString) makeAPIRequest(`/lc/digital_app_templates/?${paramString}`).then(result => {\n            if (result.length) {\n              const Component = (\n                  <div>\n                    <div style={{display: \"flex\"}}>\n                      <span style={{flex: 1}}/>\n                      <StyledIcon onClick={() => setStatus({status: null, message: \"\"})}\n                                  icon={faTimes} style={{color: \"black\"}}/>\n                    </div>\n                    <div style={{color: \"black\"}}>Load Template with Similar Answers:</div>\n                    <div style={{paddingTop: 10}}>\n                      {result.map(template => (\n                          <div key={template.id} style={{paddingTop: 5}}>\n                            <ClickableText onClick={async () => {\n                              setStatus({status: null, message: \"\"});\n                              await loadTemplateAnswers({lcApp, selectedTemplate: template, values, initialValues, setValues, setAppliedTemplate, setStatus});\n                            }}>\n                              {template.templateName}\n                            </ClickableText></div>\n                      ))}\n                    </div>\n                  </div>\n              );\n              setStatus({status: \"info\", message: Component});\n            } else {\n              setStatus({status: null, message: \"\"});\n            }\n          });\n        }, 500);\n      autofillTemplateTimeout.current = timeoutId;\n    }\n  }, [value]);\n\n  useEffect(() => {\n    if (question.key === \"beneficiary_name\") {\n      clearTimeout(beneficiaryAutocompleteTimeout.current);\n      const timeoutId = setTimeout(() =>\n        makeAPIRequest(`/business/autocomplete/?string=${value}`)\n        .then(suggested => setSuggested(suggested)), 400);\n      beneficiaryAutocompleteTimeout.current = timeoutId;\n    }\n  }, [value]);\n\n  const onSelect = async item => {\n    await setFieldValue(\"beneficiary_address\", item.address);\n    await setValue(item.name);\n  };\n\n  const inputComponent = question.key === \"beneficiary_name\" ?\n      <SearchableSelect\n          onSelect={onSelect}\n          items={suggested}\n          questionKey={question.key}\n          handleChange={handleChange}\n      /> :\n      <StyledFormInput type=\"text\" name={question.key}/>;\n\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && inputComponent}\n    </BasicInput>\n  );\n};\n\nconst NumberInput = ({ question }) => {\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <StyledFormInput type=\"number\" name={question.key}/>}\n    </BasicInput>\n  )\n};\n\nconst YesNoInput = ({ question }) => {\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <ButtonWrapper style={{ justifyContent: 'center' }}>\n        <StyledButton onClick={handleClick(true)} selected={value === true}>Yes</StyledButton>\n        <StyledButton onClick={handleClick(false)} selected={value === false}>No</StyledButton>\n      </ButtonWrapper>}\n    </BasicInput>\n  )\n};\n\nconst AllRadiosWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst RadioInput = ({ question }) => {\n  const options = question.options;\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    setValue(val);\n  };\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <AllRadiosWrapper>\n      <ButtonWrapper>\n    {options && options.map((opt) => (\n        <StyledButton onClick={handleClick(opt)} selected={value === opt} key={opt}>{opt}</StyledButton>\n    ))}\n      </ButtonWrapper>\n    </AllRadiosWrapper>}\n    </BasicInput>\n  )\n};\n\nconst DateInput = ({ question }) => {\n  return (\n    <BasicInput question={question} disabled={question.disabledTooltip}>\n      {!question.disabledTooltip && <StyledFormInput type=\"date\" name={question.key}/>}\n    </BasicInput>\n  )\n};\n\nconst AllCheckboxesWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst CheckboxInput = ({ question }) => {\n  const options = question.options;\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n  const handleClick = (val) => (e) => {\n    e.preventDefault();\n    const i = value.indexOf(val);\n    if (i !== -1) {\n      setValue(value.slice(0, i).concat(value.slice(i + 1)));\n    } else {\n      setValue(value.concat([val]));\n    }\n  };\n\n  return (\n    <BasicInput disabled={question.disabledTooltip} question={question} subtitle=\"Check all that apply.\">\n      {!question.disabledTooltip && <AllCheckboxesWrapper>\n        <ButtonWrapper>\n      {options && options.map((opt) => (\n          <StyledButton disabled={question.disabledTooltip} onClick={handleClick(opt)} selected={value.indexOf(opt) !== -1} key={opt}>\n          {value.indexOf(opt) !== -1 && <FontAwesomeIcon icon={faCheckSquare} style={{ marginRight: '10px' }}/>}\n          {opt}\n          </StyledButton>\n      ))}\n        </ButtonWrapper>\n      </AllCheckboxesWrapper>}\n    </BasicInput>\n  )\n};\n\nconst DocReqFieldWrapper = styled.div`\n  margin: 10px 0;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #cdcdcd;\n  > :first-child {\n    width: 130px;\n    font-weight: 300;\n    border-right: 1px solid #cdcdcd;\n    padding: 10px 10px 5px;\n    text-align: right;\n  }\n`;\n\nconst StyledDocReqField = styled(Field)`\n  padding: 10px 10px 5px;\n  font-size: 16px;\n  border: none;\n  flex: 1;\n  width: calc(100% - 130px);\n  line-height: 1em;\n  color: #000;\n  background-color: #fff;\n`;\n\nconst StyledDocReqDiv = styled.div`\n  padding: 10px 10px 5px;\n  font-size: 16px;\n  border: none;\n  flex: 1;\n  width: calc(100% - 130px);\n  line-height: 1em;\n  color: #000;\n  background-color: #fff;\n  word-break: break-word;\n`;\n\nconst DocReqTitle = styled.h3`\n  text-transform: uppercase;\n  font-weight: 300;\n  letter-spacing: .1em;\n  ${props => props.disabled && `color: ${disabledColor};`}\n`;\n\nconst CommonNestedTypeComponent = ({question, keyName}) => {\n  const componentMap = {\n    text: <StyledDocReqField type={\"text\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n    number: <StyledDocReqField type={\"number\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n    decimal: <StyledDocReqField type={\"number\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n    date: <StyledDocReqField type={\"date\"} disabled={question.disabled === \"True\"} name={keyName}/>,\n  };\n  return componentMap[question.type];\n};\n\nconst ObjectNestedTypeComponent = ({question, value, setValue}) => {\n  const componentMap = {\n    boolean: <NestedButtonWrapper>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue({...value, [question.key]: true})}\n                    selected={value[question.key] === true}>Yes</StyledButton>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue({...value, [question.key]: false})}\n                    selected={value[question.key] === false}>No</StyledButton>\n    </NestedButtonWrapper>,\n  };\n  return componentMap[question.type];\n};\n\nconst ObjectInput = ({ question }) => {\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n\n  return (\n      <BasicInput question={question}>\n        {!question.disabledTooltip && question.children.map(child => {\n          const keyName = `${question.key}.${child.key}`;\n          return (\n              <DocReqFieldWrapper key={keyName}>\n                <span>{child.questionText}{child.required ? <Asterisk> *</Asterisk> : null}</span>\n                {CommonNestedTypeComponent({question: child, keyName}) ||\n                ObjectNestedTypeComponent({question: child, value, setValue})}\n              </DocReqFieldWrapper>\n          )\n        })}\n      </BasicInput>\n  )\n};\n\nconst ArrayNestedTypeComponent = ({question, parentQuestion, value, setValue, valueIndex, options}) => {\n  const keyName = `${parentQuestion.key}[${valueIndex}].${question.key}`;\n  const curVal = value[valueIndex][question.key];\n  const componentMap = {\n    boolean: <NestedButtonWrapper>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue(value.map((valObj, curInd) =>\n                        curInd === valueIndex ? {...valObj, [question.key]: true} : valObj))}\n                    selected={curVal}>Yes</StyledButton>\n      <StyledButton nested={true} type={\"button\"} disabled={question.disabled === \"True\"}\n                    onClick={() => setValue(value.map((valObj, curInd) =>\n                        curInd === valueIndex ? {...valObj, [question.key]: false} : valObj))}\n                    selected={curVal}>No</StyledButton>\n    </NestedButtonWrapper>,\n    radio: !question.options && (valueIndex < value.length - 1 || options.length === 1) ?\n        <StyledDocReqDiv>{curVal}</StyledDocReqDiv> :\n        <Dropdown selectedIndex={options.indexOf(curVal)} items={options} onChange={selected => setValue(value.map((valObj, curInd) =>\n              curInd === valueIndex ? {...valObj, [question.key]: selected} : valObj))}/>\n  };\n  return componentMap[question.type];\n};\n\nconst StyledIcon = styled(FontAwesomeIcon)`\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst DocReqInput = ({ question }) => {\n  const [, meta, helpers] = useField(question.key);\n  const { value } = meta;\n  const { setValue } = helpers;\n\n  const addDocument = () => {\n    const addition = {};\n    question.children.forEach(child => {\n      addition[child.key] = TYPE_TO_DEFAULT[child.type];\n      if (child.type === \"radio\") {\n        addition[child.key] = getOptions(child, true)[0];\n      }\n    });\n    setValue([...value, addition]);\n  };\n\n  const removeDocument = indexToRemove => {\n    setValue(value.filter((valObj, curInd) => curInd !== indexToRemove));\n  };\n\n  const getOptions = (childQuestion, includeLast) => {\n    if (childQuestion.options) return childQuestion.options;\n    else if (question.options) {\n      const valueOptionsSet = new Set(value.filter((valObj, curInd) => includeLast ||\n          curInd < value.length - 1).map(valObj => valObj[childQuestion.key]));\n      return question.options.filter(option => !valueOptionsSet.has(option));\n    } else return null;\n  };\n\n  const name = question.settings?.name;\n\n  return (\n    <BasicInput question={question}>\n      {!question.disabledTooltip && value.map((obj, i) => {\n        return (\n        <div style={{margin: \"20px\"}} key={i}>\n          <DocReqTitle>{name ? name : \"Documentary Requirement\"} #{i + 1} <StyledIcon icon={faTrash} onClick={() => removeDocument(i)}/></DocReqTitle>\n          {question.children.map(child => {\n            const keyName = `${question.key}[${i}].${child.key}`;\n            return (\n            <DocReqFieldWrapper key={keyName}>\n              <span>{child.questionText}{child.required ? <Asterisk> *</Asterisk> : null}</span>\n              {CommonNestedTypeComponent({question: child, keyName}) ||\n              ArrayNestedTypeComponent({question: child, parentQuestion: question, value, setValue, valueIndex: i, options: getOptions(child)})}\n            </DocReqFieldWrapper>)\n          })}\n        </div>\n      )})}\n      {!question.disabledTooltip && <center style={{ marginTop: '25px'}}>\n        <StyledButton disabled={question.options && question.options.length === value.length} type={\"button\"} onClick={addDocument}>Add {name ? name : \"Documentary Requirement\"}</StyledButton>\n      </center>}\n    </BasicInput>\n  )\n};\n\nconst contains = (option, answer) => {\n  if (option === \"*\") return answer.length;\n  else if (answer && Array.isArray(answer)) {\n    return  answer.some(piece => _.isEqual(piece, option));\n  } else {\n    return option === answer;\n  }\n};\n\nconst markDisabled = async ({questions, values, setLCApp, validateForm}) => {\n  let changed = false;\n  const questionsCopy = questions.map(q => ({...q}));\n  questionsCopy.filter(q => q.disabled).forEach(q => {\n    const dependency = JSON.parse(q.disabled);\n    for (let option of dependency.answer) {\n      if (contains(option, values[dependency.key])) {\n        const parentQuestion = questions.find(potential => potential.key === dependency.key);\n        changed = changed || !q.disabledTooltip;\n        const message = (<span style={{color: \"#58595A\"}}>This question is redundant based on your earlier\n        answer to <ClickableText>'{parentQuestion.questionText}'</ClickableText></span>);\n        q.disabledTooltip = {text: message, parentKey: parentQuestion.key};\n        return;\n      }\n    }\n    if (q.disabledTooltip) {\n      q.disabledTooltip = undefined;\n      changed = true;\n    }\n  });\n  if (changed) {\n    await setLCApp([...questionsCopy]);\n    validateForm();\n  }\n};\n\nconst findAndSetSectionsError = ({questions, errors, touched, setSectionsError}) => {\n  const erroredQuestions = questions.filter(q => errors[q.key]);\n  const erroredAndTouchedSections = erroredQuestions.filter(q => touched[q.key]).map(q => q.section);\n  setSectionsError(new Set(erroredAndTouchedSections));\n};\n\nconst scrollToFirstErrorOnSection = ({questions, errors, selectedSection}) => {\n  const erroredQuestions = questions.filter(q => errors[q.key]);\n  const erroredQuestionsOnSelectedSection = erroredQuestions.filter(q => q.section === selectedSection?.text);\n  if (erroredQuestionsOnSelectedSection.length) {\n    const selector = `[id=\"${erroredQuestionsOnSelectedSection[0].key}\"]`;\n    let errorElement = document.querySelector(selector);\n    errorElement.scrollIntoView({behavior: \"smooth\"});\n  } else {\n    window.scrollTo({top: 0, behavior: \"smooth\"});\n  }\n};\n\nconst ErrorFocus = (props) => {\n  let { isSubmitting, errors, touched, questions, selectedSection, setTouched, values } = props;\n\n  const prevErrors = usePrevious(errors);\n  const prevTouched = usePrevious(touched);\n  const prevValues = usePrevious(values);\n  const prevSelectedSection = usePrevious(selectedSection);\n  const prevIsSubmitting = usePrevious(isSubmitting);\n\n  const keyToEffect = {\n    scroll: scrollToFirstErrorOnSection,\n    sectionsErrors: findAndSetSectionsError,\n    markDisabled: markDisabled\n  };\n\n  useEffect(() => {\n    const effects = new Set();\n    if (!_.isEqual(selectedSection, prevSelectedSection)) {\n      touched = {...touched};\n      questions.forEach(q => {\n        if (q.section === prevSelectedSection?.text) {\n          touched[q.key] = true;\n        }\n      });\n      setTouched(touched);\n      effects.add(\"scroll\");\n    }\n    if (!_.isEqual(errors, prevErrors) || !_.isEqual(touched, prevTouched)) {\n      effects.add(\"sectionsErrors\");\n    }\n    if (!_.isEqual(values, prevValues)) {\n      effects.add(\"markDisabled\");\n    }\n    if (isSubmitting && !prevIsSubmitting) {\n      effects.add(\"sectionsErrors\");\n      effects.add(\"scroll\");\n    }\n    effects.forEach(effect => keyToEffect[effect](props));\n  });\n\n  return null;\n};\n\nconst usePrevious = value => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\nconst TYPE_TO_COMPONENT = {\n  text: TextInput,\n  decimal: NumberInput,\n  number: NumberInput,\n  boolean: YesNoInput,\n  radio: RadioInput,\n  date: DateInput,\n  checkbox: CheckboxInput,\n  object: ObjectInput,\n  array_of_objs: DocReqInput,\n};\n\nconst createDefault = question => {\n  let initial = question.initialValue;\n  if (question.type === \"object\") {\n    initial = initial || {};\n    question.children.forEach(child => {\n      initial[child.key] = child.initialValue || TYPE_TO_DEFAULT[child.type];\n    });\n  } else if (!initial) {\n    initial = TYPE_TO_DEFAULT[question.type];\n  }\n  return initial;\n};\n\nconst TYPE_TO_DEFAULT = {\n  text: \"\",\n  decimal: 0,\n  number: 0,\n  boolean: null,\n  radio: null,\n  date: (new Date()).toISOString().slice(0, 10),\n  checkbox: [],\n  object: {},\n  array_of_objs: [],\n};\n\nconst REQUIRED_FIELD_MSG = \"This field is required.\";\nconst REQUIRED_SECTION_MSG = \"Missing required fields\";\n\nconst TYPE_TO_VALIDATION_SCHEMA = {\n  text: string(),\n  decimal: number(),\n  number: number(),\n  boolean: boolean().nullable(),\n  radio: string().nullable(),\n  date: date(),\n  checkbox: array().of(string())\n};\n\nconst createChildrenShape = question => {\n  const shape = {};\n  question.children.forEach(child => {\n    shape[child.key] = child.required ?\n        TYPE_TO_VALIDATION_SCHEMA[child.type].required(REQUIRED_FIELD_MSG) :\n        TYPE_TO_VALIDATION_SCHEMA[child.type];\n  });\n  return shape;\n};\n\nconst createValidationSchema = question => {\n  let schema = TYPE_TO_VALIDATION_SCHEMA[question.type];\n  if (question.type === 'object') {\n    schema = object().shape(createChildrenShape(question));\n  } else if (question.type === 'array_of_objs') {\n    schema = array().of(object().shape(createChildrenShape(question)));\n  }\n  if (question.required && !question.disabledTooltip) {\n    schema = schema.required(REQUIRED_FIELD_MSG);\n  }\n  return schema;\n};\n\nconst loadTemplateAnswers = async ({lcApp, selectedTemplate, values, initialValues, setValues, setAppliedTemplate, setStatus}) => {\n  const questionType = {};\n  lcApp.forEach(q => questionType[q.key] = q.type);\n  const template = await makeAPIRequest(`/lc/digital_app_templates/${selectedTemplate.id}/`, \"GET\");\n  values = {...values};\n  for (let [key, value] of Object.entries(template)) {\n    const questionKey = _.snakeCase(key);\n    if (questionType[questionKey] === \"object\" ||\n        questionType[questionKey] === \"array_of_objs\" ||\n        questionType[questionKey] === \"checkbox\") value = JSON.parse(value);\n    if (initialValues[questionKey] !== undefined) values[questionKey] = value;\n    template[key] = value;\n  }\n  setStatus({status: \"success\", message: \"Successfully loaded application\"});\n  setTimeout(() => setStatus({status: null, message: \"\"}), 2500);\n  setValues(values);\n  setAppliedTemplate(template);\n};\n\nconst LoadTemplate = ({lcApp, setModal, initialValues, setAppliedTemplate, setStatus, setValues, values}) => {\n  const [selectedTemplate, setSelectedTemplate] = useState();\n  const [lcTemplates, setLCTemplates] = useState();\n\n  useEffect(() => {\n    const fetchTemplates = async () => {\n      setLCTemplates(await makeAPIRequest(\"/lc/digital_app_templates/\", \"GET\"));\n    };\n    fetchTemplates();\n  }, []);\n\n  return (\n      <Modal show={true} title={\"Load Application Template\"} onCancel={() => setModal(null)}\n             onSelect={async () => {\n               setModal(null);\n               if (!selectedTemplate) return;\n               await loadTemplateAnswers({lcApp, selectedTemplate, values, initialValues, setValues, setAppliedTemplate, setStatus});\n             }}\n      >\n        {lcTemplates && !lcTemplates.length && <div style={{paddingBottom: 20, color: \"gray\", fontStyle: \"italic\"}}>No Saved Templates</div>}\n        {lcTemplates && <div style={{flex: 1, display: \"grid\", gridAutoRows: \"1fr\", overflowY: \"auto\", gridTemplateColumns: \"repeat(3, 1fr)\"}}>\n          {lcTemplates.map(template => <StyledButton type={\"button\"} fitWidth={true}\n                                                     selected={template.id === selectedTemplate?.id}\n                                                     onClick={() => setSelectedTemplate(template)}\n                                                     key={template.id}\n                                                     style={{margin: \"10px\"}}>{template.templateName}</StyledButton>)}\n        </div>}\n      </Modal>\n  )\n};\n\nconst SaveTemplate = ({setModal, values, lcApp, appliedTemplate, setStatus, setAppliedTemplate}) => {\n  const [newTemplateValue, setNewTemplateValue] = useState(\"\");\n  const [selectedSaveButton, setSelectedSaveButton] = useState(0);\n  const [saveTemplateError, setSaveTemplateError] = useState(\"\");\n  const [submitCount, setSubmitCount] = useState(0);\n  const [templateNameSet, setTemplateNameSet] = useState();\n  const [integrityError, setIntegrityError] = useState(\"\");\n\n  useEffect(() => {\n    const fetchTemplates = async () => {\n      setTemplateNameSet(new Set((await makeAPIRequest(\"/lc/digital_app_templates/\", \"GET\")).map(template => template.templateName)));\n    };\n    fetchTemplates();\n  }, []);\n\n  useEffect(() => {\n    appliedTemplate && setSelectedSaveButton(1);\n  }, [appliedTemplate?.id]);\n\n  return (\n      <Modal show={true} title={\"Save Application Template\"} containerStyle={{width: \"60%\"}} selectButton={\"Save\"}\n             onCancel={() => setModal(null)} error={submitCount > 0 && saveTemplateError} selectDisabled={submitCount && saveTemplateError}\n             onShow={() => {\n               const fields = [];\n               if (values[\"beneficiary_name\"]) fields.push(values[\"beneficiary_name\"].trim());\n               if (values[\"purchased_item\"]) fields.push(values[\"purchased_item\"].trim());\n               setNewTemplateValue(fields.join(\", \"));\n             }}\n             onSelect={async () => {\n               setSubmitCount(submitCount + 1);\n               const overwrite = selectedSaveButton === 1;\n               if (!overwrite && !newTemplateValue) {\n                 setSaveTemplateError(\"Please input a valid template name\");\n                 return;\n               }\n               const fields = {template_name: overwrite ? appliedTemplate.templateName : newTemplateValue.trim()};\n               lcApp.forEach(q => fields[q.key] =\n                   (q.type === \"object\" || q.type === \"array_of_objs\" || q.type === \"checkbox\") ?\n                       JSON.stringify(values[q.key]) : values[q.key]);\n               const res = await makeAPIRequest(`/lc/digital_app_templates/${overwrite ? `${appliedTemplate.id}/` : \"\"}`,\n                   overwrite ? \"PUT\" : \"POST\", fields, true);\n               let text = await res.text();\n               if (res.status !== 200) {\n                 if (res.status >= 500) text = \"Unknown server error. Please contact steve@bountium.org.\";\n                 else setIntegrityError(text);\n                 setSaveTemplateError(text);\n               } else {\n                 setModal(null);\n                 const questionType = {};\n                 lcApp.forEach(q => questionType[q.key] = q.type);\n                 const createdTemplate = JSON.parse(text)[overwrite ? \"updated_lc_template\" : \"created_lc_template\"];\n                 for (let [key, value] of Object.entries(createdTemplate)) {\n                   if (questionType[key] === \"object\" ||\n                       questionType[key] === \"array_of_objs\" ||\n                       questionType[key] === \"checkbox\") value = JSON.parse(value);\n                   createdTemplate[key] = value;\n                 }\n                 setAppliedTemplate(objectToCamelCase(createdTemplate));\n                 setStatus({status: \"success\", message: \"Successfully saved application\"});\n                 setTimeout(() => setStatus({status: null, message: \"\"}), 2500);\n               }\n             }}\n      >\n        <div>\n          {appliedTemplate && <div style={{flexDirection: \"row\", display: \"flex\", paddingBottom: 20}}>\n            <StyledButton selected={selectedSaveButton === 1} nested type={\"button\"}\n                          onClick={() => {\n                            setSelectedSaveButton(1);\n                            setSaveTemplateError(\"\");\n                          }}\n                          style={{width: 160, justifyContent: \"center\"}}>\n              Overwrite</StyledButton>\n            <StyledDiv style={{flex: 1, marginLeft: 10, visibility: selectedSaveButton === 1 ? \"visible\" : \"hidden\"}}>\n              {appliedTemplate.templateName}</StyledDiv>\n          </div>}\n          <div style={{flexDirection: \"row\", display: \"flex\"}}>\n            <StyledButton selected={selectedSaveButton === 0} nested type={\"button\"}\n                          onClick={async () => {\n                            await setSelectedSaveButton(0);\n                            if (!newTemplateValue) await setSaveTemplateError(\"Please input a valid template name\");\n                            else if (templateNameSet.has(newTemplateValue)) await setSaveTemplateError(integrityError);\n                            else await setSaveTemplateError(\"\");\n                            document.querySelector(\"#newTemplateInput\").focus();\n                          }}\n                          style={{width: 160, justifyContent: \"center\"}}>\n              New</StyledButton>\n            <StyledInput style={{flex: 1, marginLeft: 10, visibility: selectedSaveButton === 0 ? \"visible\" : \"hidden\"}}\n                         type={\"text\"} value={newTemplateValue} id={\"newTemplateInput\"}\n                         onChange={({target}) => {\n                           let text = target.value;\n                           setNewTemplateValue(text);\n                           text = text.trim();\n                           if (!text) setSaveTemplateError(\"Please input a valid template name\");\n                           else if (templateNameSet.has(text)) setSaveTemplateError(integrityError);\n                           else setSaveTemplateError(\"\");\n                         }}/>\n          </div>\n        </div>\n      </Modal>\n  )\n};\n\nconst unsavedChanges = ({values, template, initialValues, submitCount}) => {\n  if (submitCount) return false;\n  if (!template) return !_.isEqual(values, initialValues);\n  for (let [templateField, templateValue] of Object.entries(template)) {\n    templateField = _.snakeCase(templateField);\n    templateValue = objectToSnakeCase(templateValue);\n    if (values[templateField] !== undefined && emptyAndChanged(values[templateField], templateValue) && !_.isEqual(values[templateField], templateValue))\n      return true;\n  }\n  return false;\n};\n\nconst emptyAndChanged = (currentValue, templateValue) => {\n  return currentValue || templateValue || currentValue === false || templateValue === false;\n};\n\nconst Refresh = ({appliedTemplate}) => {\n  const { values, initialValues, submitCount } = useFormikContext();\n  useEffect(() => {\n    if (unsavedChanges({values, template: appliedTemplate, initialValues, submitCount})) {\n      window.onbeforeunload = () => \"You have unsaved changes. Are you sure you want to leave without saving?\";\n    } else {\n      window.onbeforeunload = undefined;\n    }\n    return () => window.onbeforeunload = undefined;\n  });\n  return null;\n};\n\nconst BankLCAppPage = ({ match }) => {\n  const persistedLcApp = JSON.parse(localStorage.getItem(`lc/${match.params.bankid}`));\n  const [user] = useContext(UserContext);\n  const [lcApp, setLCApp] = useState(null);\n  const [status, setStatus] = useState({status: null, message: \"\"});\n  const [selectedSectionIndex, setSelectedSectionIndex] = useState(null);\n  const [sections, setSections] = useState(null);\n  let [initialValues, setInitialValues] = useState({});\n  const [modal, setModal] = useState(null);\n  const [appliedTemplate, setAppliedTemplate] = useState(null);\n  useAuthentication(`/bank/${match.params.bankid}/application`);\n  useEffect(() => {\n    if (user && match.params.bankid) {\n      makeAPIRequest(`/bank/${match.params.bankid}/digital_app/`)\n      .then(json => {\n        const sectionSet = new Set();\n        json.forEach(q => {\n          sectionSet.add(q.section);\n          if (q.options) q.options = JSON.parse(q.options);\n          if (q.settings) q.settings = JSON.parse(q.settings);\n          q.children.forEach(child => {\n            if (child.options) child.options = JSON.parse(child.options);\n            if (child.settings) child.settings = JSON.parse(child.settings);\n          });\n        });\n        const sections = [];\n        if (persistedLcApp) {\n          initialValues = persistedLcApp;\n        } else {\n          json.forEach(q => {\n            if (user && q.key === 'applicant_name') initialValues[q.key] = user.business.name;\n            else if (user && q.key === 'applicant_address') initialValues[q.key] = user.business.address;\n            else initialValues[q.key] = createDefault(q);\n          });\n        }\n        sectionSet.forEach(\n            section => sections.push({text: section, error: false}));\n        setSections(sections);\n        setSelectedSectionIndex(0);\n        setInitialValues(initialValues);\n        setLCApp(json);\n      })\n    }\n  }, [match.params.bankid, user]);\n\n  let validationSchema = null;\n\n  if (lcApp) {\n    const schemaObj = {};\n    lcApp.forEach(q => {\n      schemaObj[q.key] = createValidationSchema(q);\n    });\n    validationSchema = object().shape(schemaObj);\n  }\n\n  return <BasicLayout\n          title={`LC Application ✏️`} isLoading={!lcApp} status={status} marginStyle={{marginBottom: 0, marginTop: 10}}>\n    {lcApp && (\n    <Formik\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        const app = {};\n        Object.entries(values).forEach((kv) => {\n          const [key, value] = kv;\n          if (value === null) {\n          } else {\n            app[key] = value;\n          }\n        });\n        makeAPIRequest(`/lc/by_bank/${match.params.bankid}/`, 'POST', app, true)\n          .then(async res => {\n            let text = await res.text();\n            if (res.status === 200) {\n              localStorage.removeItem(`lc/${match.params.bankid}`);\n              setStatus({ message:\n                    <div>\n                      <div style={{display: \"flex\"}}>\n                        <span style={{flex: 1}}/>\n                        <StyledIcon onClick={() => setStatus({status: null, message: \"\"})}\n                                    icon={faTimes} style={{color: \"black\"}}/>\n                      </div>\n                      <div>Your LC app has been sent in! The bank will get back to you ASAP.</div>\n                      <div style={{paddingTop: 25}}>\n                        <ClickableText onClick={() => {\n                          setStatus({status: null, message: \"\"});\n                          setModal(\"saveTemplate\");\n                        }}>\n                          Click here\n                        </ClickableText> to save your submitted application.</div>\n                    </div>,\n                status: \"success\" });\n            } else {\n              if (text.length > 250) text = \"Unknown server error. Please contact steve@bountium.org.\";\n              localStorage.setItem(`lc/${match.params.bankid}`, JSON.stringify(values));\n              setStatus({status: \"error\", message: `Error submitting form: ${text}`});\n            }\n            });\n        setSubmitting(false);\n      }}\n    >\n    {({ isSubmitting, errors, touched, setTouched, values, validateForm, setValues, handleSubmit, submitCount }) => (\n        <div style={{display: \"flex\", paddingBottom: 40}}>\n          <RouteBlockingModal when={unsavedChanges({values, template: appliedTemplate, initialValues, submitCount})}/>\n          <Refresh appliedTemplate={appliedTemplate}/>\n          {modal === \"loadTemplate\" && <LoadTemplate\n              initialValues={initialValues} lcApp={lcApp}\n              setAppliedTemplate={setAppliedTemplate} setModal={setModal}\n              setStatus={setStatus}\n              setValues={setValues} values={values}\n          />}\n          {modal === \"saveTemplate\" && <SaveTemplate\n              values={values} setStatus={setStatus} setAppliedTemplate={setAppliedTemplate}\n              setModal={setModal} lcApp={lcApp} appliedTemplate={appliedTemplate}\n          />}\n          <ErrorFocus\n              values={values} errors={errors} touched={touched} isSubmitting={isSubmitting} setLCApp={setLCApp} setTouched={setTouched}\n              selectedSection={sections[selectedSectionIndex]} questions={lcApp} validateForm={validateForm}\n              setSectionsError={(erroredSectionSet => {\n                const sectionsErrors = sections.map(section => section.error);\n                sections.forEach(section => {section.error = erroredSectionSet.has(section.text)});\n                !_.isEqual(sections.map(section => section.error), sectionsErrors) && setSections([...sections]);})}/>\n          <ResizableScreenDiv style={{width: \"30%\", position: \"sticky\", top: 0, display: \"flex\", flexDirection: \"column\"}}>\n            <div style={{flex: 1}}>\n              <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                <StyledButton type={\"button\"} style={{marginRight: \"10px\"}} fitWidth={true} onClick={() => {\n                  setModal(\"loadTemplate\");\n                }}>Load Template</StyledButton>\n                <StyledButton type={\"button\"} style={{marginLeft: 10, marginRight: 15}} fitWidth={true}\n                              onClick={() => setModal(\"saveTemplate\")}>\n                  Save As Template</StyledButton>\n              </div>\n              <ButtonVerticalWrapper>\n                {sections.map((section, index) => (<StyledSection\n                    type=\"button\"\n                    onClick={() => setSelectedSectionIndex(index)}\n                    style={{whiteSpace: \"pre\"}}\n                    key={section.text}\n                    selected={index === selectedSectionIndex}>\n                  {section.text}\n                  {section.error && <SectionSubtitle style={{color: '#dc3545'}}>{REQUIRED_SECTION_MSG}</SectionSubtitle>}\n                </StyledSection>))}\n              </ButtonVerticalWrapper>\n              <div style={{display: \"flex\", marginTop: \"20px\", width: \"95%\"}}>\n                <Button disabled={isSubmitting} onClick={handleSubmit}>Submit LC App</Button>\n              </div>\n            </div>\n            <div style={{flex: 1}}/>\n            {status.status && <StatusMessage style={{overflowY: \"auto\", flexGrow: 0, marginTop: 20}}\n                           status={status.status}>{status.message}</StatusMessage>}\n          </ResizableScreenDiv>\n          <Form style={{width: \"70%\"}}>\n            <div>\n              {lcApp && lcApp.filter(question => sections[selectedSectionIndex].text === question.section).map(question => {\n                const Component = TYPE_TO_COMPONENT[question.type];\n                return <Component\n                    key={question.id} question={question} status={status} setStatus={setStatus} lcApp={lcApp}\n                    setAppliedTemplate={setAppliedTemplate} appliedTemplate={appliedTemplate}/>;\n              })}\n              <div style={{display: \"flex\", marginLeft: \"150px\", marginRight: \"150px\"}}>\n                <Button\n                    style={{flex: 1, marginRight: \"50px\"}}\n                    disabled={selectedSectionIndex === 0}\n                    onClick={() => setSelectedSectionIndex(selectedSectionIndex - 1)}\n                    type=\"button\">Previous Section</Button>\n                <Button\n                    style={{flex: 1, marginLeft: \"50px\"}}\n                    onClick={selectedSectionIndex < sections.length - 1 ? () => setSelectedSectionIndex(selectedSectionIndex + 1) : null}\n                    type={selectedSectionIndex === sections.length - 1 ? \"submit\" : \"button\"}>\n                  {selectedSectionIndex === sections.length - 1 ? \"Submit LC App\" : \"Next Section\"}\n                </Button>\n              </div>\n            </div>\n          </Form>\n        </div>\n    )}\n      </Formik>\n\n    )}\n    </BasicLayout>\n};\n\nexport default BankLCAppPage;\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\nimport { Link } from \"react-router-dom\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  newBusinessName: string().required(requiredMsg),\n  newBusinessAddress: string().required(requiredMsg),\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg).matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BusinessSignUpPage = ({ history }) => {\n  const setUser = useContext(UserContext)[1];\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle={\n        <>\n      Get your team up & running with lightning-fast LC processing.\n      <br/><br/>\n      <span style={{fontStyle: 'italic'}}>Not a business? </span>\n      <Link to=\"/bank/register\">Register as a bank</Link>\n      </>\n      }\n    >\n    <Formik\n      initialValues={{\n        newBusinessName: '', newBusinessAddress: '', name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(\"/business/\", \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n            history.push(\"/business/invite\");\n          })\n          .then(() => setSubmitting(false));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n      <FormInput\n          title=\"Business Name\"\n          name=\"newBusinessName\"\n          type=\"text\"\n        />\n        <FormInput\n            title=\"Business Address\"\n            name=\"newBusinessAddress\"\n            type=\"text\"\n          />\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n<Button showArrow disabled={isSubmitting}>\n  Sign Up\n</Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BusinessSignUpPage;\n","import React, { useContext } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { object, string } from 'yup';\n\nimport Button from '../../components/ui/Button';\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { useAuthentication, UserContext } from '../../utils/auth';\nimport { makeAPIRequest } from '../../utils/api';\nimport styled from 'styled-components';\nimport { useState } from 'react';\n\nconst StyledForm = styled(Form)`\n  display: flex;\n  max-width: 800px;\n  min-width: 400px;\n  margin: auto;\n  justify-content: center;\n  > :not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nconst FormWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst validationSchema = object().shape({\n  email: string().email('Please enter a valid email address.').required('Please enter an email address.'),\n});\n\nconst StatusMessage = styled.div`\n  ${props => props.status && `\n    padding: 10px;\n  `}\n  border-radius: 5px;\n  max-width: 400px;\n  overflow: scroll;\n  margin: 40px auto auto;\n  background-color: ${props => props.status === `error` ? `#dc3545` : `#4bb759`};\n  color: #fff;\n`\n\nconst StyledField = styled(Field)`\n  border-radius: 5px;\n  border: 1px solid #cdcdcd;\n  font-size: 18px;\n  padding-left: 10px;\n`\n\nconst ErrorMessageWrapper = styled.div`\n  margin: auto;\n  max-width: 400px;\n  color: #dc3545;\n  margin-top: 10px;\n`\n\nconst ButtonHolder = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`\n\nconst BusinessInvitePage = ({ history }) => {\n  useAuthentication('/business/invite');\n  const [user] = useContext(UserContext);\n  const [status, setStatus] = useState({ status: null, message: \"\"});\n  return (\n    <BasicLayout\n      title={`Welcome${(user ? ', ' + user.name : '')} 🚀`}\n      subtitle=\"Enter your teammates' emails to invite them to the platform.\"\n    >\n      <Formik\n        initialValues={{ email: '' }}\n        onSubmit={(values, { setSubmitting }) => {\n          setSubmitting(true);\n          makeAPIRequest(`/business/${user.employer}/invite_teammate/`, \"POST\", { \"inviteeEmail\": values.email }, true)\n            .then((response) => {\n              if (response.status === 200) setStatus({\n                status: \"success\",\n                message: `Invite sent to ${values.email}!`\n              });\n              else setStatus({\n                status: \"error\",\n                message: `Error inviting ${values.email}.`\n              })\n            });\n          setSubmitting(false);\n        }}\n        validationSchema={validationSchema}\n      >\n      {({ isSubmitting }) => (\n        <FormWrapper>\n        <StyledForm>\n          <StyledField type=\"email\" name=\"email\"/>\n          <Button type=\"submit\">{isSubmitting ? 'Sending...' : 'Send'}</Button>\n        </StyledForm>\n        <ErrorMessageWrapper>\n          <ErrorMessage name=\"email\"/>\n        </ErrorMessageWrapper>\n        </FormWrapper>\n      )}\n      </Formik>\n        {status.status && (<StatusMessage status={status.status}>{status.message}</StatusMessage>)}\n\n    <ButtonHolder>\n      <Button showArrow onClick={() => history.push(\"/business/createApp\")}>\n        Next\n      </Button>\n    </ButtonHolder>\n    </BasicLayout>\n  );\n}\n\nexport default BusinessInvitePage;\n","import React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\nimport { get } from \"lodash\";\n\nimport Button from \"../../components/ui/Button\";\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { useAuthentication, UserContext } from \"../../utils/auth\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 10px;\n`;\n\nconst signUpFormValidationSchema = object().shape({\n  newBusinessName: string(),\n  name: string(),\n  title: string(),\n  password: string().matches(\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n    \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n    \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  ), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string()\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BusinessManageAccountPage = () => {\n  useAuthentication(\"/business/account\");\n  const [user, setUser] = useContext(UserContext);\n\n  return (\n    <BasicLayout title=\"My Account 🛠\" subtitle=\"View and edit your user settings.\" isLoading={!user}>\n    <Formik\n      initialValues={{\n        name: get(user, ['name']), title: get(user, ['title']), password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/business/${get(user, ['business', 'id'])}/${get(user, ['id'])}/`, \"PUT\", { name: values.name, title: values.title })\n          .then((json) => {\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n          })\n          .then(() => setSubmitting(false))\n          .catch((err) => console.error(err));\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"New Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm New Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n          <Button disabled={isSubmitting}>\n            Save Update\n          </Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n}\n\nexport default BusinessManageAccountPage;\n","import React, {useContext, useState} from \"react\";\nimport styled from \"styled-components\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { string, object, ref } from 'yup';\n\nimport BasicLayout from \"../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../utils/api';\nimport { UserContext } from \"../../utils/auth\";\nimport Button from \"../../components/ui/Button\";\nimport StatusMessage from \"../../components/ui/StatusMessage\";\n\nconst SignUpForm = styled(Form)`\n  background-color: #fff;\n  padding: 10px 20px;\n  border: 1px solid #e5e4e2;\n  border-radius: 25px;\n`;\n\nconst FormInputWrapper = styled.div`\n  margin: 20px 10px 40px;\n`;\n\nconst FormInputTitle = styled.h3`\n  font-size: 14px;\n  color: #555;\n`;\n\nconst StyledFormInput = styled(Field)`\n  font-size: 18px;\n  padding: 10px 0 5px;\n  min-width: 100%;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n`;\n\nconst StyledErrorMessage = styled(ErrorMessage)`\n  font-size: 12px;\n  color: #f00;\n  margin-top: 5px;\n`;\n\nconst FormFooter = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  margin-bottom: 10px;\n  \n  > :nth-child(1) {\n    grid-column-start: 2;\n    justify-self: center;\n  }\n  \n  > :nth-child(2) {\n    justify-self: end;\n  }\n`;\n\nconst requiredMsg = 'This field is required.';\n\nconst signUpFormValidationSchema = object().shape({\n  name: string().required(requiredMsg),\n  title: string().required(requiredMsg),\n  email: string().email('Please enter a valid email address.').required(requiredMsg),\n  password: string().required(requiredMsg),\n  // .matches(/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\n  //   \"Password must have at least 8 characters, and have at least one of each of the following: \" +\n  //   \"uppercase letter, lowercase letter, number, other special character (@$!%*#?&).\"\n  //), // wtf is this regex... idk but it works\n  // source https://stackoverflow.com/questions/55451304/formik-yup-password-strength-validation-with-react\n  // TODO update this to be more user friendly\n  passwordConfirm: string().required(requiredMsg)\n    .oneOf([ref('password')], \"Passwords do not match.\"),\n});\n\nconst FormInput = ({ title, type, name }) => {\n  return (\n    <FormInputWrapper>\n      <FormInputTitle>{title}</FormInputTitle>\n      <StyledFormInput type={type} name={name}/>\n      <StyledErrorMessage name={name} component=\"div\"/>\n    </FormInputWrapper>\n  );\n};\n\nconst BusinessEmployeeSignUpPage = ({ history, match }) => {\n  const setUser = useContext(UserContext)[1];\n  const [status, setStatus] = useState({status: null, message: \"\"});\n  return (\n    <BasicLayout\n      title=\"Welcome! 🎉\"\n      subtitle=\"Create your account for lightning-fast LC processing.\"\n    >\n    <Formik\n      initialValues={{\n        name: '', title: '', email: '', password: '', passwordConfirm: '',\n      }}\n      onSubmit={(values, { setSubmitting }) => {\n        setSubmitting(true);\n        makeAPIRequest(`/business/${match.params.businessid}/register/`, \"POST\", values)\n          .then((json) => {\n            setUser({ ...json.userEmployee, business: json.usersEmployer });\n            history.push(\"/business/invite\");\n          })\n          .then(() => setSubmitting(false))\n          .catch(e => e.text().then(message => setStatus({status: \"error\", message})).then(setSubmitting(false)))\n      }}\n      validationSchema={signUpFormValidationSchema}\n    >\n    {({ isSubmitting }) => (\n      <SignUpForm>\n        <FormInput\n          title=\"Your Name\"\n          name=\"name\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Your Title\"\n          name=\"title\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Email\"\n          name=\"email\"\n          type=\"text\"\n        />\n        <FormInput\n          title=\"Password\"\n          name=\"password\"\n          type=\"password\"\n        />\n        <FormInput\n          title=\"Confirm Password\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n        />\n        <FormFooter>\n          <StatusMessage style={{marginTop: 0, overflow: \"auto\"}} status={status.status}>{status.message}</StatusMessage>\n          <Button style={{height: \"fit-content\"}} showArrow disabled={isSubmitting}>\n            Sign Up\n          </Button>\n        </FormFooter>\n      </SignUpForm>\n    )}\n    </Formik>\n    </BasicLayout>\n  );\n};\n\nexport default BusinessEmployeeSignUpPage;\n","import React, { useEffect, useContext, useState } from 'react';\nimport { get } from 'lodash';\nimport styled from 'styled-components';\n\nimport BasicLayout from '../../../components/BasicLayout';\nimport { useAuthentication, UserContext } from '../../../utils/auth';\nimport { makeAPIRequest } from '../../../utils/api';\nimport Button from '../../../components/ui/Button';\nimport StatusMessage from '../../../components/ui/StatusMessage';\n\nconst ClaimMessage = styled.div`\n  font-weight: 300;\n  max-width: 600px;\n  text-align: center;\n  margin: auto auto 20px;\n  font-size: 18px;\n`\n\nconst useStatus = (init) => {\n  const [status, setStatus] = useState(init || {status: null, message: ''});\n  return {\n    status,\n    setSuccess: (msg) => setStatus({status: 'success', message: msg}),\n    setError: (msg) => setStatus({status: 'error', message: msg}),\n    clearStatus: () => setStatus({status: null, message: ''}),\n  }\n}\n\nconst ClaimBeneficiaryStatusPage = ({ match, history }) => {\n  const lcid = match.params.lcid;\n  useAuthentication(`/business/claimBeneficiary/${lcid}`);\n  const [lc, setLc] = useState(null);\n  const [user] = useContext(UserContext);\n  const { status, setError, setSuccess } = useStatus();\n  if (user && user.bank) history.push('/'); // redirect if wrong user type\n  // TODO come up with a better way to do that ^\n  console.log(lc)\n\n  useEffect(() => {\n    makeAPIRequest(`/lc/${lcid}/`, 'GET')\n      .then(json => setLc(json));\n  }, [lcid])\n\n  const handleClick = () => {\n    makeAPIRequest(`/lc/${lcid}/claim_beneficiary/`, 'POST')\n      .then(() => setSuccess('Congratulations! You have claimed beneficiary status on this order.'))\n      .catch(async (res) => {\n        const a = await res.text();\n        if (a.length > 250) setError('There was an error claiming beneficiary status.')\n        else setError('There was an error claiming beneficiary status: ' + res.error)\n      })\n  }\n\n  return (\n    <BasicLayout\n      title=\"Claim Beneficiary Status\"\n      isLoading={!(user && lc)}\n    >\n      <ClaimMessage>\n        {`Are you a representative of ${get(user, 'business.name')}, selling ${lc && lc.purchasedItem ? `${get(lc, 'unitsPurchased')}\n         ${get(lc, 'unitOfMeasure')} of ${get(lc, 'purchasedItem')} ` : ''}to ${get(lc, 'client.name')}${lc && lc.dueDate ? \n         `, due by ${get(lc, 'dueDate')}` : ''}?`}\n      </ClaimMessage>\n      <center><Button onClick={handleClick}>Yes, Claim Beneficiary Status</Button></center>\n      {status.status && <StatusMessage status={status.status}>{status.message}</StatusMessage>}\n    </BasicLayout>\n  )\n}\n\nexport default ClaimBeneficiaryStatusPage;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { get } from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\n\nimport BasicLayout from \"../../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../../utils/api';\nimport config from \"../../../config\";\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #000;\n  line-height: 1.25;\n`\n\nconst ListEntryField = styled.li`\n  flex-grow: 1;\n  flex-basis: 20%;\n  padding-left: 10px;\n  padding-right: 10px;\n`\n\nconst ListEntryWrapper = styled.ul`\n  display: flex;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border: 1px solid #cdcdcd;\n  font-weight: 500;\n  align-items: center;\n\n  ${(props) => !props.header && `\n  font-weight: 400;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n  transition: border 0.3s;\n  background-color: #fff;\n`\n\nconst useDebouncedEffect = (callback, parameters, delay) => {\n  const currentTimeout = useRef(null);\n\n  useEffect(() => {\n    if (currentTimeout.current !== null) {\n      clearTimeout(currentTimeout.current);\n    }\n    currentTimeout.current = setTimeout(callback, delay);\n    /* eslint-disable-next-line */\n  }, parameters);\n};\n\nconst Search = styled.input`\n  font-size: 16px;\n  padding: 5px 10px 5px 0;\n  border: none;\n`\n\nconst SearchWrapper = styled.div`\n  background-color: #fff;\n  border: 1px solid #cdcdcd;\n`\n\nconst Filter = ({ lcs, setShownLcs }) => {\n  const [filter, setFilter] = useState(null);\n  useDebouncedEffect(() => {\n    if (filter === null) return;\n    setShownLcs(lcs.filter(lc => lc.client.name.toLowerCase().includes(filter.toLowerCase())));\n  }, [filter, lcs], 200)\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n    <SearchWrapper>\n    <FontAwesomeIcon icon={faSearch}  style={{ padding: \"0 10px\"}} />\n      <Search type=\"text\" onChange={(e) => setFilter(e.target.value)} />\n    </SearchWrapper>\n      <span style={{ fontStyle: 'italic', marginLeft: '10px', fontWeight: 300, color: '#454545' }}>Start typing to filter by client</span>\n    </div>\n  )\n}\n\nconst LCListEntry = ({ lc }) => {\n  // NOTE: due_date and credit_amt will only be available for DigitalLCs\n  return (\n      <StyledLink to={`/lc/${lc.id}`}>\n      <ListEntryWrapper>\n        <ListEntryField>{lc.client.name}</ListEntryField>\n        <ListEntryField>{get(lc, 'beneficiary.name') || \"Unknown\"}</ListEntryField>\n        <ListEntryField>{lc.applicationDate}</ListEntryField>\n        <ListEntryField>{lc.draftPresentationDate || \"N/A\"}</ListEntryField>\n        <ListEntryField>{lc.creditAmt || \"N/A\"}</ListEntryField>\n      </ListEntryWrapper>\n      </StyledLink>\n  )\n}\n\n// The only different between this and the bank lc feed\n// is setting business id based on the user's business field\n// + addition of link to client or bene view\n// This could almost certainly be abstracted\nconst BusinessLCFeed = ({ title, user, url, hideSearch, currentlyOnClient }) => {\n  const [lcs, setLcs] = useState(null);\n  const [shownLcs, setShownLcs] = useState(null);\n  const businessid = get(user, ['business', 'id']);\n\n  useEffect(() => {\n    if (!businessid) return;\n    makeAPIRequest(url)\n      .then(json => {\n        setLcs(json);\n        setShownLcs(json);\n      });\n  }, [businessid, url]);\n\n  return (\n    <BasicLayout\n      title={title}\n      isLoading={!shownLcs}\n      link={`/business/lcs/${currentlyOnClient ? \"beneficiary\" : \"client\"}`}\n      linktext={`View LCs for which you are a ${currentlyOnClient ? \"beneficiary\" : \"client\"}`}\n    >\n    {/* \"Heading\" of the feed - delete if you think it unnecessary*/}\n    <div>\n      {!hideSearch && <Filter lcs={lcs} setShownLcs={setShownLcs} />}\n      <ListEntryWrapper header>\n        <ListEntryField>Client</ListEntryField>\n        <ListEntryField>Beneficiary</ListEntryField>\n        <ListEntryField>Applied</ListEntryField>\n        <ListEntryField>Drafts Due</ListEntryField>\n        <ListEntryField>Transaction Size</ListEntryField>\n      </ListEntryWrapper>\n    </div>\n    {(shownLcs && (shownLcs.length > 0 ? (\n      <div>\n    {shownLcs.map(lc => <LCListEntry lc={lc} key={lc.id}/>)}\n    </div>\n    ) : (<center style={{ marginTop: '30px', fontStyle: 'italic', color: '#888' }}>You don't have any LCs yet.</center>)))}\n    </BasicLayout>\n  )\n\n}\n\nexport default BusinessLCFeed;\n","import React, { useContext } from \"react\";\nimport BusinessLCFeed from \"./BusinessLCFeed\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\nimport { get } from \"lodash\";\n\nconst ClientLCFeedPage = ({ match }) => {\n  useAuthentication(`/business/lcs/client/`);\n  const [user] = useContext(UserContext);\n  const businessid = get(user, ['business', 'id']);\n  const businessname = get(user, ['business', 'name']);\n\n  const title = `All LCs ${businessname} has applied or been approved for`\n  return <BusinessLCFeed\n    title={title}\n    url={`/lc/by_client/${businessid}/`}\n    user={user}\n    hideSearch\n    currentlyOnClient\n    />\n}\n\nexport default ClientLCFeedPage\n","import React, { useContext } from \"react\";\nimport BusinessLCFeed from \"./BusinessLCFeed\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\nimport { get } from 'lodash'\n\nconst BeneficiaryLCFeedPage = ({ match }) => {\n  useAuthentication(`/business/lcs/beneficiary/`);\n  const [user] = useContext(UserContext);\n  const businessid = get(user, ['business', 'id']);\n  const businessname = get(user, ['business', 'name']);\n\n  const title = `All LCs for which ${businessname} is the named beneficiary`\n  return <BusinessLCFeed\n    title={title}\n    url={`/lc/by_beneficiary/${businessid}/`}\n    user={user}\n    hideSearch\n    />\n}\n\nexport default BeneficiaryLCFeedPage\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { get } from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { useAuthentication, UserContext } from \"../../../utils/auth\";\n\nimport BasicLayout from \"../../../components/BasicLayout\";\nimport { makeAPIRequest } from '../../../utils/api';\nimport config from \"../../../config\";\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: #000;\n  line-height: 1.25;\n`\n\nconst ListEntryField = styled.li`\n  flex-grow: 1;\n  flex-basis: 20%;\n  padding-left: 10px;\n  padding-right: 10px;\n`\n\nconst ListEntryWrapper = styled.ul`\n  display: flex;\n  margin: 10px auto;\n  padding: 15px 25px;\n  border: 1px solid #cdcdcd;\n  font-weight: 500;\n  align-items: center;\n\n  ${(props) => !props.header && `\n  font-weight: 400;\n  &:hover {\n    border: 1px solid ${config.accentColor};\n  }`}\n  transition: border 0.3s;\n  background-color: #fff;\n`\n\nconst useDebouncedEffect = (callback, parameters, delay) => {\n  const currentTimeout = useRef(null);\n\n  useEffect(() => {\n    if (currentTimeout.current !== null) {\n      clearTimeout(currentTimeout.current);\n    }\n    currentTimeout.current = setTimeout(callback, delay);\n    /* eslint-disable-next-line */\n  }, parameters);\n};\n\nconst Search = styled.input`\n  font-size: 16px;\n  padding: 5px 10px 5px 0;\n  border: none;\n`\n\nconst SearchWrapper = styled.div`\n  background-color: #fff;\n  border: 1px solid #cdcdcd;\n`\n\nconst Filter = ({ banks, setShownBanks }) => {\n  const [filter, setFilter] = useState(null);\n  useDebouncedEffect(() => {\n    if (filter === null) return;\n    setShownBanks(banks.filter(bank => bank.name.toLowerCase().includes(filter.toLowerCase())));\n  }, [filter, banks], 200)\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n    <SearchWrapper>\n    <FontAwesomeIcon icon={faSearch}  style={{ padding: \"0 10px\"}} />\n      <Search type=\"text\" onChange={(e) => setFilter(e.target.value)} />\n    </SearchWrapper>\n      <span style={{ fontStyle: 'italic', marginLeft: '10px', fontWeight: 300, color: '#454545' }}>Start typing to filter by name</span>\n    </div>\n  )\n}\n\nconst BankListEntry = ({ bank }) => {\n  return (\n      <StyledLink to={`/bank/${bank.id}/application`}>\n      <ListEntryWrapper>\n        <ListEntryField>{bank.name}</ListEntryField>\n      </ListEntryWrapper>\n      </StyledLink>\n  )\n}\n\nconst BankDirectory = ({ title, user, url, hideSearch }) => {\n  const [banks, setBanks] = useState(null);\n  const [shownBanks, setShownBanks] = useState(null);\n\n  const businessid = get(user, ['business', 'id']);\n\n  useEffect(() => {\n    if (!businessid) return;\n    makeAPIRequest(url)\n      .then(json => {\n        setBanks(json);\n        setShownBanks(json);\n      });\n  }, [businessid, url]);\n\n  return (\n    <BasicLayout\n      title={title}\n      isLoading={!shownBanks}\n    >\n    {/* \"Heading\" of the feed - delete if you think it unnecessary*/}\n    <div>\n      {!hideSearch && <Filter banks={banks} setShownBanks={setShownBanks} />}\n      <ListEntryWrapper header>\n        <ListEntryField>Bank</ListEntryField>\n      </ListEntryWrapper>\n    </div>\n    {(shownBanks && (shownBanks.length > 0 ? (\n      <div>\n    {shownBanks.map(bank => <BankListEntry bank={bank} key={bank.id}/>)}\n    </div>\n    ) : (<center style={{ marginTop: '30px', fontStyle: 'italic', color: '#888' }}>No banks found.</center>)))}\n    </BasicLayout>\n  )\n\n}\n\nconst BankDirectoryPage = ({ match }) => {\n  useAuthentication(`/banks/`);\n  const [user] = useContext(UserContext);\n\n  const title = `Find the perfect bank for your LC needs!`\n  return <BankDirectory\n    title={title}\n    url={`/bank/`}\n    user={user}\n    />\n}\n\nexport default BankDirectoryPage;\n","import React, { useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\n\nimport GlobalStyle, { CSSReset } from './GlobalStyle'\nimport HomePage from './pages/HomePage/HomePage';\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport Nav from './components/Nav';\nimport { UserContext } from './utils/auth';\nimport BankSignUpPage from './pages/bank/BankSignUpPage';\nimport BankInvitePage from './pages/bank/BankInvitePage';\nimport BankManageAccountPage from './pages/bank/BankManageAccountPage';\nimport BankLCAppFeedPage from './pages/bank/feeds/BankLCAppFeedPage';\nimport BankLiveLCFeedPage from './pages/bank/feeds/BankLiveLCFeedPage';\nimport BankLCFeedPage from './pages/bank/feeds/BankLCFeedPage';\nimport BankLCFeedPageByClient from './pages/bank/feeds/BankLCFeedPageByClient';\nimport LCViewPage from './pages/LCViewPage/LCViewPage';\nimport BankEmployeeSignUpPage from './pages/bank/BankEmployeeSignUpPage';\nimport BankLCAppPage from './pages/bank/BankLCAppPage';\nimport BusinessSignUpPage from './pages/business/BusinessSignUpPage';\nimport BusinessInvitePage from './pages/business/BusinessInvitePage';\nimport BusinessManageAccountPage from './pages/business/BusinessManageAccountPage';\nimport BusinessEmployeeSignUpPage from './pages/business/BusinessEmployeeSignUpPage';\nimport ClaimBeneficiaryStatusPage from './pages/business/beneficiary/ClaimBeneficiaryStatusPage';\nimport ClientLCFeedPage from './pages/business/feeds/ClientLCFeedPage';\nimport BeneficiaryLCFeedPage from './pages/business/feeds/BeneficiaryLCFeedPage';\nimport BankDirectoryPage from './pages/business/feeds/BankDirectoryPage';\n\n// TODO It seems like having the presentational nav in this mostly-container\n//      component is poor separation of concerns. Look into this.\nfunction App() {\n  const [user, setUser] = useState(null);\n  // const [user, setUser] = useState(null);\n  // TODO:\n  //<Route path=\"/business/lcs/:lcid\" component={BusinessLCViewPage} />\n  //<Route path=\"/business/lcs\" component={BusinessLCFeedPage} />\n\n  return (\n    <UserContext.Provider value={[user, setUser]}>\n      <Router>\n        <CSSReset />\n        <GlobalStyle />\n        <Nav user={user} setUser={setUser} />\n        <Switch>\n          <Route path=\"/create\" />\n          <Route path=\"/manage\" />\n          <Route path=\"/bank/register/:bankid\" component={BankEmployeeSignUpPage} />\n          <Route path=\"/bank/register\" component={BankSignUpPage} />\n          <Route path=\"/bank/invite\" component={BankInvitePage} />\n          <Route path=\"/bank/account\" component={BankManageAccountPage} />\n          <Route path=\"/lc/:lcid\" component={LCViewPage} />\n          <Route path=\"/bank/lcs/client/:clientid\" component={BankLCFeedPageByClient} />\n          <Route path=\"/bank/lcs/live\" component={BankLiveLCFeedPage} />\n          <Route path=\"/bank/lcs/apps\" component={BankLCAppFeedPage} />\n          <Route path=\"/bank/lcs\" component={BankLCFeedPage} />\n          <Route path=\"/bank/:bankid/application\" component={BankLCAppPage} />\n          <Route path=\"/business/register/:businessid\" component={BusinessEmployeeSignUpPage} />\n          <Route path=\"/business/register\" component={BusinessSignUpPage} />\n          <Route path=\"/business/invite\" component={BusinessInvitePage} />\n          <Route path=\"/business/account\" component={BusinessManageAccountPage} />\n          <Route path=\"/business/claimBeneficiary/:lcid\" component={ClaimBeneficiaryStatusPage} />\n          <Route path=\"/business/lcs/client/\" component={ClientLCFeedPage} />\n          <Route path=\"/business/lcs/beneficiary/\" component={BeneficiaryLCFeedPage} />\n          <Route path=\"/business/lcs/\" component={ClientLCFeedPage} />\n          <Route path=\"/banks\" component={BankDirectoryPage} />\n          <Route path=\"/login\" component={LoginPage}/>\n          <Route path=\"/\" component={HomePage} />\n        </Switch>\n      </Router>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/logo.980300c8.png\";"],"sourceRoot":""}